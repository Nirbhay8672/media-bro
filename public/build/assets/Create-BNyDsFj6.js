import{d as H,a as u,o as d,f as e,g as w,b as T,k as J,t as P,e as M,F as z,r as W,i as ne,p as $,q as ie,s as be,c as Y,v as ye,n as I,x as de,y as Q,z as ve,u as xe,A as ke,h as he,w as fe,B as ae,m as se}from"./app-_hSPPpaj.js";import{C as we,t as Ce,_ as Ee}from"./AppLayout.vue_vue_type_script_setup_true_lang-ePILkxA4.js";import{d as Se}from"./index-CtZEdrDG.js";import{L as $e}from"./loader-circle-DKPDPw2_.js";import{U as le,T as Te}from"./upload-BdmqQUdB.js";import{c as j}from"./createLucideIcon-BtAlzeoZ.js";import{C as ue}from"./copy-CRJ8IwnB.js";import{T as ge}from"./trash-2-CHU9FRbW.js";import{I as Ie}from"./image-CapvZbCh.js";import{S as X}from"./sweetalert2.esm.all-Bj_ZQUAw.js";import"./useAssets-B9YNNqIr.js";import"./useForwardExpose-BbwQQ45i.js";import"./VisuallyHidden-BaZmbOlo.js";import"./RovingFocusGroup-Df8SyLpR.js";import"./useArrowNavigation-C6Y-ieo6.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=j("CircleIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=j("LayersIcon",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=j("MoveIcon",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=j("SquareIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=j("StarIcon",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=j("TriangleIcon",[["path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"14u9p9"}]]),Pe={class:"w-full"},We={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700"},_e={class:"p-4"},Re={class:"flex flex-wrap items-end gap-4"},Qe={class:"flex-1 min-w-[200px]"},Ue=["value"],Ae={class:"flex-1 min-w-[200px]"},Oe={class:"relative quick-template-dropdown"},Le={class:"flex items-center"},je={key:0,class:"text-xs text-gray-500 dark:text-gray-400 ml-2"},Xe={key:0,class:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg"},Ye=["onClick"],He={class:"font-medium"},Ne={class:"text-xs text-gray-500 dark:text-gray-400"},qe={class:"flex gap-2"},Ve=["value"],Ke=["value"],Ge=["disabled"],Ze=H({__name:"TemplateSettings",props:{form:{},backgroundImagePreview:{},selectedQuickTemplate:{},isQuickTemplateDropdownOpen:{type:Boolean},isEditMode:{type:Boolean},isSubmitting:{type:Boolean}},emits:["update:form","update:backgroundImagePreview","update:selectedQuickTemplate","update:isQuickTemplateDropdownOpen","backgroundImageChange","applyQuickTemplate"],setup(_,{emit:S}){const x=_,h=S,p=[{name:"Instagram Post",width:1080,height:1080},{name:"Instagram Story",width:1080,height:1920},{name:"Facebook Post",width:1200,height:630},{name:"Custom Size",width:800,height:600}],C=(b,y)=>{if(b==="width"||b==="height"){const i=parseInt(y)||100,v=Math.max(100,Math.min(4e3,i));h("update:form",{...x.form,[b]:v})}else h("update:form",{...x.form,[b]:y})},E=b=>{h("applyQuickTemplate",b)},m=()=>{h("update:isQuickTemplateDropdownOpen",!x.isQuickTemplateDropdownOpen)};return(b,y)=>(d(),u("div",Pe,[e("div",We,[y[7]||(y[7]=e("div",{class:"p-4 border-b border-gray-200 dark:border-gray-700"},[e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Template Settings")],-1)),e("div",_e,[e("div",Re,[e("div",Qe,[y[3]||(y[3]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Template Name * ",-1)),e("input",{value:b.form.name,onInput:y[0]||(y[0]=i=>C("name",i.target.value)),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors text-sm",placeholder:"Enter template name"},null,40,Ue)]),e("div",Ae,[y[4]||(y[4]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Quick Templates ",-1)),e("div",Oe,[e("button",{type:"button",onClick:m,class:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[e("span",Le,[J(P(b.selectedQuickTemplate?b.selectedQuickTemplate.name:"Select a template...")+" ",1),b.selectedQuickTemplate?(d(),u("span",je," ("+P(b.selectedQuickTemplate.width)+" × "+P(b.selectedQuickTemplate.height)+"px) ",1)):w("",!0)]),T(M(we),{class:"h-4 w-4 text-gray-400"})]),b.isQuickTemplateDropdownOpen?(d(),u("div",Xe,[(d(),u(z,null,W(p,i=>e("button",{key:i.name,type:"button",onClick:v=>E(i),class:"w-full px-3 py-2 text-left hover:bg-gray-100 dark:hover:bg-gray-600 text-sm first:rounded-t-lg last:rounded-b-lg"},[e("div",He,P(i.name),1),e("div",Ne,P(i.width)+" × "+P(i.height)+"px ",1)],8,Ye)),64))])):w("",!0)])]),e("div",qe,[e("div",null,[y[5]||(y[5]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Width ",-1)),e("input",{value:b.form.width,onInput:y[1]||(y[1]=i=>C("width",i.target.value)),type:"number",min:"100",max:"4000",step:"1",class:"w-20 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors text-sm"},null,40,Ve)]),e("div",null,[y[6]||(y[6]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Height ",-1)),e("input",{value:b.form.height,onInput:y[2]||(y[2]=i=>C("height",i.target.value)),type:"number",min:"100",max:"4000",step:"1",class:"w-20 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors text-sm"},null,40,Ke)])]),e("div",null,[e("button",{type:"submit",disabled:!b.form.name||b.isSubmitting,class:"bg-blue-600 text-white py-2 px-6 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2"},[b.isSubmitting?(d(),ne(M($e),{key:0,class:"h-4 w-4 animate-spin"})):w("",!0),e("span",null,P(b.isSubmitting?b.isEditMode?"Updating...":"Creating...":b.isEditMode?"Update Template":"Create Template"),1)],8,Ge)])])])])]))}}),Je={class:"flex-1 min-w-0 relative"},et={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 flex flex-col relative"},tt={class:"px-4 py-2 border-b border-gray-200 dark:border-gray-700"},rt={class:"flex items-center justify-between"},ot={class:"flex items-center gap-3"},at={for:"background-upload",class:"cursor-pointer inline-flex items-center gap-2 px-3 py-1.5 text-xs font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"},st={key:0,class:"flex items-center gap-2"},lt=["src"],nt={class:"flex items-center gap-1"},it=["disabled"],dt=["disabled"],ut=["disabled"],gt=["disabled"],ct={class:"p-2 sm:p-4 flex justify-center items-start min-h-[300px] sm:min-h-[400px]"},pt={class:"relative w-full max-w-full overflow-hidden flex justify-center",style:{margin:"10px 0"}},mt={key:1,class:"flex h-full w-full items-center justify-center"},bt={class:"text-center"},yt={class:"mx-auto h-16 w-16 bg-gray-100 dark:bg-gray-600 rounded-full flex items-center justify-center mb-4"},vt=["onMousedown","onClick"],xt=["src","alt"],kt=["onClick"],ht=["onMousedown"],ft=H({__name:"CanvasEditor",props:{form:{},backgroundImagePreview:{},canvasElements:{},selectedElement:{},selectedTool:{}},emits:["canvasClick","elementMouseDown","mouseMove","mouseUp","selectElement","bringToFront","sendToBack","duplicateElement","deleteElement","resizeElement","backgroundImageChange"],setup(_,{emit:S}){const x=_,h=S,p=l=>{const a=l.target.files?.[0];a&&h("backgroundImageChange",a)},C=$(typeof window<"u"?window.innerWidth:1024),E=()=>{C.value=window.innerWidth};ie(()=>{window.addEventListener("resize",E)}),be(()=>{window.removeEventListener("resize",E)});const m=Y(()=>{const l=C.value<1024?400:600,c=C.value<1024?300:450,a=l/x.form.width,B=c/x.form.height,R=Math.min(a,B,1);return{width:x.form.width*R,height:x.form.height*R,scale:R}}),b=Y(()=>m.value.scale),y=Y(()=>[...x.canvasElements].sort((l,c)=>l.zIndex-c.zIndex)),i=l=>{h("canvasClick",l)},v=(l,c)=>{h("elementMouseDown",l,c)},U=l=>{O.value?V(l):h("mouseMove",l)},s=l=>{O.value?K():h("mouseUp",l)},t=l=>{h("selectElement",l)},o=l=>{t(l)},A=l=>{h("bringToFront",l)},te=l=>{h("sendToBack",l)},N=l=>{h("duplicateElement",l)},re=l=>{h("deleteElement",l)},O=$(!1),F=$({x:0,y:0,width:0,height:0,elementX:0,elementY:0,originalFontSize:0}),q=(l,c)=>{l.preventDefault(),l.stopPropagation(),O.value=!0,F.value={x:l.clientX,y:l.clientY,width:c.width,height:c.height,elementX:c.x,elementY:c.y,originalFontSize:c.properties.fontSize||16},x.selectedElement?.id!==c.id&&t(c)},V=l=>{if(!O.value||!x.selectedElement)return;const c=l.clientX-F.value.x,a=l.clientY-F.value.y,B=m.value.scale,R=c/B,Z=a/B;let r=Math.max(20,F.value.width+R),n=Math.max(20,F.value.height+Z);if(l.shiftKey){F.value.width/F.value.height;const f=Math.max(R,Z);r=Math.max(20,F.value.width+f),n=Math.max(20,F.value.height+f)}let k=F.value.originalFontSize;if(x.selectedElement.type==="text"){const f=n/F.value.height;k=Math.max(8,Math.round(F.value.originalFontSize*f))}h("resizeElement",x.selectedElement.id,r,n,x.selectedElement.x,x.selectedElement.y,k)},K=()=>{O.value=!1},G=l=>{switch(l){case"circle":return"circle(50% at 50% 50%)";case"triangle":return"polygon(50% 0%, 0% 100%, 100% 100%)";case"star":return"polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)";case"diamond":return"polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%)";case"hexagon":return"polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%)";case"octagon":return"polygon(30% 0%, 70% 0%, 100% 30%, 100% 70%, 70% 100%, 30% 100%, 0% 70%, 0% 30%)";case"rectangle":default:return"none"}};return(l,c)=>(d(),u("div",Je,[e("div",et,[c[9]||(c[9]=e("div",{class:"pt-5 px-4 pb-2 border-b border-gray-200 dark:border-gray-700"},[e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Template Editor")],-1)),e("div",tt,[e("div",rt,[e("div",ot,[e("input",{type:"file",accept:"image/*",onChange:p,class:"hidden",id:"background-upload"},null,32),e("label",at,[T(M(le),{class:"h-3 w-3"}),c[4]||(c[4]=J(" Background ",-1))]),l.backgroundImagePreview?(d(),u("div",st,[e("img",{src:l.backgroundImagePreview,alt:"Background preview",class:"h-6 w-6 object-cover rounded"},null,8,lt),c[5]||(c[5]=e("span",{class:"text-xs text-gray-500 dark:text-gray-400"},"Background set",-1))])):w("",!0)]),e("div",nt,[e("button",{type:"button",onClick:c[0]||(c[0]=a=>l.selectedElement&&A(l.selectedElement.id)),disabled:!l.selectedElement,title:"Bring to Front",class:"p-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[T(M(ee),{class:"h-4 w-4"})],8,it),e("button",{type:"button",onClick:c[1]||(c[1]=a=>l.selectedElement&&te(l.selectedElement.id)),disabled:!l.selectedElement,title:"Send to Back",class:"p-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[T(M(ee),{class:"h-4 w-4 rotate-180"})],8,dt),e("button",{type:"button",onClick:c[2]||(c[2]=a=>l.selectedElement&&N(l.selectedElement.id)),disabled:!l.selectedElement,title:"Duplicate",class:"p-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[T(M(ue),{class:"h-4 w-4"})],8,ut),e("button",{type:"button",onClick:c[3]||(c[3]=a=>l.selectedElement&&re(l.selectedElement.id)),disabled:!l.selectedElement,title:"Delete",class:"p-2 text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/30 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[T(M(ge),{class:"h-4 w-4"})],8,gt)])])]),e("div",ct,[e("div",pt,[e("div",{class:"canvas-container",style:I({width:m.value.width+"px",height:m.value.height+"px",transform:`scale(${b.value})`,transformOrigin:"top center",margin:"0 auto"})},[e("div",{class:"relative overflow-hidden bg-gray-50 dark:bg-gray-700 shadow-lg cursor-crosshair",style:I({width:x.form.width+"px",height:x.form.height+"px"}),onClick:i,onMousemove:U,onMouseup:s},[l.backgroundImagePreview?(d(),u("div",{key:0,class:"absolute inset-0 bg-cover bg-center bg-no-repeat z-0",style:I({backgroundImage:`url(${l.backgroundImagePreview})`,width:"100%",height:"100%"})},null,4)):w("",!0),!l.backgroundImagePreview&&l.canvasElements.length===0?(d(),u("div",mt,[e("div",bt,[e("div",yt,[T(M(le),{class:"h-8 w-8 text-gray-400"})]),c[6]||(c[6]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},"Start Creating",-1)),c[7]||(c[7]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Select a tool and click on the canvas to add elements ",-1))])])):w("",!0),(d(!0),u(z,null,W(y.value,a=>(d(),u("div",{key:a.id,class:Q(["absolute cursor-move select-none",l.selectedElement?.id===a.id?"ring-2 ring-blue-500":""]),style:I({left:a.x+"px",top:a.y+"px",width:a.width+"px",height:a.height+"px",transform:`rotate(${a.rotation}deg)`,zIndex:a.zIndex,filter:a.properties.boxShadow!=="none"?a.properties.boxShadow:"none",textShadow:a.properties.textShadow}),onMousedown:B=>v(B,a),onClick:de(B=>t(a),["stop"])},[a.type==="text"?(d(),u("div",{key:0,class:"w-full h-full flex items-center justify-center text-center",style:I({fontSize:(a.properties.fontSize||16)+"px",fontFamily:a.properties.fontFamily||"Arial",fontWeight:a.properties.fontWeight||"normal",fontStyle:a.properties.fontStyle||"normal",textDecoration:a.properties.textDecoration||"none",textAlign:a.properties.textAlign||"left",lineHeight:String(a.properties.lineHeight||1.2),color:a.properties.color||"#000000"})},P(a.properties.text||"Text"),5)):a.type==="image"?(d(),u("div",{key:1,class:"w-full h-full flex items-center justify-center text-center",style:I({backgroundColor:a.properties.backgroundColor||"transparent",border:`${a.properties.borderWidth||0}px ${a.properties.borderStyle||"solid"} ${a.properties.borderColor||"#000000"}`,borderRadius:(a.properties.borderRadius||0)+"px",clipPath:G(a.properties.imageShape||"rectangle")})},[a.properties.imageUrl?(d(),u("img",{key:0,src:a.properties.imageUrl,alt:a.properties.text||"Image",class:"max-w-full max-h-full",style:I({objectFit:a.properties.imageFit||"contain"})},null,12,xt)):(d(),u("div",{key:1,class:"w-full h-full flex items-center justify-center text-blue-500 bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-blue-900/20 dark:to-indigo-900/20 border-2 border-dashed border-blue-300 dark:border-blue-600 rounded-lg cursor-pointer hover:from-blue-100 hover:to-indigo-200 dark:hover:from-blue-800/30 dark:hover:to-indigo-800/30 hover:border-blue-400 dark:hover:border-blue-500 transition-all duration-200",onClick:B=>o(a)},[...c[8]||(c[8]=[e("div",{class:"relative"},[e("svg",{class:"w-12 h-12 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})]),e("div",{class:"absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full animate-pulse"})],-1)])],8,kt))],4)):a.type==="rectangle"?(d(),u("div",{key:2,class:"w-full h-full",style:I({backgroundColor:a.properties.fillColor,border:a.properties.hasBorder?`${a.properties.strokeWidth}px ${a.properties.borderStyle} ${a.properties.strokeColor}`:"none",borderRadius:(a.properties.borderRadius||0)+"px"})},null,4)):a.type==="circle"?(d(),u("div",{key:3,class:"w-full h-full rounded-full",style:I({backgroundColor:a.properties.fillColor,border:a.properties.hasBorder?`${a.properties.strokeWidth}px ${a.properties.borderStyle} ${a.properties.strokeColor}`:"none"})},null,4)):a.type==="triangle"?(d(),u("div",{key:4,class:"w-full h-full",style:I({backgroundColor:a.properties.fillColor,border:a.properties.hasBorder?`${a.properties.strokeWidth}px ${a.properties.borderStyle} ${a.properties.strokeColor}`:"none",clipPath:"polygon(50% 0%, 0% 100%, 100% 100%)"})},null,4)):a.type==="star"?(d(),u("div",{key:5,class:"w-full h-full",style:I({backgroundColor:a.properties.fillColor,border:a.properties.hasBorder?`${a.properties.strokeWidth}px ${a.properties.borderStyle} ${a.properties.strokeColor}`:"none",clipPath:"polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)"})},null,4)):w("",!0),l.selectedElement?.id===a.id?(d(),u("div",{key:6,class:"absolute -bottom-1 -right-1 w-4 h-4 bg-blue-500 border-2 border-white rounded-full pointer-events-auto cursor-se-resize hover:bg-blue-600 transition-colors shadow-lg",onMousedown:B=>q(B,a),title:"Resize (Shift+drag for proportional)"},null,40,ht)):w("",!0)],46,vt))),128))],36)],4)])])]),ye(l.$slots,"default")]))}}),wt={class:"bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm rounded-lg shadow-lg border border-gray-200/60 dark:border-gray-700/60"},Ct={class:"p-2"},Et={class:"grid grid-cols-4 gap-1"},St=["onClick","title"],$t=H({__name:"ToolsPanel",props:{selectedTool:{}},emits:["update:selectedTool"],setup(_,{emit:S}){const x=S,h=[{id:"select",name:"Select",icon:Me},{id:"text",name:"Text",icon:Te},{id:"image",name:"Image",icon:Ie},{id:"rectangle",name:"Rectangle",icon:Be},{id:"circle",name:"Circle",icon:Fe},{id:"triangle",name:"Triangle",icon:ze},{id:"star",name:"Star",icon:De}],p=C=>{x("update:selectedTool",C)};return(C,E)=>(d(),u("div",wt,[E[0]||(E[0]=e("div",{class:"p-2 border-b border-gray-200/60 dark:border-gray-700/60"},[e("h2",{class:"text-xs font-semibold text-gray-900 dark:text-white"},"Tools")],-1)),e("div",Ct,[e("div",Et,[(d(),u(z,null,W(h,m=>e("button",{key:m.id,type:"button",onClick:b=>p(m.id),class:Q(["flex items-center justify-center w-7 h-7 rounded-md transition-colors",C.selectedTool===m.id?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"]),title:m.name},[(d(),ne(ve(m.icon),{class:"h-3.5 w-3.5"}))],10,St)),64))])])]))}}),Tt={key:0,class:"bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm rounded-lg shadow-lg border border-gray-200/60 dark:border-gray-700/60"},It={class:"p-3"},Ft={class:"mb-3"},Mt={class:"flex space-x-1 bg-gray-100 dark:bg-gray-700 rounded-md p-1"},Bt={class:"space-y-3"},Dt={key:0,class:"space-y-2"},zt={key:0},Pt=["value"],Wt={key:1},_t=["value"],Rt={key:1,class:"space-y-2"},Qt={key:0,class:"space-y-2"},Ut=["value"],At=["value"],Ot=["value"],Lt={class:"flex gap-1"},jt={class:"flex items-center gap-2"},Xt=["value"],Yt={class:"flex flex-wrap gap-1"},Ht=["onClick"],Nt={key:1,class:"space-y-2"},qt=["value"],Vt=["value"],Kt=["value"],Gt={class:"space-y-2"},Zt={class:"flex gap-2"},Jt={class:"flex items-center"},er=["checked"],tr={class:"flex items-center"},rr=["checked"],or={key:0,class:"flex items-center gap-2"},ar=["value"],sr={class:"flex flex-wrap gap-1"},lr=["onClick"],nr={key:2},ir={class:"flex items-center gap-2"},dr=["value"],ur={class:"flex flex-wrap gap-1"},gr=["onClick"],cr={class:"flex items-center gap-2"},pr=["value"],mr={class:"flex flex-wrap gap-1"},br=["onClick"],yr={key:3},vr={class:"flex items-center gap-2 mb-2"},xr=["checked"],kr={key:0,class:"space-y-2"},hr={class:"grid grid-cols-2 gap-2"},fr=["value"],wr=["value"],Cr=["value"],Er=["value"],Sr=["value"],$r=["value"],Tr={key:2,class:"space-y-2"},Ir={class:"grid grid-cols-2 gap-2"},Fr=["value"],Mr=["value"],Br={class:"grid grid-cols-2 gap-2"},Dr=["value"],zr=["value"],Pr={class:"space-y-2"},Wr={class:"grid grid-cols-2 gap-1"},_r={class:"space-y-2"},Rr=H({__name:"PropertiesPanel",props:{selectedElement:{}},emits:["updateElement","bringToFront","sendToBack","duplicateElement","deleteElement"],setup(_,{emit:S}){const x=_,h=S,p=$("content"),C=["Arial","Helvetica","Times New Roman","Georgia","Verdana","Courier New","Impact","Comic Sans MS","Trebuchet MS","Arial Black","Palatino","Garamond","Bookman","Avant Garde","Helvetica Neue","Roboto","Open Sans","Lato","Montserrat","Poppins","Source Sans Pro"],E=[{name:"None",value:"none"},{name:"Small",value:"drop-shadow(0 2px 4px rgba(0,0,0,0.1))"},{name:"Medium",value:"drop-shadow(0 4px 8px rgba(0,0,0,0.15))"},{name:"Large",value:"drop-shadow(0 8px 16px rgba(0,0,0,0.2))"},{name:"X-Large",value:"drop-shadow(0 12px 24px rgba(0,0,0,0.25))"},{name:"Glow",value:"drop-shadow(0 0 20px rgba(0,0,0,0.3))"}],m=[{name:"Solid",value:"solid"},{name:"Dashed",value:"dashed"},{name:"Dotted",value:"dotted"},{name:"Double",value:"double"},{name:"Groove",value:"groove"},{name:"Ridge",value:"ridge"},{name:"Inset",value:"inset"},{name:"Outset",value:"outset"}],b=[{name:"Rectangle",value:"rectangle"},{name:"Circle",value:"circle"},{name:"Triangle",value:"triangle"},{name:"Star",value:"star"},{name:"Diamond",value:"diamond"},{name:"Hexagon",value:"hexagon"},{name:"Octagon",value:"octagon"}],y=["#000000","#FFFFFF","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#FFA500","#800080","#FFC0CB","#A52A2A","#808080","#C0C0C0","#FFD700","#008000","#000080","#800000"],i=(s,t)=>{x.selectedElement&&h("updateElement",x.selectedElement.id,s,t)},v=s=>s.target?.value||"",U=s=>s.target?.checked||!1;return(s,t)=>s.selectedElement?(d(),u("div",Tt,[e("div",It,[t[57]||(t[57]=e("h2",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-3"},"Properties",-1)),e("div",Ft,[e("div",Mt,[e("button",{type:"button",onClick:t[0]||(t[0]=o=>p.value="content"),class:Q(["flex-1 px-2 py-1.5 text-xs font-medium rounded transition-colors",p.value==="content"?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"])}," Content ",2),e("button",{type:"button",onClick:t[1]||(t[1]=o=>p.value="style"),class:Q(["flex-1 px-2 py-1.5 text-xs font-medium rounded transition-colors",p.value==="style"?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"])}," Style ",2),e("button",{type:"button",onClick:t[2]||(t[2]=o=>p.value="position"),class:Q(["flex-1 px-2 py-1.5 text-xs font-medium rounded transition-colors",p.value==="position"?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"])}," Position ",2)])]),e("div",Bt,[p.value==="content"?(d(),u("div",Dt,[s.selectedElement.type==="text"?(d(),u("div",zt,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Text Content ",-1)),e("textarea",{value:s.selectedElement.properties.text||"",onInput:t[3]||(t[3]=o=>i("text",v(o))),rows:"3",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors text-sm",placeholder:"Enter text content"},null,40,Pt)])):w("",!0),s.selectedElement.type==="image"?(d(),u("div",Wt,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Image URL ",-1)),e("input",{value:s.selectedElement.properties.imageUrl||"",onInput:t[4]||(t[4]=o=>i("imageUrl",v(o))),type:"url",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors text-sm",placeholder:"Enter image URL"},null,40,_t)])):w("",!0)])):w("",!0),p.value==="style"?(d(),u("div",Rt,[s.selectedElement.type==="text"?(d(),u("div",Qt,[e("div",null,[t[33]||(t[33]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Font Size ",-1)),e("input",{value:s.selectedElement.properties.fontSize||16,onInput:t[5]||(t[5]=o=>i("fontSize",parseInt(v(o))||16)),type:"number",min:"8",max:"200",class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},null,40,Ut)]),e("div",null,[t[34]||(t[34]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Font Family ",-1)),e("select",{value:s.selectedElement.properties.fontFamily||"Arial",onChange:t[6]||(t[6]=o=>i("fontFamily",v(o))),class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},[(d(),u(z,null,W(C,o=>e("option",{key:o,value:o},P(o),9,Ot)),64))],40,At)]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Font Style ",-1)),e("div",Lt,[e("button",{type:"button",onClick:t[7]||(t[7]=o=>i("fontWeight",s.selectedElement.properties.fontWeight==="bold"?"normal":"bold")),class:Q(["px-2 py-1 text-xs rounded",s.selectedElement.properties.fontWeight==="bold"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"])}," Bold ",2),e("button",{type:"button",onClick:t[8]||(t[8]=o=>i("fontStyle",s.selectedElement.properties.fontStyle==="italic"?"normal":"italic")),class:Q(["px-2 py-1 text-xs rounded",s.selectedElement.properties.fontStyle==="italic"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"])}," Italic ",2),e("button",{type:"button",onClick:t[9]||(t[9]=o=>i("textDecoration",s.selectedElement.properties.textDecoration==="underline"?"none":"underline")),class:Q(["px-2 py-1 text-xs rounded",s.selectedElement.properties.textDecoration==="underline"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"])}," Underline ",2)])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Text Color ",-1)),e("div",jt,[e("input",{value:s.selectedElement.properties.color||"#000000",onInput:t[10]||(t[10]=o=>i("color",v(o))),type:"color",class:"w-8 h-8 border border-gray-300 dark:border-gray-600 rounded cursor-pointer"},null,40,Xt),e("div",Yt,[(d(),u(z,null,W(y,o=>e("button",{key:o,type:"button",onClick:A=>i("color",o),style:I({backgroundColor:o}),class:"w-6 h-6 rounded border border-gray-300 dark:border-gray-600 hover:scale-110 transition-transform"},null,12,Ht)),64))])])])])):w("",!0),s.selectedElement.type==="image"?(d(),u("div",Nt,[e("div",null,[t[37]||(t[37]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Image Shape ",-1)),e("select",{value:s.selectedElement.properties.imageShape||"rectangle",onChange:t[11]||(t[11]=o=>i("imageShape",v(o))),class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},[(d(),u(z,null,W(b,o=>e("option",{key:o.value,value:o.value},P(o.name),9,Vt)),64))],40,qt)]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Image Fit ",-1)),e("select",{value:s.selectedElement.properties.imageFit||"contain",onChange:t[12]||(t[12]=o=>i("imageFit",v(o))),class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},[...t[38]||(t[38]=[e("option",{value:"contain"},"Contain",-1),e("option",{value:"cover"},"Cover",-1),e("option",{value:"fill"},"Fill",-1),e("option",{value:"scale-down"},"Scale Down",-1)])],40,Kt)]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Background ",-1)),e("div",Gt,[e("div",Zt,[e("label",Jt,[e("input",{type:"radio",checked:!s.selectedElement.properties.backgroundColor||s.selectedElement.properties.backgroundColor==="transparent",onChange:t[13]||(t[13]=o=>i("backgroundColor","transparent")),class:"mr-1"},null,40,er),t[40]||(t[40]=e("span",{class:"text-xs"},"Transparent",-1))]),e("label",tr,[e("input",{type:"radio",checked:s.selectedElement.properties.backgroundColor&&s.selectedElement.properties.backgroundColor!=="transparent",onChange:t[14]||(t[14]=o=>i("backgroundColor","#ffffff")),class:"mr-1"},null,40,rr),t[41]||(t[41]=e("span",{class:"text-xs"},"Background Color",-1))])]),s.selectedElement.properties.backgroundColor&&s.selectedElement.properties.backgroundColor!=="transparent"?(d(),u("div",or,[e("input",{value:s.selectedElement.properties.backgroundColor,onInput:t[15]||(t[15]=o=>i("backgroundColor",v(o))),type:"color",class:"w-8 h-8 border border-gray-300 dark:border-gray-600 rounded cursor-pointer"},null,40,ar),e("div",sr,[(d(),u(z,null,W(y,o=>e("button",{key:o,type:"button",onClick:A=>i("backgroundColor",o),style:I({backgroundColor:o}),class:"w-6 h-6 rounded border border-gray-300 dark:border-gray-600 hover:scale-110 transition-transform"},null,12,lr)),64))])])):w("",!0)])])])):w("",!0),["rectangle","circle","triangle","star"].includes(s.selectedElement.type)?(d(),u("div",nr,[t[43]||(t[43]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Fill Color ",-1)),e("div",ir,[e("input",{value:s.selectedElement.properties.fillColor||"#000000",onInput:t[16]||(t[16]=o=>i("fillColor",v(o))),type:"color",class:"w-8 h-8 border border-gray-300 dark:border-gray-600 rounded cursor-pointer"},null,40,dr),e("div",ur,[(d(),u(z,null,W(y,o=>e("button",{key:o,type:"button",onClick:A=>i("fillColor",o),style:I({backgroundColor:o}),class:"w-6 h-6 rounded border border-gray-300 dark:border-gray-600 hover:scale-110 transition-transform"},null,12,gr)),64))])])])):w("",!0),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Stroke Color ",-1)),e("div",cr,[e("input",{value:s.selectedElement.properties.strokeColor||"#000000",onInput:t[17]||(t[17]=o=>i("strokeColor",v(o))),type:"color",class:"w-8 h-8 border border-gray-300 dark:border-gray-600 rounded cursor-pointer"},null,40,pr),e("div",mr,[(d(),u(z,null,W(y,o=>e("button",{key:o,type:"button",onClick:A=>i("strokeColor",o),style:I({backgroundColor:o}),class:"w-6 h-6 rounded border border-gray-300 dark:border-gray-600 hover:scale-110 transition-transform"},null,12,br)),64))])])]),s.selectedElement.type!=="text"?(d(),u("div",yr,[e("div",vr,[e("input",{checked:s.selectedElement.properties.hasBorder||!1,onChange:t[18]||(t[18]=o=>i("hasBorder",U(o))),type:"checkbox",class:"rounded"},null,40,xr),t[45]||(t[45]=e("label",{class:"text-xs font-medium text-gray-500 dark:text-gray-400"}," Enable Border ",-1))]),s.selectedElement.properties.hasBorder?(d(),u("div",kr,[e("div",hr,[e("div",null,[t[46]||(t[46]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Width ",-1)),e("input",{value:s.selectedElement.properties.borderWidth||1,onInput:t[19]||(t[19]=o=>i("borderWidth",parseInt(v(o))||1)),type:"number",min:"1",max:"20",class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},null,40,fr)]),e("div",null,[t[47]||(t[47]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Style ",-1)),e("select",{value:s.selectedElement.properties.borderStyle||"solid",onChange:t[20]||(t[20]=o=>i("borderStyle",v(o))),class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},[(d(),u(z,null,W(m,o=>e("option",{key:o.value,value:o.value},P(o.name),9,Cr)),64))],40,wr)])]),e("div",null,[t[48]||(t[48]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Border Radius ",-1)),e("input",{value:s.selectedElement.properties.borderRadius||0,onInput:t[21]||(t[21]=o=>i("borderRadius",parseInt(v(o))||0)),type:"number",min:"0",max:"50",class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},null,40,Er)])])):w("",!0)])):w("",!0),e("div",null,[t[49]||(t[49]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Shadow ",-1)),e("select",{value:s.selectedElement.properties.boxShadow||"none",onChange:t[22]||(t[22]=o=>i("boxShadow",v(o))),class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},[(d(),u(z,null,W(E,o=>e("option",{key:o.value,value:o.value},P(o.name),9,$r)),64))],40,Sr)])])):w("",!0),p.value==="position"?(d(),u("div",Tr,[e("div",Ir,[e("div",null,[t[50]||(t[50]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," X Position ",-1)),e("input",{value:s.selectedElement.x,onInput:t[23]||(t[23]=o=>i("x",parseInt(v(o))||0)),type:"number",class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},null,40,Fr)]),e("div",null,[t[51]||(t[51]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Y Position ",-1)),e("input",{value:s.selectedElement.y,onInput:t[24]||(t[24]=o=>i("y",parseInt(v(o))||0)),type:"number",class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},null,40,Mr)])]),e("div",Br,[e("div",null,[t[52]||(t[52]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Width ",-1)),e("input",{value:s.selectedElement.width,onInput:t[25]||(t[25]=o=>i("width",parseFloat(v(o))||10)),type:"number",step:"0.5",min:"10",class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},null,40,Dr)]),e("div",null,[t[53]||(t[53]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Height ",-1)),e("input",{value:s.selectedElement.height,onInput:t[26]||(t[26]=o=>i("height",parseFloat(v(o))||10)),type:"number",step:"0.5",min:"10",class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},null,40,zr)])]),e("div",Pr,[t[54]||(t[54]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Layer",-1)),e("div",Wr,[e("button",{type:"button",onClick:t[27]||(t[27]=o=>h("bringToFront",s.selectedElement.id)),class:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"},[T(M(ee),{class:"h-3 w-3 mx-auto"})]),e("button",{type:"button",onClick:t[28]||(t[28]=o=>h("sendToBack",s.selectedElement.id)),class:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"},[T(M(ee),{class:"h-3 w-3 mx-auto rotate-180"})])])]),e("div",_r,[e("button",{type:"button",onClick:t[29]||(t[29]=o=>h("duplicateElement",s.selectedElement.id)),class:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm"},[T(M(ue),{class:"h-4 w-4"}),t[55]||(t[55]=J(" Duplicate ",-1))]),e("button",{type:"button",onClick:t[30]||(t[30]=o=>h("deleteElement",s.selectedElement.id)),class:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm"},[T(M(ge),{class:"h-4 w-4"}),t[56]||(t[56]=J(" Delete Element ",-1))])])])):w("",!0)])])])):w("",!0)}}),Qr={class:"w-full px-2 sm:px-4 py-4"},Ur={class:"w-full"},Ar={class:"flex flex-col xl:flex-row gap-4"},Or={class:"flex-1 min-w-0"},Lr={class:"w-full xl:w-80 flex-shrink-0 space-y-4"},ao=H({__name:"Create",props:{template:{}},setup(_){const S=_;xe();const x=Y(()=>!!S.template),h=Y(()=>[{title:"Dashboard",href:Se().url},{title:"Templates",href:Ce.index().url},{title:x.value?"Edit Template":"Create Template",href:"#"}]),p=$({name:"",width:800,height:600,background_image:null,canvas_data:[]}),C=$(null);ie(()=>{if(x.value&&S.template){p.value.name=S.template.name,p.value.width=S.template.width,p.value.height=S.template.height;let r=S.template.canvas_data;if(typeof r=="string")try{r=JSON.parse(r)}catch{r=[]}s.value=Array.isArray(r)?r:[],S.template.background_image&&(C.value=`/storage/${S.template.background_image}`)}});const E=$("select"),m=$(null),b=$(!1),y=$({x:0,y:0}),i=$(!1);$(!1),$(""),$({x:0,y:0,width:0,height:0,fontSize:0});const v=$(!1),U=$(null),s=$([]);ke(m,()=>{},{deep:!0});const t=(r,n,g)=>{const k=s.value.length>0?Math.max(...s.value.map(L=>L.zIndex)):0,f={id:Date.now().toString(),type:r,x:n,y:g,width:r==="text"?200:100,height:r==="text"?50:100,rotation:0,zIndex:k+1,properties:{text:r==="text"?"Sample Text":"",fontSize:r==="text"?16:void 0,fontFamily:r==="text"?"Arial":void 0,fontWeight:r==="text"?"normal":void 0,fontStyle:r==="text"?"normal":void 0,textDecoration:r==="text"?"none":void 0,textAlign:r==="text"?"left":void 0,lineHeight:r==="text"?1.2:void 0,color:r==="text"?"#000000":void 0,fillColor:r==="text"?"transparent":"#000000",strokeColor:"#000000",strokeWidth:1,hasBorder:!1,borderWidth:1,borderStyle:"solid",borderColor:"#000000",borderRadius:0,boxShadow:"none",textShadow:"none",imageUrl:r==="image"?"":void 0,imageFit:r==="image"?"contain":void 0,backgroundColor:r==="text"||r==="image"?"transparent":"#000000",imageShape:r==="image"?"rectangle":void 0}};s.value.push(f),m.value=f,E.value="select"},o=r=>{m.value=r,E.value="select"},A=(r,n,g)=>{const k=s.value.findIndex(f=>f.id===r);if(k!==-1){const f=s.value[k];f.properties={...f.properties,[n]:g},s.value[k]={...f},m.value?.id===r&&(m.value={...f})}},te=r=>{if(E.value!=="select"){const n=r.target.getBoundingClientRect(),g=r.clientX-n.left,k=r.clientY-n.top;t(E.value,g,k)}},N=()=>{const r=document.querySelector(".template-preview-container");if(r){const n=r.getBoundingClientRect(),g=window.innerWidth<1024?400:600,k=window.innerWidth<1024?300:450,f=g/p.value.width,L=k/p.value.height,D=Math.min(f,L,1),oe=p.value.width*D,ce=p.value.height*D,pe=n.width/oe,me=n.height/ce;return Math.min(pe,me,1)*D}return 1},re=(r,n)=>{if(E.value==="select"){r.preventDefault(),b.value=!0;const g=N();y.value={x:r.clientX-n.x*g,y:r.clientY-n.y*g},m.value=n}},O=r=>{if(b.value&&m.value){const n=N();m.value.x=(r.clientX-y.value.x)/n,m.value.y=(r.clientY-y.value.y)/n}},F=r=>{b.value=!1},q=r=>{const n=s.value.find(g=>g.id===r);if(n){const g=Math.max(...s.value.map(k=>k.zIndex));n.zIndex=g+1}},V=r=>{const n=s.value.find(g=>g.id===r);if(n){const g=Math.min(...s.value.map(k=>k.zIndex));n.zIndex=g-1}},K=r=>{const n=s.value.find(g=>g.id===r);if(n){const g=Math.max(...s.value.map(f=>f.zIndex)),k={...n,id:Date.now().toString(),x:n.x+20,y:n.y+20,zIndex:g+1};s.value.push(k),m.value=k}},G=r=>{const n=s.value.findIndex(g=>g.id===r);n!==-1&&(s.value.splice(n,1),m.value?.id===r&&(m.value=null))},l=(r,n,g,k,f,L)=>{const D=s.value.find(oe=>oe.id===r);D&&(D.width=n,D.height=g,D.x=k,D.y=f,D.type==="text"&&L!==void 0&&(D.properties.fontSize=L),m.value?.id===r&&(m.value={...D}))},c=r=>{U.value=r,r.name!=="Custom"&&(p.value.width=r.width,p.value.height=r.height),v.value=!1},a=r=>{console.log("Background image file selected:",r),p.value.background_image=r;const n=new FileReader;n.onload=g=>{const k=g.target?.result;console.log("Background image preview created:",k?"Yes":"No"),C.value=k},n.readAsDataURL(r)},B=async()=>{if(p.value.width<100||p.value.height<100){X.fire({title:"Invalid Dimensions",text:"Canvas dimensions must be at least 100x100 pixels",icon:"warning",confirmButtonText:"OK"});return}if(!p.value.name.trim()){X.fire({title:"Missing Template Name",text:"Please enter a template name",icon:"warning",confirmButtonText:"OK"});return}i.value=!0;try{const r=new FormData;if(r.append("name",p.value.name),r.append("width",p.value.width.toString()),r.append("height",p.value.height.toString()),r.append("canvas_data",JSON.stringify(s.value)),p.value.background_image&&r.append("background_image",p.value.background_image),x.value){const n=await ae.post(`/templates/${S.template?.id}`,r,{headers:{"Content-Type":"multipart/form-data"}});X.fire({title:"Success!",text:"Template updated successfully.",icon:"success",position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,toast:!0}).then(()=>{se.visit("/templates")})}else{const n=await ae.post("/templates",r,{headers:{"Content-Type":"multipart/form-data"}});X.fire({title:"Success!",text:"Template created successfully.",icon:"success",position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,toast:!0}).then(()=>{se.visit("/templates")})}}catch(r){console.error("Error submitting form:",r);let n="An unexpected error occurred. Please try again.";if(r.response&&r.response.data&&r.response.data.message)n=r.response.data.message;else if(r.response&&r.response.data&&r.response.data.errors){const g=r.response.data.errors,k=Object.values(g)[0];Array.isArray(k)&&k.length>0&&(n=k[0])}X.fire({title:"Error!",text:n,icon:"error",confirmButtonText:"OK"})}finally{i.value=!1}},R=r=>{r.target.closest(".quick-template-dropdown")||(v.value=!1)},Z=r=>{r.key==="Escape"&&(v.value=!1)};return(r,n)=>(d(),u(z,null,[T(M(he),{title:x.value?"Edit Template":"Create Template"},null,8,["title"]),T(Ee,{breadcrumbs:h.value},{default:fe(()=>[e("div",{class:"min-h-screen bg-gray-50 dark:bg-gray-900",onClick:R,onKeydown:Z},[e("div",Qr,[e("form",{onSubmit:de(B,["prevent"]),class:"space-y-6"},[e("div",Ur,[T(Ze,{form:p.value,"onUpdate:form":n[0]||(n[0]=g=>p.value=g),backgroundImagePreview:C.value,"onUpdate:backgroundImagePreview":n[1]||(n[1]=g=>C.value=g),selectedQuickTemplate:U.value,"onUpdate:selectedQuickTemplate":n[2]||(n[2]=g=>U.value=g),isQuickTemplateDropdownOpen:v.value,"onUpdate:isQuickTemplateDropdownOpen":n[3]||(n[3]=g=>v.value=g),"is-edit-mode":x.value,"is-submitting":i.value,onBackgroundImageChange:a,onApplyQuickTemplate:c},null,8,["form","backgroundImagePreview","selectedQuickTemplate","isQuickTemplateDropdownOpen","is-edit-mode","is-submitting"])]),e("div",Ar,[e("div",Or,[T(ft,{form:p.value,backgroundImagePreview:C.value,canvasElements:s.value,selectedElement:m.value,selectedTool:E.value,onCanvasClick:te,onElementMouseDown:re,onMouseMove:O,onMouseUp:F,onSelectElement:o,onBringToFront:q,onSendToBack:V,onDuplicateElement:K,onDeleteElement:G,onResizeElement:l,onBackgroundImageChange:a},null,8,["form","backgroundImagePreview","canvasElements","selectedElement","selectedTool"])]),e("div",Lr,[T($t,{selectedTool:E.value,"onUpdate:selectedTool":n[4]||(n[4]=g=>E.value=g)},null,8,["selectedTool"]),T(Rr,{selectedElement:m.value,onUpdateElement:A,onBringToFront:q,onSendToBack:V,onDuplicateElement:K,onDeleteElement:G},null,8,["selectedElement"])])])],32)])],32)]),_:1},8,["breadcrumbs"])],64))}});export{ao as default};
