import{d as N,a as m,o as g,f as e,g as E,b as $,k as Z,t as W,e as P,F as B,r as O,i as de,p as T,q as ue,s as ye,c as Y,v as ve,n as F,x as ge,y as A,z as ke,u as xe,A as fe,h as we,w as Ce,B as le,m as ne}from"./app-DWOj4wqG.js";import{C as Ee,t as Te,_ as Se}from"./AppLayout.vue_vue_type_script_setup_true_lang-DCBKDZM-.js";import{d as $e}from"./index-DK8P9mNh.js";import{L as Ie}from"./loader-circle-B9NKeTs2.js";import{U as ie,T as Fe}from"./upload-B9X0yAm6.js";import{c as j}from"./createLucideIcon-MIVMacUf.js";import{C as ce}from"./copy-DtoPB_7W.js";import{T as pe}from"./trash-2-4oRtNOU1.js";import{I as ze}from"./x-Bcswif5I.js";import{S as Q}from"./sweetalert2.esm.all-Bj_ZQUAw.js";import"./useAssets-BbUZaFgJ.js";import"./useForwardExpose-Dzne_9qv.js";import"./VisuallyHidden-80Koq8-t.js";import"./RovingFocusGroup-CW2JpP4k.js";import"./useArrowNavigation-C6Y-ieo6.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=j("CircleIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=j("LayersIcon",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=j("MoveIcon",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=j("SquareIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=j("StarIcon",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=j("TriangleIcon",[["path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"14u9p9"}]]),We={class:"w-full"},_e={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700"},Qe={class:"p-4"},Re={class:"flex flex-wrap items-end gap-4"},qe={class:"flex-1 min-w-[200px]"},Ae=["value"],Ue={class:"flex-1 min-w-[200px]"},Le={class:"relative quick-template-dropdown"},je={class:"flex items-center"},He={key:0,class:"text-xs text-gray-500 dark:text-gray-400 ml-2"},Ye={key:0,class:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg"},Ne=["onClick"],Xe={class:"font-medium"},Ve={class:"text-xs text-gray-500 dark:text-gray-400"},Ke={class:"flex gap-2"},Ge=["value"],Ze=["value"],Je=["disabled"],et=N({__name:"TemplateSettings",props:{form:{},backgroundImagePreview:{},selectedQuickTemplate:{},isQuickTemplateDropdownOpen:{type:Boolean},originalImageDimensions:{},isEditMode:{type:Boolean},isSubmitting:{type:Boolean}},emits:["update:form","update:backgroundImagePreview","update:selectedQuickTemplate","update:isQuickTemplateDropdownOpen","backgroundImageChange","applyQuickTemplate"],setup(R,{emit:w}){const y=R,k=w,u=[{name:"Original Size",width:0,height:0},{name:"Instagram Post",width:1080,height:1080},{name:"Instagram Story",width:1080,height:1920},{name:"Facebook Post",width:1200,height:630},{name:"Custom Size",width:800,height:600}],C=(c,p)=>{if(c==="width"||c==="height"){const d=parseInt(p)||100,x=Math.max(100,Math.min(4e3,d));k("update:form",{...y.form,[c]:x})}else k("update:form",{...y.form,[c]:p})},I=c=>{k("applyQuickTemplate",c)},S=()=>{k("update:isQuickTemplateDropdownOpen",!y.isQuickTemplateDropdownOpen)};return(c,p)=>(g(),m("div",We,[e("div",_e,[p[7]||(p[7]=e("div",{class:"p-4 border-b border-gray-200 dark:border-gray-700"},[e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Template Settings")],-1)),e("div",Qe,[e("div",Re,[e("div",qe,[p[3]||(p[3]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Template Name * ",-1)),e("input",{value:c.form.name,onInput:p[0]||(p[0]=d=>C("name",d.target.value)),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors text-sm",placeholder:"Enter template name"},null,40,Ae)]),e("div",Ue,[p[4]||(p[4]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Quick Templates ",-1)),e("div",Le,[e("button",{type:"button",onClick:S,class:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[e("span",je,[Z(W(c.selectedQuickTemplate?c.selectedQuickTemplate.name:"Select a template...")+" ",1),c.selectedQuickTemplate?(g(),m("span",He," ("+W(c.selectedQuickTemplate.name==="Original Size"&&c.originalImageDimensions.width>0?`${c.originalImageDimensions.width} × ${c.originalImageDimensions.height}px`:`${c.selectedQuickTemplate.width} × ${c.selectedQuickTemplate.height}px`)+") ",1)):E("",!0)]),$(P(Ee),{class:"h-4 w-4 text-gray-400"})]),c.isQuickTemplateDropdownOpen?(g(),m("div",Ye,[(g(),m(B,null,O(u,d=>e("button",{key:d.name,type:"button",onClick:x=>I(d),class:"w-full px-3 py-2 text-left hover:bg-gray-100 dark:hover:bg-gray-600 text-sm first:rounded-t-lg last:rounded-b-lg"},[e("div",Xe,W(d.name),1),e("div",Ve,W(d.name==="Original Size"&&c.originalImageDimensions.width>0?`${c.originalImageDimensions.width} × ${c.originalImageDimensions.height}px`:d.name==="Original Size"?"No image uploaded":`${d.width} × ${d.height}px`),1)],8,Ne)),64))])):E("",!0)])]),e("div",Ke,[e("div",null,[p[5]||(p[5]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Width ",-1)),e("input",{value:c.form.width,onInput:p[1]||(p[1]=d=>C("width",d.target.value)),type:"number",min:"100",max:"4000",step:"1",class:"w-20 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors text-sm"},null,40,Ge)]),e("div",null,[p[6]||(p[6]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Height ",-1)),e("input",{value:c.form.height,onInput:p[2]||(p[2]=d=>C("height",d.target.value)),type:"number",min:"100",max:"4000",step:"1",class:"w-20 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors text-sm"},null,40,Ze)])]),e("div",null,[e("button",{type:"submit",disabled:!c.form.name||c.isSubmitting,class:"bg-blue-600 text-white py-2 px-6 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2"},[c.isSubmitting?(g(),de(P(Ie),{key:0,class:"h-4 w-4 animate-spin"})):E("",!0),e("span",null,W(c.isSubmitting?c.isEditMode?"Updating...":"Creating...":c.isEditMode?"Update Template":"Create Template"),1)],8,Je)])])])])]))}}),tt={class:"flex-1 min-w-0 relative"},rt={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 flex flex-col relative"},ot={class:"px-4 py-2 border-b border-gray-200 dark:border-gray-700"},at={class:"flex items-center justify-between"},st={class:"flex items-center gap-3"},lt={for:"background-upload",class:"cursor-pointer inline-flex items-center gap-2 px-3 py-1.5 text-xs font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"},nt={key:0,class:"flex items-center gap-2"},it=["src"],dt={class:"flex items-center gap-1"},ut=["disabled"],gt=["disabled"],ct=["disabled"],pt=["disabled"],mt={class:"p-2 sm:p-4 flex justify-center items-start min-h-[300px] sm:min-h-[400px]"},bt={class:"relative w-full max-w-full overflow-hidden flex justify-center",style:{margin:"10px 0"}},ht={key:1,class:"flex h-full w-full items-center justify-center"},yt={class:"text-center"},vt={class:"mx-auto h-16 w-16 bg-gray-100 dark:bg-gray-600 rounded-full flex items-center justify-center mb-4"},kt=["onMousedown","onClick"],xt=["src","alt"],ft=["onClick"],wt=["onMousedown"],Ct=N({__name:"CanvasEditor",props:{form:{},backgroundImagePreview:{},canvasElements:{},selectedElement:{},selectedTool:{}},emits:["canvasClick","elementMouseDown","mouseMove","mouseUp","selectElement","bringToFront","sendToBack","duplicateElement","deleteElement","resizeElement","backgroundImageChange"],setup(R,{emit:w}){const y=R,k=w,u=l=>{const a=l.target.files?.[0];a&&k("backgroundImageChange",a)},C=T(typeof window<"u"?window.innerWidth:1024),I=()=>{C.value=window.innerWidth};ue(()=>{window.addEventListener("resize",I)}),ye(()=>{window.removeEventListener("resize",I)});const S=Y(()=>{const l=C.value<1024?400:600,b=C.value<1024?300:450,a=l/y.form.width,D=b/y.form.height,_=Math.min(a,D,1);return{width:y.form.width*_,height:y.form.height*_,scale:_}}),c=Y(()=>S.value.scale),p=Y(()=>[...y.canvasElements].sort((l,b)=>l.zIndex-b.zIndex)),d=l=>{k("canvasClick",l)},x=(l,b)=>{k("elementMouseDown",l,b)},U=l=>{q.value?ae(l):k("mouseMove",l)},n=l=>{q.value?X():k("mouseUp",l)},t=l=>{k("selectElement",l)},o=l=>{t(l)},L=l=>{k("bringToFront",l)},ee=l=>{k("sendToBack",l)},te=l=>{k("duplicateElement",l)},re=l=>{k("deleteElement",l)},q=T(!1),z=T({x:0,y:0,width:0,height:0,elementX:0,elementY:0,originalFontSize:0}),oe=(l,b)=>{l.preventDefault(),l.stopPropagation(),q.value=!0,z.value={x:l.clientX,y:l.clientY,width:b.width,height:b.height,elementX:b.x,elementY:b.y,originalFontSize:b.properties.fontSize||16},y.selectedElement?.id!==b.id&&t(b)},ae=l=>{if(!q.value||!y.selectedElement)return;const b=l.clientX-z.value.x,a=l.clientY-z.value.y,D=S.value.scale,_=b/D,K=a/D;let G=Math.max(20,z.value.width+_),H=Math.max(20,z.value.height+K);if(l.shiftKey){z.value.width/z.value.height;const i=Math.max(_,K);G=Math.max(20,z.value.width+i),H=Math.max(20,z.value.height+i)}let s=z.value.originalFontSize;if(y.selectedElement.type==="text"){const i=H/z.value.height;s=Math.max(8,Math.round(z.value.originalFontSize*i))}k("resizeElement",y.selectedElement.id,G,H,y.selectedElement.x,y.selectedElement.y,s)},X=()=>{q.value=!1},V=l=>{switch(l){case"circle":return"circle(50% at 50% 50%)";case"triangle":return"polygon(50% 0%, 0% 100%, 100% 100%)";case"star":return"polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)";case"diamond":return"polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%)";case"hexagon":return"polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%)";case"octagon":return"polygon(30% 0%, 70% 0%, 100% 30%, 100% 70%, 70% 100%, 30% 100%, 0% 70%, 0% 30%)";case"rectangle":default:return"none"}};return(l,b)=>(g(),m("div",tt,[e("div",rt,[b[9]||(b[9]=e("div",{class:"pt-5 px-4 pb-2 border-b border-gray-200 dark:border-gray-700"},[e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Template Editor")],-1)),e("div",ot,[e("div",at,[e("div",st,[e("input",{type:"file",accept:"image/*",onChange:u,class:"hidden",id:"background-upload"},null,32),e("label",lt,[$(P(ie),{class:"h-3 w-3"}),b[4]||(b[4]=Z(" Background ",-1))]),l.backgroundImagePreview?(g(),m("div",nt,[e("img",{src:l.backgroundImagePreview,alt:"Background preview",class:"h-6 w-6 object-cover rounded"},null,8,it),b[5]||(b[5]=e("span",{class:"text-xs text-gray-500 dark:text-gray-400"},"Background set",-1))])):E("",!0)]),e("div",dt,[e("button",{type:"button",onClick:b[0]||(b[0]=a=>l.selectedElement&&L(l.selectedElement.id)),disabled:!l.selectedElement,title:"Bring to Front",class:"p-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[$(P(J),{class:"h-4 w-4"})],8,ut),e("button",{type:"button",onClick:b[1]||(b[1]=a=>l.selectedElement&&ee(l.selectedElement.id)),disabled:!l.selectedElement,title:"Send to Back",class:"p-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[$(P(J),{class:"h-4 w-4 rotate-180"})],8,gt),e("button",{type:"button",onClick:b[2]||(b[2]=a=>l.selectedElement&&te(l.selectedElement.id)),disabled:!l.selectedElement,title:"Duplicate",class:"p-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[$(P(ce),{class:"h-4 w-4"})],8,ct),e("button",{type:"button",onClick:b[3]||(b[3]=a=>l.selectedElement&&re(l.selectedElement.id)),disabled:!l.selectedElement,title:"Delete",class:"p-2 text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/30 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[$(P(pe),{class:"h-4 w-4"})],8,pt)])])]),e("div",mt,[e("div",bt,[e("div",{class:"canvas-container",style:F({width:S.value.width+"px",height:S.value.height+"px",transform:`scale(${c.value})`,transformOrigin:"top center",margin:"0 auto"})},[e("div",{class:"relative overflow-hidden bg-gray-50 dark:bg-gray-700 shadow-lg cursor-crosshair",style:F({width:y.form.width+"px",height:y.form.height+"px"}),onClick:d,onMousemove:U,onMouseup:n},[l.backgroundImagePreview?(g(),m("div",{key:0,class:"absolute inset-0 bg-cover bg-center bg-no-repeat z-0",style:F({backgroundImage:`url(${l.backgroundImagePreview})`,width:"100%",height:"100%"})},null,4)):E("",!0),!l.backgroundImagePreview&&l.canvasElements.length===0?(g(),m("div",ht,[e("div",yt,[e("div",vt,[$(P(ie),{class:"h-8 w-8 text-gray-400"})]),b[6]||(b[6]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},"Start Creating",-1)),b[7]||(b[7]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Select a tool and click on the canvas to add elements ",-1))])])):E("",!0),(g(!0),m(B,null,O(p.value,a=>(g(),m("div",{key:a.id,class:A(["absolute cursor-move select-none",l.selectedElement?.id===a.id?"ring-2 ring-blue-500":""]),style:F({left:a.x+"px",top:a.y+"px",width:a.width+"px",height:a.height+"px",transform:`rotate(${a.rotation}deg)`,zIndex:a.zIndex,filter:a.properties.boxShadow!=="none"?a.properties.boxShadow:"none",textShadow:a.properties.textShadow}),onMousedown:D=>x(D,a),onClick:ge(D=>t(a),["stop"])},[a.type==="text"?(g(),m("div",{key:0,class:"w-full h-full flex items-center justify-center text-center",style:F({fontSize:(a.properties.fontSize||16)+"px",fontFamily:a.properties.fontFamily||"Arial",fontWeight:a.properties.fontWeight||"normal",fontStyle:a.properties.fontStyle||"normal",textDecoration:a.properties.textDecoration||"none",textAlign:a.properties.textAlign||"left",lineHeight:String(a.properties.lineHeight||1.2),color:a.properties.color||"#000000"})},W(a.properties.text||"Text"),5)):a.type==="image"?(g(),m("div",{key:1,class:"w-full h-full flex items-center justify-center text-center",style:F({backgroundColor:a.properties.backgroundColor||"transparent",border:`${a.properties.borderWidth||0}px ${a.properties.borderStyle||"solid"} ${a.properties.borderColor||"#000000"}`,borderRadius:(a.properties.borderRadius||0)+"px",clipPath:V(a.properties.imageShape||"rectangle")})},[a.properties.imageUrl?(g(),m("img",{key:0,src:a.properties.imageUrl,alt:a.properties.text||"Image",class:"max-w-full max-h-full",style:F({objectFit:a.properties.imageFit||"cover"})},null,12,xt)):(g(),m("div",{key:1,class:"w-full h-full flex items-center justify-center text-blue-500 bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-blue-900/20 dark:to-indigo-900/20 border-2 border-dashed border-blue-300 dark:border-blue-600 rounded-lg cursor-pointer hover:from-blue-100 hover:to-indigo-200 dark:hover:from-blue-800/30 dark:hover:to-indigo-800/30 hover:border-blue-400 dark:hover:border-blue-500 transition-all duration-200",onClick:D=>o(a)},[...b[8]||(b[8]=[e("div",{class:"relative"},[e("svg",{class:"w-12 h-12 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})]),e("div",{class:"absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full animate-pulse"})],-1)])],8,ft))],4)):a.type==="rectangle"?(g(),m("div",{key:2,class:"w-full h-full",style:F({backgroundColor:a.properties.fillColor,border:a.properties.hasBorder?`${a.properties.strokeWidth}px ${a.properties.borderStyle} ${a.properties.strokeColor}`:"none",borderRadius:(a.properties.borderRadius||0)+"px"})},null,4)):a.type==="circle"?(g(),m("div",{key:3,class:"w-full h-full rounded-full",style:F({backgroundColor:a.properties.fillColor,border:a.properties.hasBorder?`${a.properties.strokeWidth}px ${a.properties.borderStyle} ${a.properties.strokeColor}`:"none"})},null,4)):a.type==="triangle"?(g(),m("div",{key:4,class:"w-full h-full",style:F({backgroundColor:a.properties.fillColor,border:a.properties.hasBorder?`${a.properties.strokeWidth}px ${a.properties.borderStyle} ${a.properties.strokeColor}`:"none",clipPath:"polygon(50% 0%, 0% 100%, 100% 100%)"})},null,4)):a.type==="star"?(g(),m("div",{key:5,class:"w-full h-full",style:F({backgroundColor:a.properties.fillColor,border:a.properties.hasBorder?`${a.properties.strokeWidth}px ${a.properties.borderStyle} ${a.properties.strokeColor}`:"none",clipPath:"polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)"})},null,4)):E("",!0),l.selectedElement?.id===a.id?(g(),m("div",{key:6,class:"absolute -bottom-1 -right-1 w-4 h-4 bg-blue-500 border-2 border-white rounded-full pointer-events-auto cursor-se-resize hover:bg-blue-600 transition-colors shadow-lg",onMousedown:D=>oe(D,a),title:"Resize (Shift+drag for proportional)"},null,40,wt)):E("",!0)],46,kt))),128))],36)],4)])])]),ve(l.$slots,"default")]))}}),Et={class:"bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm rounded-lg shadow-lg border border-gray-200/60 dark:border-gray-700/60"},Tt={class:"p-2"},St={class:"grid grid-cols-4 gap-1"},$t=["onClick","title"],It=N({__name:"ToolsPanel",props:{selectedTool:{}},emits:["update:selectedTool"],setup(R,{emit:w}){const y=w,k=[{id:"select",name:"Select",icon:De},{id:"text",name:"Text",icon:Fe},{id:"image",name:"Image",icon:ze},{id:"rectangle",name:"Rectangle",icon:Me},{id:"circle",name:"Circle",icon:Pe},{id:"triangle",name:"Triangle",icon:Oe},{id:"star",name:"Star",icon:Be}],u=C=>{y("update:selectedTool",C)};return(C,I)=>(g(),m("div",Et,[I[0]||(I[0]=e("div",{class:"p-2 border-b border-gray-200/60 dark:border-gray-700/60"},[e("h2",{class:"text-xs font-semibold text-gray-900 dark:text-white"},"Tools")],-1)),e("div",Tt,[e("div",St,[(g(),m(B,null,O(k,S=>e("button",{key:S.id,type:"button",onClick:c=>u(S.id),class:A(["flex items-center justify-center w-7 h-7 rounded-md transition-colors",C.selectedTool===S.id?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"]),title:S.name},[(g(),de(ke(S.icon),{class:"h-3.5 w-3.5"}))],10,$t)),64))])])]))}}),Ft={key:0,class:"bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm rounded-lg shadow-lg border border-gray-200/60 dark:border-gray-700/60"},zt={class:"p-3"},Pt={class:"mb-3"},Dt={class:"flex space-x-1 bg-gray-100 dark:bg-gray-700 rounded-md p-1"},Mt={class:"space-y-3"},Bt={key:0,class:"space-y-2"},Ot={key:0},Wt=["value"],_t={key:1},Qt={key:1,class:"space-y-2"},Rt={key:0,class:"space-y-2"},qt=["value"],At=["value"],Ut=["value"],Lt={class:"flex gap-1"},jt={class:"flex items-center gap-2"},Ht=["value"],Yt={class:"flex flex-wrap gap-1"},Nt=["onClick"],Xt={key:1,class:"space-y-2"},Vt=["value"],Kt=["value"],Gt={class:"space-y-2"},Zt={class:"flex gap-2"},Jt={class:"flex items-center"},er=["checked"],tr={class:"flex items-center"},rr=["checked"],or={key:0,class:"flex items-center gap-2"},ar=["value"],sr={class:"flex flex-wrap gap-1"},lr=["onClick"],nr={key:2},ir={class:"flex items-center gap-2"},dr=["value"],ur={class:"flex flex-wrap gap-1"},gr=["onClick"],cr={class:"flex items-center gap-2"},pr=["value"],mr={class:"flex flex-wrap gap-1"},br=["onClick"],hr={key:3},yr={class:"flex items-center gap-2 mb-2"},vr=["checked"],kr={key:0,class:"space-y-2"},xr={class:"grid grid-cols-2 gap-2"},fr=["value"],wr=["value"],Cr=["value"],Er=["value"],Tr=["value"],Sr=["value"],$r={key:2,class:"space-y-2"},Ir={class:"grid grid-cols-2 gap-2"},Fr=["value"],zr=["value"],Pr={class:"grid grid-cols-2 gap-2"},Dr=["value"],Mr=["value"],Br={class:"space-y-2"},Or={class:"grid grid-cols-2 gap-1"},Wr={class:"space-y-2"},_r=N({__name:"PropertiesPanel",props:{selectedElement:{}},emits:["updateElement","bringToFront","sendToBack","duplicateElement","deleteElement"],setup(R,{emit:w}){const y=R,k=w,u=T("content"),C=["Arial","Helvetica","Times New Roman","Georgia","Verdana","Courier New","Impact","Comic Sans MS","Trebuchet MS","Arial Black","Palatino","Garamond","Bookman","Avant Garde","Helvetica Neue","Roboto","Open Sans","Lato","Montserrat","Poppins","Source Sans Pro"],I=[{name:"None",value:"none"},{name:"Small",value:"drop-shadow(0 2px 4px rgba(0,0,0,0.1))"},{name:"Medium",value:"drop-shadow(0 4px 8px rgba(0,0,0,0.15))"},{name:"Large",value:"drop-shadow(0 8px 16px rgba(0,0,0,0.2))"},{name:"X-Large",value:"drop-shadow(0 12px 24px rgba(0,0,0,0.25))"},{name:"Glow",value:"drop-shadow(0 0 20px rgba(0,0,0,0.3))"}],S=[{name:"Solid",value:"solid"},{name:"Dashed",value:"dashed"},{name:"Dotted",value:"dotted"},{name:"Double",value:"double"},{name:"Groove",value:"groove"},{name:"Ridge",value:"ridge"},{name:"Inset",value:"inset"},{name:"Outset",value:"outset"}],c=[{name:"Rectangle",value:"rectangle"},{name:"Circle",value:"circle"},{name:"Triangle",value:"triangle"},{name:"Star",value:"star"},{name:"Diamond",value:"diamond"},{name:"Hexagon",value:"hexagon"},{name:"Octagon",value:"octagon"}],p=["#000000","#FFFFFF","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#FFA500","#800080","#FFC0CB","#A52A2A","#808080","#C0C0C0","#FFD700","#008000","#000080","#800000"],d=(n,t)=>{y.selectedElement&&k("updateElement",y.selectedElement.id,n,t)},x=n=>n.target?.value||"",U=n=>n.target?.checked||!1;return(n,t)=>n.selectedElement?(g(),m("div",Ft,[e("div",zt,[t[53]||(t[53]=e("h2",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-3"},"Properties",-1)),e("div",Pt,[e("div",Dt,[e("button",{type:"button",onClick:t[0]||(t[0]=o=>u.value="content"),class:A(["flex-1 px-2 py-1.5 text-xs font-medium rounded transition-colors",u.value==="content"?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"])}," Content ",2),e("button",{type:"button",onClick:t[1]||(t[1]=o=>u.value="style"),class:A(["flex-1 px-2 py-1.5 text-xs font-medium rounded transition-colors",u.value==="style"?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"])}," Style ",2),e("button",{type:"button",onClick:t[2]||(t[2]=o=>u.value="position"),class:A(["flex-1 px-2 py-1.5 text-xs font-medium rounded transition-colors",u.value==="position"?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"])}," Position ",2)])]),e("div",Mt,[u.value==="content"?(g(),m("div",Bt,[n.selectedElement.type==="text"?(g(),m("div",Ot,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Text Content ",-1)),e("textarea",{value:n.selectedElement.properties.text||"",onInput:t[3]||(t[3]=o=>d("text",x(o))),rows:"3",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors text-sm",placeholder:"Enter text content"},null,40,Wt)])):E("",!0),n.selectedElement.type==="image"&&n.selectedElement.properties.imageUrl?(g(),m("div",_t,[e("button",{onClick:t[4]||(t[4]=o=>d("imageUrl","")),type:"button",class:"w-full px-3 py-2 text-sm font-medium text-red-600 bg-red-50 border border-red-200 rounded-lg hover:bg-red-100 dark:bg-red-900/20 dark:border-red-800 dark:text-red-400 dark:hover:bg-red-900/30 transition-colors"}," Remove Image ")])):E("",!0)])):E("",!0),u.value==="style"?(g(),m("div",Qt,[n.selectedElement.type==="text"?(g(),m("div",Rt,[e("div",null,[t[31]||(t[31]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Font Size ",-1)),e("input",{value:n.selectedElement.properties.fontSize||16,onInput:t[5]||(t[5]=o=>d("fontSize",parseInt(x(o))||16)),type:"number",min:"8",max:"200",class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},null,40,qt)]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Font Family ",-1)),e("select",{value:n.selectedElement.properties.fontFamily||"Arial",onChange:t[6]||(t[6]=o=>d("fontFamily",x(o))),class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},[(g(),m(B,null,O(C,o=>e("option",{key:o,value:o},W(o),9,Ut)),64))],40,At)]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Font Style ",-1)),e("div",Lt,[e("button",{type:"button",onClick:t[7]||(t[7]=o=>d("fontWeight",n.selectedElement.properties.fontWeight==="bold"?"normal":"bold")),class:A(["px-2 py-1 text-xs rounded",n.selectedElement.properties.fontWeight==="bold"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"])}," Bold ",2),e("button",{type:"button",onClick:t[8]||(t[8]=o=>d("fontStyle",n.selectedElement.properties.fontStyle==="italic"?"normal":"italic")),class:A(["px-2 py-1 text-xs rounded",n.selectedElement.properties.fontStyle==="italic"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"])}," Italic ",2),e("button",{type:"button",onClick:t[9]||(t[9]=o=>d("textDecoration",n.selectedElement.properties.textDecoration==="underline"?"none":"underline")),class:A(["px-2 py-1 text-xs rounded",n.selectedElement.properties.textDecoration==="underline"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"])}," Underline ",2)])]),e("div",null,[t[34]||(t[34]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Text Color ",-1)),e("div",jt,[e("input",{value:n.selectedElement.properties.color||"#000000",onInput:t[10]||(t[10]=o=>d("color",x(o))),type:"color",class:"w-8 h-8 border border-gray-300 dark:border-gray-600 rounded cursor-pointer"},null,40,Ht),e("div",Yt,[(g(),m(B,null,O(p,o=>e("button",{key:o,type:"button",onClick:L=>d("color",o),style:F({backgroundColor:o}),class:"w-6 h-6 rounded border border-gray-300 dark:border-gray-600 hover:scale-110 transition-transform"},null,12,Nt)),64))])])])])):E("",!0),n.selectedElement.type==="image"?(g(),m("div",Xt,[e("div",null,[t[35]||(t[35]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Image Shape ",-1)),e("select",{value:n.selectedElement.properties.imageShape||"rectangle",onChange:t[11]||(t[11]=o=>d("imageShape",x(o))),class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},[(g(),m(B,null,O(c,o=>e("option",{key:o.value,value:o.value},W(o.name),9,Kt)),64))],40,Vt)]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Background ",-1)),e("div",Gt,[e("div",Zt,[e("label",Jt,[e("input",{type:"radio",checked:!n.selectedElement.properties.backgroundColor||n.selectedElement.properties.backgroundColor==="transparent",onChange:t[12]||(t[12]=o=>d("backgroundColor","transparent")),class:"mr-1"},null,40,er),t[36]||(t[36]=e("span",{class:"text-xs"},"Transparent",-1))]),e("label",tr,[e("input",{type:"radio",checked:n.selectedElement.properties.backgroundColor&&n.selectedElement.properties.backgroundColor!=="transparent",onChange:t[13]||(t[13]=o=>d("backgroundColor","#ffffff")),class:"mr-1"},null,40,rr),t[37]||(t[37]=e("span",{class:"text-xs"},"Background Color",-1))])]),n.selectedElement.properties.backgroundColor&&n.selectedElement.properties.backgroundColor!=="transparent"?(g(),m("div",or,[e("input",{value:n.selectedElement.properties.backgroundColor,onInput:t[14]||(t[14]=o=>d("backgroundColor",x(o))),type:"color",class:"w-8 h-8 border border-gray-300 dark:border-gray-600 rounded cursor-pointer"},null,40,ar),e("div",sr,[(g(),m(B,null,O(p,o=>e("button",{key:o,type:"button",onClick:L=>d("backgroundColor",o),style:F({backgroundColor:o}),class:"w-6 h-6 rounded border border-gray-300 dark:border-gray-600 hover:scale-110 transition-transform"},null,12,lr)),64))])])):E("",!0)])])])):E("",!0),["rectangle","circle","triangle","star"].includes(n.selectedElement.type)?(g(),m("div",nr,[t[39]||(t[39]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Fill Color ",-1)),e("div",ir,[e("input",{value:n.selectedElement.properties.fillColor||"#000000",onInput:t[15]||(t[15]=o=>d("fillColor",x(o))),type:"color",class:"w-8 h-8 border border-gray-300 dark:border-gray-600 rounded cursor-pointer"},null,40,dr),e("div",ur,[(g(),m(B,null,O(p,o=>e("button",{key:o,type:"button",onClick:L=>d("fillColor",o),style:F({backgroundColor:o}),class:"w-6 h-6 rounded border border-gray-300 dark:border-gray-600 hover:scale-110 transition-transform"},null,12,gr)),64))])])])):E("",!0),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Stroke Color ",-1)),e("div",cr,[e("input",{value:n.selectedElement.properties.strokeColor||"#000000",onInput:t[16]||(t[16]=o=>d("strokeColor",x(o))),type:"color",class:"w-8 h-8 border border-gray-300 dark:border-gray-600 rounded cursor-pointer"},null,40,pr),e("div",mr,[(g(),m(B,null,O(p,o=>e("button",{key:o,type:"button",onClick:L=>d("strokeColor",o),style:F({backgroundColor:o}),class:"w-6 h-6 rounded border border-gray-300 dark:border-gray-600 hover:scale-110 transition-transform"},null,12,br)),64))])])]),n.selectedElement.type!=="text"?(g(),m("div",hr,[e("div",yr,[e("input",{checked:n.selectedElement.properties.hasBorder||!1,onChange:t[17]||(t[17]=o=>d("hasBorder",U(o))),type:"checkbox",class:"rounded"},null,40,vr),t[41]||(t[41]=e("label",{class:"text-xs font-medium text-gray-500 dark:text-gray-400"}," Enable Border ",-1))]),n.selectedElement.properties.hasBorder?(g(),m("div",kr,[e("div",xr,[e("div",null,[t[42]||(t[42]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Width ",-1)),e("input",{value:n.selectedElement.properties.borderWidth||1,onInput:t[18]||(t[18]=o=>d("borderWidth",parseInt(x(o))||1)),type:"number",min:"1",max:"20",class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},null,40,fr)]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Style ",-1)),e("select",{value:n.selectedElement.properties.borderStyle||"solid",onChange:t[19]||(t[19]=o=>d("borderStyle",x(o))),class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},[(g(),m(B,null,O(S,o=>e("option",{key:o.value,value:o.value},W(o.name),9,Cr)),64))],40,wr)])]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Border Radius ",-1)),e("input",{value:n.selectedElement.properties.borderRadius||0,onInput:t[20]||(t[20]=o=>d("borderRadius",parseInt(x(o))||0)),type:"number",min:"0",max:"50",class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},null,40,Er)])])):E("",!0)])):E("",!0),e("div",null,[t[45]||(t[45]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Shadow ",-1)),e("select",{value:n.selectedElement.properties.boxShadow||"none",onChange:t[21]||(t[21]=o=>d("boxShadow",x(o))),class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},[(g(),m(B,null,O(I,o=>e("option",{key:o.value,value:o.value},W(o.name),9,Sr)),64))],40,Tr)])])):E("",!0),u.value==="position"?(g(),m("div",$r,[e("div",Ir,[e("div",null,[t[46]||(t[46]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," X Position ",-1)),e("input",{value:n.selectedElement.x,onInput:t[22]||(t[22]=o=>d("x",parseInt(x(o))||0)),type:"number",class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},null,40,Fr)]),e("div",null,[t[47]||(t[47]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Y Position ",-1)),e("input",{value:n.selectedElement.y,onInput:t[23]||(t[23]=o=>d("y",parseInt(x(o))||0)),type:"number",class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},null,40,zr)])]),e("div",Pr,[e("div",null,[t[48]||(t[48]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Width ",-1)),e("input",{value:n.selectedElement.width,onInput:t[24]||(t[24]=o=>d("width",parseFloat(x(o))||10)),type:"number",step:"0.5",min:"10",class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},null,40,Dr)]),e("div",null,[t[49]||(t[49]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Height ",-1)),e("input",{value:n.selectedElement.height,onInput:t[25]||(t[25]=o=>d("height",parseFloat(x(o))||10)),type:"number",step:"0.5",min:"10",class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},null,40,Mr)])]),e("div",Br,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Layer",-1)),e("div",Or,[e("button",{type:"button",onClick:t[26]||(t[26]=o=>k("bringToFront",n.selectedElement.id)),class:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"},[$(P(J),{class:"h-3 w-3 mx-auto"})]),e("button",{type:"button",onClick:t[27]||(t[27]=o=>k("sendToBack",n.selectedElement.id)),class:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"},[$(P(J),{class:"h-3 w-3 mx-auto rotate-180"})])])]),e("div",Wr,[e("button",{type:"button",onClick:t[28]||(t[28]=o=>k("duplicateElement",n.selectedElement.id)),class:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm"},[$(P(ce),{class:"h-4 w-4"}),t[51]||(t[51]=Z(" Duplicate ",-1))]),e("button",{type:"button",onClick:t[29]||(t[29]=o=>k("deleteElement",n.selectedElement.id)),class:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm"},[$(P(pe),{class:"h-4 w-4"}),t[52]||(t[52]=Z(" Delete Element ",-1))])])])):E("",!0)])])])):E("",!0)}}),Qr={class:"w-full px-2 sm:px-4 py-4"},Rr={class:"w-full"},qr={class:"flex flex-col xl:flex-row gap-4"},Ar={class:"flex-1 min-w-0"},Ur={class:"w-full xl:w-80 flex-shrink-0 space-y-4"},ao=N({__name:"Create",props:{template:{}},setup(R){const w=R;xe();const y=Y(()=>!!w.template),k=Y(()=>[{title:"Dashboard",href:$e().url},{title:"Templates",href:Te.index().url},{title:y.value?"Edit Template":"Create Template",href:"#"}]),u=T({name:"",width:800,height:600,background_image:null,canvas_data:[],quick_template:"Original Size"}),C=T(null),I=T({width:0,height:0});ue(()=>{if(t.value={name:"Original Size",width:0,height:0},y.value&&w.template){u.value.name=w.template.name,u.value.width=w.template.width,u.value.height=w.template.height,u.value.quick_template=w.template.quick_template||"Original Size";let r=w.template.canvas_data;if(typeof r=="string")try{r=JSON.parse(r)}catch{r=[]}if(o.value=Array.isArray(r)?r:[],w.template.background_image){C.value=`/storage/${w.template.background_image}`;const s=new Image;s.onload=()=>{I.value={width:s.naturalWidth,height:s.naturalHeight};const i=u.value.quick_template;if(i==="Original Size")t.value={name:"Original Size",width:s.naturalWidth,height:s.naturalHeight};else{const v=[{name:"Instagram Post",width:1080,height:1080},{name:"Instagram Story",width:1080,height:1920},{name:"Facebook Post",width:1200,height:630},{name:"Twitter Post",width:1200,height:675},{name:"LinkedIn Post",width:1200,height:627},{name:"YouTube Thumbnail",width:1280,height:720},{name:"Pinterest Pin",width:1e3,height:1500},{name:"TikTok Video",width:1080,height:1920},{name:"Custom Size",width:800,height:600}].find(M=>M.name===i);v?t.value=v:t.value={name:"Original Size",width:s.naturalWidth,height:s.naturalHeight}}},s.src=C.value}else{const s=u.value.quick_template;if(s&&s!=="Original Size"){const h=[{name:"Instagram Post",width:1080,height:1080},{name:"Instagram Story",width:1080,height:1920},{name:"Facebook Post",width:1200,height:630},{name:"Twitter Post",width:1200,height:675},{name:"LinkedIn Post",width:1200,height:627},{name:"YouTube Thumbnail",width:1280,height:720},{name:"Pinterest Pin",width:1e3,height:1500},{name:"TikTok Video",width:1080,height:1920},{name:"Custom Size",width:800,height:600}].find(v=>v.name===s);if(h)t.value=h;else{const v=S(w.template?.width||800,w.template?.height||600);t.value=v}}else{const i=S(w.template?.width||800,w.template?.height||600);t.value=i}}}});const S=(r,s)=>{const h=[{name:"Instagram Post",width:1080,height:1080},{name:"Instagram Story",width:1080,height:1920},{name:"Facebook Post",width:1200,height:630},{name:"Twitter Post",width:1200,height:675},{name:"LinkedIn Post",width:1200,height:627},{name:"YouTube Thumbnail",width:1280,height:720},{name:"Pinterest Pin",width:1e3,height:1500},{name:"TikTok Video",width:1080,height:1920}].find(v=>v.width===r&&v.height===s);return h||{name:"Custom Size",width:r,height:s}},c=T("select"),p=T(null),d=T(!1),x=T({x:0,y:0}),U=T(!1);T(!1),T(""),T({x:0,y:0,width:0,height:0,fontSize:0});const n=T(!1),t=T(null),o=T([]);fe(p,()=>{},{deep:!0});const L=(r,s,i)=>{const h=o.value.length>0?Math.max(...o.value.map(M=>M.zIndex)):0,v={id:Date.now().toString(),type:r,x:s,y:i,width:r==="text"?200:100,height:r==="text"?50:100,rotation:0,zIndex:h+1,properties:{text:r==="text"?"Sample Text":"",fontSize:r==="text"?16:void 0,fontFamily:r==="text"?"Arial":void 0,fontWeight:r==="text"?"normal":void 0,fontStyle:r==="text"?"normal":void 0,textDecoration:r==="text"?"none":void 0,textAlign:r==="text"?"left":void 0,lineHeight:r==="text"?1.2:void 0,color:r==="text"?"#000000":void 0,fillColor:r==="text"?"transparent":"#000000",strokeColor:"#000000",strokeWidth:1,hasBorder:!1,borderWidth:1,borderStyle:"solid",borderColor:"#000000",borderRadius:0,boxShadow:"none",textShadow:"none",imageUrl:r==="image"?"":void 0,imageFit:r==="image"?"cover":void 0,backgroundColor:r==="text"||r==="image"?"transparent":"#000000",imageShape:r==="image"?"rectangle":void 0}};o.value.push(v),p.value=v,c.value="select"},ee=r=>{p.value=r,c.value="select"},te=(r,s,i)=>{const h=o.value.findIndex(v=>v.id===r);if(h!==-1){const v=o.value[h];v.properties={...v.properties,[s]:i},o.value[h]={...v},p.value?.id===r&&(p.value={...v})}},re=r=>{if(c.value!=="select"){const s=r.target.getBoundingClientRect(),i=r.clientX-s.left,h=r.clientY-s.top;L(c.value,i,h)}},q=()=>{const r=document.querySelector(".template-preview-container");if(r){const s=r.getBoundingClientRect(),i=window.innerWidth<1024?400:600,h=window.innerWidth<1024?300:450,v=i/u.value.width,M=h/u.value.height,f=Math.min(v,M,1),se=u.value.width*f,me=u.value.height*f,be=s.width/se,he=s.height/me;return Math.min(be,he,1)*f}return 1},z=(r,s)=>{if(c.value==="select"){r.preventDefault(),d.value=!0;const i=q();x.value={x:r.clientX-s.x*i,y:r.clientY-s.y*i},p.value=s}},oe=r=>{if(d.value&&p.value){const s=q();p.value.x=(r.clientX-x.value.x)/s,p.value.y=(r.clientY-x.value.y)/s}},ae=r=>{d.value=!1},X=r=>{const s=o.value.find(i=>i.id===r);if(s){const i=Math.max(...o.value.map(h=>h.zIndex));s.zIndex=i+1}},V=r=>{const s=o.value.find(i=>i.id===r);if(s){const i=Math.min(...o.value.map(h=>h.zIndex));s.zIndex=i-1}},l=r=>{const s=o.value.find(i=>i.id===r);if(s){const i=Math.max(...o.value.map(v=>v.zIndex)),h={...s,id:Date.now().toString(),x:s.x+20,y:s.y+20,zIndex:i+1};o.value.push(h),p.value=h}},b=r=>{const s=o.value.findIndex(i=>i.id===r);s!==-1&&(o.value.splice(s,1),p.value?.id===r&&(p.value=null))},a=(r,s,i,h,v,M)=>{const f=o.value.find(se=>se.id===r);f&&(f.width=s,f.height=i,f.x=h,f.y=v,f.type==="text"&&M!==void 0&&(f.properties.fontSize=M),p.value?.id===r&&(p.value={...f}))},D=r=>{t.value=r,u.value.quick_template=r.name,r.name!=="Custom"&&r.name!=="Original Size"?(u.value.width=r.width,u.value.height=r.height):r.name==="Original Size"&&(I.value.width>0?(u.value.width=I.value.width,u.value.height=I.value.height):(u.value.width=r.width,u.value.height=r.height)),n.value=!1},_=r=>{if(console.log("Background image file selected:",r),console.log("File type:",r.type),console.log("File size:",r.size),console.log("File name:",r.name),!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(r.type)){console.error("Invalid file type:",r.type),Q.fire({title:"Invalid File Type",text:`Please select a valid image file. Detected type: ${r.type}. Supported types: JPEG, PNG, GIF, WebP`,icon:"error",confirmButtonText:"OK"});return}const i=10*1024*1024;if(r.size>i){Q.fire({title:"File Too Large",text:"Please select an image smaller than 10MB",icon:"error",confirmButtonText:"OK"});return}u.value.background_image=r;const h=new FileReader;h.onload=v=>{const M=v.target?.result;console.log("Background image preview created:",M?"Yes":"No"),C.value=M;const f=new Image;f.onload=()=>{console.log("Image loaded, dimensions:",f.naturalWidth,"x",f.naturalHeight),I.value={width:f.naturalWidth,height:f.naturalHeight},u.value.width=f.naturalWidth,u.value.height=f.naturalHeight,t.value={name:"Original Size",width:f.naturalWidth,height:f.naturalHeight}},f.onerror=()=>{console.error("Failed to load image"),Q.fire({title:"Invalid Image",text:"The selected file is not a valid image",icon:"error",confirmButtonText:"OK"})},f.src=M},h.onerror=()=>{console.error("Failed to read file"),Q.fire({title:"File Read Error",text:"Failed to read the selected file",icon:"error",confirmButtonText:"OK"})},h.readAsDataURL(r)},K=async()=>{if(u.value.width<100||u.value.height<100){Q.fire({title:"Invalid Dimensions",text:"Canvas dimensions must be at least 100x100 pixels",icon:"warning",confirmButtonText:"OK"});return}if(!u.value.name.trim()){Q.fire({title:"Missing Template Name",text:"Please enter a template name",icon:"warning",confirmButtonText:"OK"});return}U.value=!0;try{const r=new FormData;if(r.append("name",u.value.name),r.append("width",u.value.width.toString()),r.append("height",u.value.height.toString()),r.append("canvas_data",JSON.stringify(o.value)),r.append("quick_template",u.value.quick_template),u.value.background_image&&r.append("background_image",u.value.background_image),y.value){const s=await le.post(`/templates/${w.template?.id}`,r,{headers:{"Content-Type":"multipart/form-data"}});Q.fire({title:"Success!",text:"Template updated successfully.",icon:"success",position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,toast:!0}).then(()=>{ne.visit("/templates")})}else{const s=await le.post("/templates",r,{headers:{"Content-Type":"multipart/form-data"}});Q.fire({title:"Success!",text:"Template created successfully.",icon:"success",position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,toast:!0}).then(()=>{ne.visit("/templates")})}}catch(r){console.error("Error submitting form:",r);let s="An unexpected error occurred. Please try again.";if(r.response&&r.response.data&&r.response.data.message)s=r.response.data.message;else if(r.response&&r.response.data&&r.response.data.errors){const i=r.response.data.errors,h=Object.values(i)[0];Array.isArray(h)&&h.length>0&&(s=h[0])}Q.fire({title:"Error!",text:s,icon:"error",confirmButtonText:"OK"})}finally{U.value=!1}},G=r=>{r.target.closest(".quick-template-dropdown")||(n.value=!1)},H=r=>{r.key==="Escape"&&(n.value=!1)};return(r,s)=>(g(),m(B,null,[$(P(we),{title:y.value?"Edit Template":"Create Template"},null,8,["title"]),$(Se,{breadcrumbs:k.value},{default:Ce(()=>[e("div",{class:"min-h-screen bg-gray-50 dark:bg-gray-900",onClick:G,onKeydown:H},[e("div",Qr,[e("form",{onSubmit:ge(K,["prevent"]),class:"space-y-6"},[e("div",Rr,[$(et,{form:u.value,"onUpdate:form":s[0]||(s[0]=i=>u.value=i),backgroundImagePreview:C.value,"onUpdate:backgroundImagePreview":s[1]||(s[1]=i=>C.value=i),selectedQuickTemplate:t.value,"onUpdate:selectedQuickTemplate":s[2]||(s[2]=i=>t.value=i),isQuickTemplateDropdownOpen:n.value,"onUpdate:isQuickTemplateDropdownOpen":s[3]||(s[3]=i=>n.value=i),originalImageDimensions:I.value,"is-edit-mode":y.value,"is-submitting":U.value,onBackgroundImageChange:_,onApplyQuickTemplate:D},null,8,["form","backgroundImagePreview","selectedQuickTemplate","isQuickTemplateDropdownOpen","originalImageDimensions","is-edit-mode","is-submitting"])]),e("div",qr,[e("div",Ar,[$(Ct,{form:u.value,backgroundImagePreview:C.value,canvasElements:o.value,selectedElement:p.value,selectedTool:c.value,onCanvasClick:re,onElementMouseDown:z,onMouseMove:oe,onMouseUp:ae,onSelectElement:ee,onBringToFront:X,onSendToBack:V,onDuplicateElement:l,onDeleteElement:b,onResizeElement:a,onBackgroundImageChange:_},null,8,["form","backgroundImagePreview","canvasElements","selectedElement","selectedTool"])]),e("div",Ur,[$(It,{selectedTool:c.value,"onUpdate:selectedTool":s[4]||(s[4]=i=>c.value=i)},null,8,["selectedTool"]),$(_r,{selectedElement:p.value,onUpdateElement:te,onBringToFront:X,onSendToBack:V,onDuplicateElement:l,onDeleteElement:b},null,8,["selectedElement"])])])],32)])],32)]),_:1},8,["breadcrumbs"])],64))}});export{ao as default};
