import{d as K,a as p,o as c,f as e,g as S,b as I,k as ee,t as Q,e as O,F as W,r as A,i as me,p as T,q as pe,s as fe,c as V,v as we,n as M,x as he,y as L,z as Ce,u as Ee,A as de,h as Te,w as Se,B as ue,m as ge}from"./app-B_19Bpb-.js";import{t as $e,_ as Ie}from"./AppLayout.vue_vue_type_script_setup_true_lang-9Gh2VdAz.js";import{d as Fe}from"./index-DK8P9mNh.js";import{C as Me,I as ze}from"./x-Obp8ukFl.js";import{L as Pe}from"./loader-circle-CN1ClY6G.js";import{U as ce,T as De}from"./upload-DpYwhaHo.js";import{c as X}from"./createLucideIcon-B8wsB4w6.js";import{C as be}from"./copy-B3stWoqM.js";import{T as ve}from"./trash-2-Bou9gnoq.js";import{S as q}from"./sweetalert2.esm.all-Bj_ZQUAw.js";import"./useAssets-B93wgBvf.js";import"./useForwardExpose-e_3SQ-Ky.js";import"./VisuallyHidden-CCXr2no4.js";import"./RovingFocusGroup-W6ECXlFm.js";import"./useArrowNavigation-C6Y-ieo6.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=X("CircleIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=X("LayersIcon",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=X("MoveIcon",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=X("SquareIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=X("StarIcon",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=X("TriangleIcon",[["path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"14u9p9"}]]),Qe={class:"w-full"},Re={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700"},qe={class:"p-4"},Ue={class:"flex flex-wrap items-end gap-4"},Le={class:"flex-1 min-w-[200px]"},je=["value"],He={class:"flex-1 min-w-[200px]"},Ye={class:"relative quick-template-dropdown"},Ne={class:"flex items-center"},Xe={key:0,class:"text-xs text-gray-500 dark:text-gray-400 ml-2"},Ve={key:0,class:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg"},Ke=["onClick"],Ge={class:"font-medium"},Ze={class:"text-xs text-gray-500 dark:text-gray-400"},Je={class:"flex gap-2"},et=["value"],tt=["value"],rt=["disabled"],ot=K({__name:"TemplateSettings",props:{form:{},backgroundImagePreview:{},selectedQuickTemplate:{},isQuickTemplateDropdownOpen:{type:Boolean},originalImageDimensions:{},isEditMode:{type:Boolean},isSubmitting:{type:Boolean}},emits:["update:form","update:backgroundImagePreview","update:selectedQuickTemplate","update:isQuickTemplateDropdownOpen","backgroundImageChange","applyQuickTemplate"],setup(U,{emit:w}){const y=U,k=w,n=[{name:"Original Size",width:0,height:0},{name:"Instagram Post",width:1080,height:1080},{name:"Instagram Story",width:1080,height:1920},{name:"Facebook Post",width:1200,height:630},{name:"Custom Size",width:800,height:600}],E=(m,u)=>{if(m==="width"||m==="height"){const d=parseInt(u)||100,x=Math.max(100,Math.min(4e3,d));k("update:form",{...y.form,[m]:x})}else k("update:form",{...y.form,[m]:u})},F=m=>{k("applyQuickTemplate",m)},$=()=>{k("update:isQuickTemplateDropdownOpen",!y.isQuickTemplateDropdownOpen)};return(m,u)=>(c(),p("div",Qe,[e("div",Re,[u[7]||(u[7]=e("div",{class:"p-4 border-b border-gray-200 dark:border-gray-700"},[e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Template Settings")],-1)),e("div",qe,[e("div",Ue,[e("div",Le,[u[3]||(u[3]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Template Name * ",-1)),e("input",{value:m.form.name,onInput:u[0]||(u[0]=d=>E("name",d.target.value)),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors text-sm",placeholder:"Enter template name"},null,40,je)]),e("div",He,[u[4]||(u[4]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Quick Templates ",-1)),e("div",Ye,[e("button",{type:"button",onClick:$,class:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[e("span",Ne,[ee(Q(m.selectedQuickTemplate?m.selectedQuickTemplate.name:"Select a template...")+" ",1),m.selectedQuickTemplate?(c(),p("span",Xe," ("+Q(m.selectedQuickTemplate.name==="Original Size"&&m.originalImageDimensions.width>0?`${m.originalImageDimensions.width} × ${m.originalImageDimensions.height}px`:`${m.selectedQuickTemplate.width} × ${m.selectedQuickTemplate.height}px`)+") ",1)):S("",!0)]),I(O(Me),{class:"h-4 w-4 text-gray-400"})]),m.isQuickTemplateDropdownOpen?(c(),p("div",Ve,[(c(),p(W,null,A(n,d=>e("button",{key:d.name,type:"button",onClick:x=>F(d),class:"w-full px-3 py-2 text-left hover:bg-gray-100 dark:hover:bg-gray-600 text-sm first:rounded-t-lg last:rounded-b-lg"},[e("div",Ge,Q(d.name),1),e("div",Ze,Q(d.name==="Original Size"&&m.originalImageDimensions.width>0?`${m.originalImageDimensions.width} × ${m.originalImageDimensions.height}px`:d.name==="Original Size"?"No image uploaded":`${d.width} × ${d.height}px`),1)],8,Ke)),64))])):S("",!0)])]),e("div",Je,[e("div",null,[u[5]||(u[5]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Width ",-1)),e("input",{value:m.form.width,onInput:u[1]||(u[1]=d=>E("width",d.target.value)),type:"number",min:"100",max:"4000",step:"1",class:"w-20 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors text-sm"},null,40,et)]),e("div",null,[u[6]||(u[6]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Height ",-1)),e("input",{value:m.form.height,onInput:u[2]||(u[2]=d=>E("height",d.target.value)),type:"number",min:"100",max:"4000",step:"1",class:"w-20 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors text-sm"},null,40,tt)])]),e("div",null,[e("button",{type:"submit",disabled:!m.form.name||m.isSubmitting,class:"bg-blue-600 text-white py-2 px-6 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2"},[m.isSubmitting?(c(),me(O(Pe),{key:0,class:"h-4 w-4 animate-spin"})):S("",!0),e("span",null,Q(m.isSubmitting?m.isEditMode?"Updating...":"Creating...":m.isEditMode?"Update Template":"Create Template"),1)],8,rt)])])])])]))}}),at={class:"flex-1 min-w-0 relative"},lt={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 flex flex-col relative"},st={class:"px-4 py-2 border-b border-gray-200 dark:border-gray-700"},nt={class:"flex items-center justify-between"},it={class:"flex items-center gap-3"},dt={for:"background-upload",class:"cursor-pointer inline-flex items-center gap-2 px-3 py-1.5 text-xs font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"},ut={key:0,class:"flex items-center gap-2"},gt=["src"],ct={class:"flex items-center gap-1"},mt=["disabled"],pt=["disabled"],ht=["disabled"],bt=["disabled"],vt={class:"p-2 sm:p-4 flex justify-start items-start min-h-[300px] sm:min-h-[400px]"},yt={class:"relative w-full max-w-full overflow-hidden flex justify-start",style:{margin:"10px 0"}},kt={key:1,class:"flex h-full w-full items-center justify-center"},xt={class:"text-center"},ft={class:"mx-auto h-16 w-16 bg-gray-100 dark:bg-gray-600 rounded-full flex items-center justify-center mb-4"},wt=["onMousedown","onClick"],Ct=["src","alt"],Et=["onClick"],Tt=["onMousedown"],St=K({__name:"CanvasEditor",props:{form:{},backgroundImagePreview:{},canvasElements:{},selectedElement:{},selectedTool:{}},emits:["canvasClick","elementMouseDown","mouseMove","mouseUp","selectElement","bringToFront","sendToBack","duplicateElement","deleteElement","resizeElement","backgroundImageChange"],setup(U,{emit:w}){const y=U,k=w,n=s=>{const a=s.target.files?.[0];a&&k("backgroundImageChange",a)},E=T(typeof window<"u"?window.innerWidth:1024),F=()=>{E.value=window.innerWidth};pe(()=>{window.addEventListener("resize",F)}),fe(()=>{window.removeEventListener("resize",F)});const $=V(()=>{const s=E.value<1024?400:600,h=E.value<1024?300:450,a=s/y.form.width,D=h/y.form.height,R=Math.min(a,D,1);return{width:y.form.width*R,height:y.form.height*R,scale:R}}),m=V(()=>$.value.scale),u=V(()=>[...y.canvasElements].sort((s,h)=>s.zIndex-h.zIndex)),d=s=>{k("canvasClick",s)},x=(s,h)=>{k("elementMouseDown",s,h)},j=s=>{H.value?ae(s):k("mouseMove",s)},i=s=>{H.value?le():k("mouseUp",s)},t=s=>{k("selectElement",s)},o=s=>{t(s)},_=s=>{k("bringToFront",s)},P=s=>{k("sendToBack",s)},C=s=>{k("duplicateElement",s)},re=s=>{k("deleteElement",s)},H=T(!1),z=T({x:0,y:0,width:0,height:0,elementX:0,elementY:0,originalFontSize:0}),oe=(s,h)=>{s.preventDefault(),s.stopPropagation(),H.value=!0,z.value={x:s.clientX,y:s.clientY,width:h.width,height:h.height,elementX:h.x,elementY:h.y,originalFontSize:h.properties.fontSize||16},y.selectedElement?.id!==h.id&&t(h)},ae=s=>{if(!H.value||!y.selectedElement)return;const h=s.clientX-z.value.x,a=s.clientY-z.value.y,D=$.value.scale,R=h/D,G=a/D;let Z=Math.max(20,z.value.width+R),Y=Math.max(20,z.value.height+G);if(s.shiftKey){z.value.width/z.value.height;const N=Math.max(R,G);Z=Math.max(20,z.value.width+N),Y=Math.max(20,z.value.height+N)}let J=z.value.originalFontSize;if(y.selectedElement.type==="text"){const N=Y/z.value.height;J=Math.max(8,Math.round(z.value.originalFontSize*N))}k("resizeElement",y.selectedElement.id,Z,Y,y.selectedElement.x,y.selectedElement.y,J)},le=()=>{H.value=!1},se=s=>{switch(s){case"circle":return"circle(50% at 50% 50%)";case"triangle":return"polygon(50% 0%, 0% 100%, 100% 100%)";case"star":return"polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)";case"diamond":return"polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%)";case"hexagon":return"polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%)";case"octagon":return"polygon(30% 0%, 70% 0%, 100% 30%, 100% 70%, 70% 100%, 30% 100%, 0% 70%, 0% 30%)";case"rectangle":default:return"none"}};return(s,h)=>(c(),p("div",at,[e("div",lt,[h[9]||(h[9]=e("div",{class:"pt-5 px-4 pb-2 border-b border-gray-200 dark:border-gray-700"},[e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Template Editor")],-1)),e("div",st,[e("div",nt,[e("div",it,[e("input",{type:"file",accept:"image/*",onChange:n,class:"hidden",id:"background-upload"},null,32),e("label",dt,[I(O(ce),{class:"h-3 w-3"}),h[4]||(h[4]=ee(" Background ",-1))]),s.backgroundImagePreview?(c(),p("div",ut,[e("img",{src:s.backgroundImagePreview,alt:"Background preview",class:"h-6 w-6 object-cover rounded"},null,8,gt),h[5]||(h[5]=e("span",{class:"text-xs text-gray-500 dark:text-gray-400"},"Background set",-1))])):S("",!0)]),e("div",ct,[e("button",{type:"button",onClick:h[0]||(h[0]=a=>s.selectedElement&&_(s.selectedElement.id)),disabled:!s.selectedElement,title:"Bring to Front",class:"p-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[I(O(te),{class:"h-4 w-4"})],8,mt),e("button",{type:"button",onClick:h[1]||(h[1]=a=>s.selectedElement&&P(s.selectedElement.id)),disabled:!s.selectedElement,title:"Send to Back",class:"p-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[I(O(te),{class:"h-4 w-4 rotate-180"})],8,pt),e("button",{type:"button",onClick:h[2]||(h[2]=a=>s.selectedElement&&C(s.selectedElement.id)),disabled:!s.selectedElement,title:"Duplicate",class:"p-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[I(O(be),{class:"h-4 w-4"})],8,ht),e("button",{type:"button",onClick:h[3]||(h[3]=a=>s.selectedElement&&re(s.selectedElement.id)),disabled:!s.selectedElement,title:"Delete",class:"p-2 text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/30 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[I(O(ve),{class:"h-4 w-4"})],8,bt)])])]),e("div",vt,[e("div",yt,[e("div",{class:"canvas-container",style:M({width:$.value.width+"px",height:$.value.height+"px",transform:`scale(${m.value})`,transformOrigin:"top left",margin:"0"})},[e("div",{class:"relative overflow-hidden bg-gray-50 dark:bg-gray-700 shadow-lg cursor-crosshair",style:M({width:y.form.width+"px",height:y.form.height+"px"}),onClick:d,onMousemove:j,onMouseup:i},[s.backgroundImagePreview?(c(),p("div",{key:0,class:"absolute inset-0 bg-cover bg-center bg-no-repeat z-0",style:M({backgroundImage:`url(${s.backgroundImagePreview})`,width:"100%",height:"100%"})},null,4)):S("",!0),!s.backgroundImagePreview&&s.canvasElements.length===0?(c(),p("div",kt,[e("div",xt,[e("div",ft,[I(O(ce),{class:"h-8 w-8 text-gray-400"})]),h[6]||(h[6]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},"Start Creating",-1)),h[7]||(h[7]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Select a tool and click on the canvas to add elements ",-1))])])):S("",!0),(c(!0),p(W,null,A(u.value,a=>(c(),p("div",{key:a.id,class:L(["absolute cursor-move select-none",s.selectedElement?.id===a.id?"ring-2 ring-blue-500":""]),style:M({left:a.x+"px",top:a.y+"px",width:a.width+"px",height:a.height+"px",transform:`rotate(${a.rotation}deg)`,zIndex:a.zIndex,filter:a.properties.boxShadow!=="none"?a.properties.boxShadow:"none",textShadow:a.properties.textShadow}),onMousedown:D=>x(D,a),onClick:he(D=>t(a),["stop"])},[a.type==="text"?(c(),p("div",{key:0,class:"w-full h-full flex items-center justify-center text-center",style:M({fontSize:(a.properties.fontSize||16)+"px",fontFamily:a.properties.fontFamily||"Arial",fontWeight:a.properties.fontWeight||"normal",fontStyle:a.properties.fontStyle||"normal",textDecoration:a.properties.textDecoration||"none",textAlign:a.properties.textAlign||"left",lineHeight:String(a.properties.lineHeight||1.2),color:a.properties.color||"#000000"})},Q(a.properties.text||"Text"),5)):a.type==="image"?(c(),p("div",{key:1,class:"w-full h-full flex items-center justify-center text-center",style:M({backgroundColor:a.properties.backgroundColor||"transparent",border:`${a.properties.borderWidth||0}px ${a.properties.borderStyle||"solid"} ${a.properties.borderColor||"#000000"}`,borderRadius:(a.properties.borderRadius||0)+"px",clipPath:se(a.properties.imageShape||"rectangle")})},[a.properties.imageUrl?(c(),p("img",{key:0,src:a.properties.imageUrl,alt:a.properties.text||"Image",class:"max-w-full max-h-full",style:M({objectFit:a.properties.imageFit||"cover"})},null,12,Ct)):(c(),p("div",{key:1,class:"w-full h-full flex items-center justify-center text-blue-500 bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-blue-900/20 dark:to-indigo-900/20 border-2 border-dashed border-blue-300 dark:border-blue-600 rounded-lg cursor-pointer hover:from-blue-100 hover:to-indigo-200 dark:hover:from-blue-800/30 dark:hover:to-indigo-800/30 hover:border-blue-400 dark:hover:border-blue-500 transition-all duration-200",onClick:D=>o(a)},[...h[8]||(h[8]=[e("div",{class:"relative"},[e("svg",{class:"w-12 h-12 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})]),e("div",{class:"absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full animate-pulse"})],-1)])],8,Et))],4)):a.type==="rectangle"?(c(),p("div",{key:2,class:"w-full h-full",style:M({backgroundColor:a.properties.fillColor,border:a.properties.hasBorder?`${a.properties.strokeWidth}px ${a.properties.borderStyle} ${a.properties.strokeColor}`:"none",borderRadius:(a.properties.borderRadius||0)+"px"})},null,4)):a.type==="circle"?(c(),p("div",{key:3,class:"w-full h-full rounded-full",style:M({backgroundColor:a.properties.fillColor,border:a.properties.hasBorder?`${a.properties.strokeWidth}px ${a.properties.borderStyle} ${a.properties.strokeColor}`:"none"})},null,4)):a.type==="triangle"?(c(),p("div",{key:4,class:"w-full h-full",style:M({backgroundColor:a.properties.fillColor,border:a.properties.hasBorder?`${a.properties.strokeWidth}px ${a.properties.borderStyle} ${a.properties.strokeColor}`:"none",clipPath:"polygon(50% 0%, 0% 100%, 100% 100%)"})},null,4)):a.type==="star"?(c(),p("div",{key:5,class:"w-full h-full",style:M({backgroundColor:a.properties.fillColor,border:a.properties.hasBorder?`${a.properties.strokeWidth}px ${a.properties.borderStyle} ${a.properties.strokeColor}`:"none",clipPath:"polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)"})},null,4)):S("",!0),s.selectedElement?.id===a.id?(c(),p("div",{key:6,class:"absolute -bottom-1 -right-1 w-4 h-4 bg-blue-500 border-2 border-white rounded-full pointer-events-auto cursor-se-resize hover:bg-blue-600 transition-colors shadow-lg",onMousedown:D=>oe(D,a),title:"Resize (Shift+drag for proportional)"},null,40,Tt)):S("",!0)],46,wt))),128))],36)],4)])])]),we(s.$slots,"default")]))}}),$t={class:"bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm rounded-lg shadow-lg border border-gray-200/60 dark:border-gray-700/60"},It={class:"p-2"},Ft={class:"grid grid-cols-4 gap-1"},Mt=["onClick","title"],zt=K({__name:"ToolsPanel",props:{selectedTool:{}},emits:["update:selectedTool"],setup(U,{emit:w}){const y=w,k=[{id:"select",name:"Select",icon:Oe},{id:"text",name:"Text",icon:De},{id:"image",name:"Image",icon:ze},{id:"rectangle",name:"Rectangle",icon:We},{id:"circle",name:"Circle",icon:Be},{id:"triangle",name:"Triangle",icon:Ae},{id:"star",name:"Star",icon:_e}],n=E=>{y("update:selectedTool",E)};return(E,F)=>(c(),p("div",$t,[F[0]||(F[0]=e("div",{class:"p-2 border-b border-gray-200/60 dark:border-gray-700/60"},[e("h2",{class:"text-xs font-semibold text-gray-900 dark:text-white"},"Tools")],-1)),e("div",It,[e("div",Ft,[(c(),p(W,null,A(k,$=>e("button",{key:$.id,type:"button",onClick:m=>n($.id),class:L(["flex items-center justify-center w-7 h-7 rounded-md transition-colors",E.selectedTool===$.id?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"]),title:$.name},[(c(),me(Ce($.icon),{class:"h-3.5 w-3.5"}))],10,Mt)),64))])])]))}}),Pt={key:0,class:"bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm rounded-lg shadow-lg border border-gray-200/60 dark:border-gray-700/60"},Dt={class:"p-3"},Bt={class:"mb-3"},Ot={class:"flex space-x-1 bg-gray-100 dark:bg-gray-700 rounded-md p-1"},Wt={class:"space-y-3"},_t={key:0,class:"space-y-2"},At={key:0},Qt=["value"],Rt={key:1},qt={key:1,class:"space-y-2"},Ut={key:0,class:"space-y-2"},Lt=["value"],jt=["value"],Ht=["value"],Yt={class:"flex gap-1"},Nt={class:"flex items-center gap-2"},Xt=["value"],Vt={class:"flex flex-wrap gap-1"},Kt=["onClick"],Gt={key:1,class:"space-y-2"},Zt=["value"],Jt=["value"],er={class:"space-y-2"},tr={class:"flex gap-2"},rr={class:"flex items-center"},or=["checked"],ar={class:"flex items-center"},lr=["checked"],sr={key:0,class:"flex items-center gap-2"},nr=["value"],ir={class:"flex flex-wrap gap-1"},dr=["onClick"],ur={key:2},gr={class:"flex items-center gap-2"},cr=["value"],mr={class:"flex flex-wrap gap-1"},pr=["onClick"],hr={class:"flex items-center gap-2"},br=["value"],vr={class:"flex flex-wrap gap-1"},yr=["onClick"],kr={key:3},xr={class:"flex items-center gap-2 mb-2"},fr=["checked"],wr={key:0,class:"space-y-2"},Cr={class:"grid grid-cols-2 gap-2"},Er=["value"],Tr=["value"],Sr=["value"],$r=["value"],Ir=["value"],Fr=["value"],Mr={key:2,class:"space-y-2"},zr={class:"grid grid-cols-2 gap-2"},Pr=["value"],Dr=["value"],Br={class:"grid grid-cols-2 gap-2"},Or=["value"],Wr=["value"],_r={class:"space-y-2"},Ar={class:"grid grid-cols-2 gap-1"},Qr={class:"space-y-2"},Rr=K({__name:"PropertiesPanel",props:{selectedElement:{}},emits:["updateElement","bringToFront","sendToBack","duplicateElement","deleteElement"],setup(U,{emit:w}){const y=U,k=w,n=T("content"),E=["Arial","Helvetica","Times New Roman","Georgia","Verdana","Courier New","Impact","Comic Sans MS","Trebuchet MS","Arial Black","Palatino","Garamond","Bookman","Avant Garde","Helvetica Neue","Roboto","Open Sans","Lato","Montserrat","Poppins","Source Sans Pro"],F=[{name:"None",value:"none"},{name:"Small",value:"drop-shadow(0 2px 4px rgba(0,0,0,0.1))"},{name:"Medium",value:"drop-shadow(0 4px 8px rgba(0,0,0,0.15))"},{name:"Large",value:"drop-shadow(0 8px 16px rgba(0,0,0,0.2))"},{name:"X-Large",value:"drop-shadow(0 12px 24px rgba(0,0,0,0.25))"},{name:"Glow",value:"drop-shadow(0 0 20px rgba(0,0,0,0.3))"}],$=[{name:"Solid",value:"solid"},{name:"Dashed",value:"dashed"},{name:"Dotted",value:"dotted"},{name:"Double",value:"double"},{name:"Groove",value:"groove"},{name:"Ridge",value:"ridge"},{name:"Inset",value:"inset"},{name:"Outset",value:"outset"}],m=[{name:"Rectangle",value:"rectangle"},{name:"Circle",value:"circle"},{name:"Triangle",value:"triangle"},{name:"Star",value:"star"},{name:"Diamond",value:"diamond"},{name:"Hexagon",value:"hexagon"},{name:"Octagon",value:"octagon"}],u=["#000000","#FFFFFF","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#FFA500","#800080","#FFC0CB","#A52A2A","#808080","#C0C0C0","#FFD700","#008000","#000080","#800000"],d=(i,t)=>{y.selectedElement&&k("updateElement",y.selectedElement.id,i,t)},x=i=>i.target?.value||"",j=i=>i.target?.checked||!1;return(i,t)=>i.selectedElement?(c(),p("div",Pt,[e("div",Dt,[t[53]||(t[53]=e("h2",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-3"},"Properties",-1)),e("div",Bt,[e("div",Ot,[e("button",{type:"button",onClick:t[0]||(t[0]=o=>n.value="content"),class:L(["flex-1 px-2 py-1.5 text-xs font-medium rounded transition-colors",n.value==="content"?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"])}," Content ",2),e("button",{type:"button",onClick:t[1]||(t[1]=o=>n.value="style"),class:L(["flex-1 px-2 py-1.5 text-xs font-medium rounded transition-colors",n.value==="style"?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"])}," Style ",2),e("button",{type:"button",onClick:t[2]||(t[2]=o=>n.value="position"),class:L(["flex-1 px-2 py-1.5 text-xs font-medium rounded transition-colors",n.value==="position"?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"])}," Position ",2)])]),e("div",Wt,[n.value==="content"?(c(),p("div",_t,[i.selectedElement.type==="text"?(c(),p("div",At,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Text Content ",-1)),e("textarea",{value:i.selectedElement.properties.text||"",onInput:t[3]||(t[3]=o=>d("text",x(o))),rows:"3",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors text-sm",placeholder:"Enter text content"},null,40,Qt)])):S("",!0),i.selectedElement.type==="image"&&i.selectedElement.properties.imageUrl?(c(),p("div",Rt,[e("button",{onClick:t[4]||(t[4]=o=>d("imageUrl","")),type:"button",class:"w-full px-3 py-2 text-sm font-medium text-red-600 bg-red-50 border border-red-200 rounded-lg hover:bg-red-100 dark:bg-red-900/20 dark:border-red-800 dark:text-red-400 dark:hover:bg-red-900/30 transition-colors"}," Remove Image ")])):S("",!0)])):S("",!0),n.value==="style"?(c(),p("div",qt,[i.selectedElement.type==="text"?(c(),p("div",Ut,[e("div",null,[t[31]||(t[31]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Font Size ",-1)),e("input",{value:i.selectedElement.properties.fontSize||16,onInput:t[5]||(t[5]=o=>d("fontSize",parseInt(x(o))||16)),type:"number",min:"8",max:"200",class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},null,40,Lt)]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Font Family ",-1)),e("select",{value:i.selectedElement.properties.fontFamily||"Arial",onChange:t[6]||(t[6]=o=>d("fontFamily",x(o))),class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},[(c(),p(W,null,A(E,o=>e("option",{key:o,value:o},Q(o),9,Ht)),64))],40,jt)]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Font Style ",-1)),e("div",Yt,[e("button",{type:"button",onClick:t[7]||(t[7]=o=>d("fontWeight",i.selectedElement.properties.fontWeight==="bold"?"normal":"bold")),class:L(["px-2 py-1 text-xs rounded",i.selectedElement.properties.fontWeight==="bold"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"])}," Bold ",2),e("button",{type:"button",onClick:t[8]||(t[8]=o=>d("fontStyle",i.selectedElement.properties.fontStyle==="italic"?"normal":"italic")),class:L(["px-2 py-1 text-xs rounded",i.selectedElement.properties.fontStyle==="italic"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"])}," Italic ",2),e("button",{type:"button",onClick:t[9]||(t[9]=o=>d("textDecoration",i.selectedElement.properties.textDecoration==="underline"?"none":"underline")),class:L(["px-2 py-1 text-xs rounded",i.selectedElement.properties.textDecoration==="underline"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"])}," Underline ",2)])]),e("div",null,[t[34]||(t[34]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Text Color ",-1)),e("div",Nt,[e("input",{value:i.selectedElement.properties.color||"#000000",onInput:t[10]||(t[10]=o=>d("color",x(o))),type:"color",class:"w-8 h-8 border border-gray-300 dark:border-gray-600 rounded cursor-pointer"},null,40,Xt),e("div",Vt,[(c(),p(W,null,A(u,o=>e("button",{key:o,type:"button",onClick:_=>d("color",o),style:M({backgroundColor:o}),class:"w-6 h-6 rounded border border-gray-300 dark:border-gray-600 hover:scale-110 transition-transform"},null,12,Kt)),64))])])])])):S("",!0),i.selectedElement.type==="image"?(c(),p("div",Gt,[e("div",null,[t[35]||(t[35]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Image Shape ",-1)),e("select",{value:i.selectedElement.properties.imageShape||"rectangle",onChange:t[11]||(t[11]=o=>d("imageShape",x(o))),class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},[(c(),p(W,null,A(m,o=>e("option",{key:o.value,value:o.value},Q(o.name),9,Jt)),64))],40,Zt)]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Background ",-1)),e("div",er,[e("div",tr,[e("label",rr,[e("input",{type:"radio",checked:!i.selectedElement.properties.backgroundColor||i.selectedElement.properties.backgroundColor==="transparent",onChange:t[12]||(t[12]=o=>d("backgroundColor","transparent")),class:"mr-1"},null,40,or),t[36]||(t[36]=e("span",{class:"text-xs"},"Transparent",-1))]),e("label",ar,[e("input",{type:"radio",checked:i.selectedElement.properties.backgroundColor&&i.selectedElement.properties.backgroundColor!=="transparent",onChange:t[13]||(t[13]=o=>d("backgroundColor","#ffffff")),class:"mr-1"},null,40,lr),t[37]||(t[37]=e("span",{class:"text-xs"},"Background Color",-1))])]),i.selectedElement.properties.backgroundColor&&i.selectedElement.properties.backgroundColor!=="transparent"?(c(),p("div",sr,[e("input",{value:i.selectedElement.properties.backgroundColor,onInput:t[14]||(t[14]=o=>d("backgroundColor",x(o))),type:"color",class:"w-8 h-8 border border-gray-300 dark:border-gray-600 rounded cursor-pointer"},null,40,nr),e("div",ir,[(c(),p(W,null,A(u,o=>e("button",{key:o,type:"button",onClick:_=>d("backgroundColor",o),style:M({backgroundColor:o}),class:"w-6 h-6 rounded border border-gray-300 dark:border-gray-600 hover:scale-110 transition-transform"},null,12,dr)),64))])])):S("",!0)])])])):S("",!0),["rectangle","circle","triangle","star"].includes(i.selectedElement.type)?(c(),p("div",ur,[t[39]||(t[39]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Fill Color ",-1)),e("div",gr,[e("input",{value:i.selectedElement.properties.fillColor||"#000000",onInput:t[15]||(t[15]=o=>d("fillColor",x(o))),type:"color",class:"w-8 h-8 border border-gray-300 dark:border-gray-600 rounded cursor-pointer"},null,40,cr),e("div",mr,[(c(),p(W,null,A(u,o=>e("button",{key:o,type:"button",onClick:_=>d("fillColor",o),style:M({backgroundColor:o}),class:"w-6 h-6 rounded border border-gray-300 dark:border-gray-600 hover:scale-110 transition-transform"},null,12,pr)),64))])])])):S("",!0),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Stroke Color ",-1)),e("div",hr,[e("input",{value:i.selectedElement.properties.strokeColor||"#000000",onInput:t[16]||(t[16]=o=>d("strokeColor",x(o))),type:"color",class:"w-8 h-8 border border-gray-300 dark:border-gray-600 rounded cursor-pointer"},null,40,br),e("div",vr,[(c(),p(W,null,A(u,o=>e("button",{key:o,type:"button",onClick:_=>d("strokeColor",o),style:M({backgroundColor:o}),class:"w-6 h-6 rounded border border-gray-300 dark:border-gray-600 hover:scale-110 transition-transform"},null,12,yr)),64))])])]),i.selectedElement.type!=="text"?(c(),p("div",kr,[e("div",xr,[e("input",{checked:i.selectedElement.properties.hasBorder||!1,onChange:t[17]||(t[17]=o=>d("hasBorder",j(o))),type:"checkbox",class:"rounded"},null,40,fr),t[41]||(t[41]=e("label",{class:"text-xs font-medium text-gray-500 dark:text-gray-400"}," Enable Border ",-1))]),i.selectedElement.properties.hasBorder?(c(),p("div",wr,[e("div",Cr,[e("div",null,[t[42]||(t[42]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Width ",-1)),e("input",{value:i.selectedElement.properties.borderWidth||1,onInput:t[18]||(t[18]=o=>d("borderWidth",parseInt(x(o))||1)),type:"number",min:"1",max:"20",class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},null,40,Er)]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Style ",-1)),e("select",{value:i.selectedElement.properties.borderStyle||"solid",onChange:t[19]||(t[19]=o=>d("borderStyle",x(o))),class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},[(c(),p(W,null,A($,o=>e("option",{key:o.value,value:o.value},Q(o.name),9,Sr)),64))],40,Tr)])]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Border Radius ",-1)),e("input",{value:i.selectedElement.properties.borderRadius||0,onInput:t[20]||(t[20]=o=>d("borderRadius",parseInt(x(o))||0)),type:"number",min:"0",max:"50",class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},null,40,$r)])])):S("",!0)])):S("",!0),e("div",null,[t[45]||(t[45]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Shadow ",-1)),e("select",{value:i.selectedElement.properties.boxShadow||"none",onChange:t[21]||(t[21]=o=>d("boxShadow",x(o))),class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},[(c(),p(W,null,A(F,o=>e("option",{key:o.value,value:o.value},Q(o.name),9,Fr)),64))],40,Ir)])])):S("",!0),n.value==="position"?(c(),p("div",Mr,[e("div",zr,[e("div",null,[t[46]||(t[46]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," X Position ",-1)),e("input",{value:i.selectedElement.x,onInput:t[22]||(t[22]=o=>d("x",parseInt(x(o))||0)),type:"number",class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},null,40,Pr)]),e("div",null,[t[47]||(t[47]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Y Position ",-1)),e("input",{value:i.selectedElement.y,onInput:t[23]||(t[23]=o=>d("y",parseInt(x(o))||0)),type:"number",class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},null,40,Dr)])]),e("div",Br,[e("div",null,[t[48]||(t[48]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Width ",-1)),e("input",{value:i.selectedElement.width,onInput:t[24]||(t[24]=o=>d("width",parseFloat(x(o))||10)),type:"number",step:"0.5",min:"10",class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},null,40,Or)]),e("div",null,[t[49]||(t[49]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Height ",-1)),e("input",{value:i.selectedElement.height,onInput:t[25]||(t[25]=o=>d("height",parseFloat(x(o))||10)),type:"number",step:"0.5",min:"10",class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},null,40,Wr)])]),e("div",_r,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Layer",-1)),e("div",Ar,[e("button",{type:"button",onClick:t[26]||(t[26]=o=>k("bringToFront",i.selectedElement.id)),class:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"},[I(O(te),{class:"h-3 w-3 mx-auto"})]),e("button",{type:"button",onClick:t[27]||(t[27]=o=>k("sendToBack",i.selectedElement.id)),class:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"},[I(O(te),{class:"h-3 w-3 mx-auto rotate-180"})])])]),e("div",Qr,[e("button",{type:"button",onClick:t[28]||(t[28]=o=>k("duplicateElement",i.selectedElement.id)),class:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm"},[I(O(be),{class:"h-4 w-4"}),t[51]||(t[51]=ee(" Duplicate ",-1))]),e("button",{type:"button",onClick:t[29]||(t[29]=o=>k("deleteElement",i.selectedElement.id)),class:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm"},[I(O(ve),{class:"h-4 w-4"}),t[52]||(t[52]=ee(" Delete Element ",-1))])])])):S("",!0)])])])):S("",!0)}}),qr={class:"w-full px-2 sm:px-4 py-4"},Ur={class:"w-full"},Lr={class:"flex flex-col xl:flex-row gap-4"},jr={class:"flex-1 min-w-0"},Hr={class:"w-full xl:w-80 flex-shrink-0 space-y-4"},no=K({__name:"Create",props:{template:{}},setup(U){const w=U;Ee();const y=V(()=>!!w.template),k=V(()=>[{title:"Dashboard",href:Fe().url},{title:"Templates",href:$e.index().url},{title:y.value?"Edit Template":"Create Template",href:"#"}]),n=T({name:"",width:800,height:600,background_image:null,canvas_data:[],quick_template:"Original Size"}),E=T(null),F=T({width:0,height:0});pe(()=>{if(P.value={name:"Original Size",width:0,height:0},y.value&&w.template){n.value.name=w.template.name,n.value.width=w.template.width,n.value.height=w.template.height,n.value.quick_template=w.template.quick_template||"Original Size";let r=w.template.canvas_data;if(typeof r=="string")try{r=JSON.parse(r)}catch{r=[]}if(C.value=Array.isArray(r)?r:[],w.template.background_image){E.value=`/storage/${w.template.background_image}`;const l=new Image;l.onload=()=>{F.value={width:l.naturalWidth,height:l.naturalHeight};const g=n.value.quick_template;if(g==="Original Size")P.value={name:"Original Size",width:l.naturalWidth,height:l.naturalHeight};else{const v=[{name:"Instagram Post",width:1080,height:1080},{name:"Instagram Story",width:1080,height:1920},{name:"Facebook Post",width:1200,height:630},{name:"Twitter Post",width:1200,height:675},{name:"LinkedIn Post",width:1200,height:627},{name:"YouTube Thumbnail",width:1280,height:720},{name:"Pinterest Pin",width:1e3,height:1500},{name:"TikTok Video",width:1080,height:1920},{name:"Custom Size",width:800,height:600}].find(B=>B.name===g);v?P.value=v:P.value={name:"Original Size",width:l.naturalWidth,height:l.naturalHeight}}},l.src=E.value}else{const l=n.value.quick_template;if(l&&l!=="Original Size"){const b=[{name:"Instagram Post",width:1080,height:1080},{name:"Instagram Story",width:1080,height:1920},{name:"Facebook Post",width:1200,height:630},{name:"Twitter Post",width:1200,height:675},{name:"LinkedIn Post",width:1200,height:627},{name:"YouTube Thumbnail",width:1280,height:720},{name:"Pinterest Pin",width:1e3,height:1500},{name:"TikTok Video",width:1080,height:1920},{name:"Custom Size",width:800,height:600}].find(v=>v.name===l);if(b)P.value=b;else{const v=$(w.template?.width||800,w.template?.height||600);P.value=v}}else{const g=$(w.template?.width||800,w.template?.height||600);P.value=g}}}});const $=(r,l)=>{const b=[{name:"Instagram Post",width:1080,height:1080},{name:"Instagram Story",width:1080,height:1920},{name:"Facebook Post",width:1200,height:630},{name:"Twitter Post",width:1200,height:675},{name:"LinkedIn Post",width:1200,height:627},{name:"YouTube Thumbnail",width:1280,height:720},{name:"Pinterest Pin",width:1e3,height:1500},{name:"TikTok Video",width:1080,height:1920}].find(v=>v.width===r&&v.height===l);return b||{name:"Custom Size",width:r,height:l}},m=T("select"),u=T(null),d=T(!1),x=T({x:0,y:0}),j=T(!1);T(!1),T(""),T({x:0,y:0,width:0,height:0,fontSize:0});const i=T(!1),t=T(1);let o=null;const _=T(!1),P=T(null),C=T([]);de(u,()=>{},{deep:!0}),de(m,r=>{if(r!=="select"&&!i.value){i.value=!0;const l=Math.round(n.value.width*.2),g=Math.round(r==="text"?n.value.width*.1:n.value.width*.2),b=n.value.width/2-l/2,v=n.value.height/2-g/2;re(r,b,v),m.value="select",i.value=!1}});const re=(r,l,g)=>{const b=C.value.length>0?Math.max(...C.value.map(B=>B.zIndex)):0,v={id:Date.now().toString(),type:r,x:l,y:g,width:Math.round(n.value.width*.2),height:Math.round(r==="text"?n.value.width*.1:n.value.width*.2),rotation:0,zIndex:b+1,properties:{text:r==="text"?"Sample Text":"",fontSize:r==="text"?Math.round(n.value.width*.02):void 0,fontFamily:r==="text"?"Arial":void 0,fontWeight:r==="text"?"normal":void 0,fontStyle:r==="text"?"normal":void 0,textDecoration:r==="text"?"none":void 0,textAlign:r==="text"?"left":void 0,lineHeight:r==="text"?1.2:void 0,color:r==="text"?"#000000":void 0,fillColor:r==="text"?"transparent":"#000000",strokeColor:"#000000",strokeWidth:1,hasBorder:!1,borderWidth:1,borderStyle:"solid",borderColor:"#000000",borderRadius:0,boxShadow:"none",textShadow:"none",imageUrl:r==="image"?"":void 0,imageFit:r==="image"?"cover":void 0,backgroundColor:r==="text"||r==="image"?"transparent":"#000000",imageShape:r==="image"?"rectangle":void 0}};C.value.push(v),u.value=v},H=r=>{u.value=r,m.value="select"},z=(r,l,g)=>{const b=C.value.findIndex(v=>v.id===r);if(b!==-1){const v=C.value[b];v.properties={...v.properties,[l]:g},C.value[b]={...v},u.value?.id===r&&(u.value={...v})}},oe=r=>{m.value==="select"&&(u.value=null)},ae=()=>{const r=window.innerWidth<1024?400:600,l=window.innerWidth<1024?300:450,g=r/n.value.width,b=l/n.value.height,v=Math.min(g,b,1),B=document.querySelector(".template-preview-container");if(B){const f=B.getBoundingClientRect(),ne=n.value.width*v,ye=n.value.height*v,ke=f.width/ne,xe=f.height/ye;return Math.min(ke,xe,1)*v}return v},le=(r,l)=>{m.value==="select"&&(r.preventDefault(),d.value=!0,t.value=ae(),x.value={x:r.clientX-l.x*t.value,y:r.clientY-l.y*t.value},u.value=l)},se=r=>{d.value&&u.value&&(o&&cancelAnimationFrame(o),o=requestAnimationFrame(()=>{u.value&&(u.value.x=(r.clientX-x.value.x)/t.value,u.value.y=(r.clientY-x.value.y)/t.value)}))},s=r=>{d.value=!1,o&&(cancelAnimationFrame(o),o=null)},h=r=>{const l=C.value.find(g=>g.id===r);if(l){const g=Math.max(...C.value.map(b=>b.zIndex));l.zIndex=g+1}},a=r=>{const l=C.value.find(g=>g.id===r);if(l){const g=Math.min(...C.value.map(b=>b.zIndex));l.zIndex=g-1}},D=r=>{const l=C.value.find(g=>g.id===r);if(l){const g=Math.max(...C.value.map(v=>v.zIndex)),b={...l,id:Date.now().toString(),x:l.x+20,y:l.y+20,zIndex:g+1};C.value.push(b),u.value=b}},R=r=>{const l=C.value.findIndex(g=>g.id===r);l!==-1&&(C.value.splice(l,1),u.value?.id===r&&(u.value=null))},G=(r,l,g,b,v,B)=>{const f=C.value.find(ne=>ne.id===r);f&&(f.width=l,f.height=g,f.x=b,f.y=v,f.type==="text"&&B!==void 0&&(f.properties.fontSize=B),u.value?.id===r&&(u.value={...f}))},Z=r=>{P.value=r,n.value.quick_template=r.name,r.name!=="Custom"&&r.name!=="Original Size"?(n.value.width=r.width,n.value.height=r.height):r.name==="Original Size"&&(F.value.width>0?(n.value.width=F.value.width,n.value.height=F.value.height):(n.value.width=r.width,n.value.height=r.height)),_.value=!1},Y=r=>{if(console.log("Background image file selected:",r),console.log("File type:",r.type),console.log("File size:",r.size),console.log("File name:",r.name),!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(r.type)){console.error("Invalid file type:",r.type),q.fire({title:"Invalid File Type",text:`Please select a valid image file. Detected type: ${r.type}. Supported types: JPEG, PNG, GIF, WebP`,icon:"error",confirmButtonText:"OK"});return}const g=10*1024*1024;if(r.size>g){q.fire({title:"File Too Large",text:"Please select an image smaller than 10MB",icon:"error",confirmButtonText:"OK"});return}n.value.background_image=r;const b=new FileReader;b.onload=v=>{const B=v.target?.result;console.log("Background image preview created:",B?"Yes":"No"),E.value=B;const f=new Image;f.onload=()=>{console.log("Image loaded, dimensions:",f.naturalWidth,"x",f.naturalHeight),F.value={width:f.naturalWidth,height:f.naturalHeight},n.value.width=f.naturalWidth,n.value.height=f.naturalHeight,P.value={name:"Original Size",width:f.naturalWidth,height:f.naturalHeight}},f.onerror=()=>{console.error("Failed to load image"),q.fire({title:"Invalid Image",text:"The selected file is not a valid image",icon:"error",confirmButtonText:"OK"})},f.src=B},b.onerror=()=>{console.error("Failed to read file"),q.fire({title:"File Read Error",text:"Failed to read the selected file",icon:"error",confirmButtonText:"OK"})},b.readAsDataURL(r)},ie=async()=>{if(n.value.width<100||n.value.height<100){q.fire({title:"Invalid Dimensions",text:"Canvas dimensions must be at least 100x100 pixels",icon:"warning",confirmButtonText:"OK"});return}if(!n.value.name.trim()){q.fire({title:"Missing Template Name",text:"Please enter a template name",icon:"warning",confirmButtonText:"OK"});return}j.value=!0;try{const r=new FormData;if(r.append("name",n.value.name),r.append("width",n.value.width.toString()),r.append("height",n.value.height.toString()),r.append("canvas_data",JSON.stringify(C.value)),r.append("quick_template",n.value.quick_template),n.value.background_image&&r.append("background_image",n.value.background_image),y.value){const l=await ue.post(`/templates/${w.template?.id}`,r,{headers:{"Content-Type":"multipart/form-data"}});q.fire({title:"Success!",text:"Template updated successfully.",icon:"success",position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,toast:!0}).then(()=>{ge.visit("/templates")})}else{const l=await ue.post("/templates",r,{headers:{"Content-Type":"multipart/form-data"}});q.fire({title:"Success!",text:"Template created successfully.",icon:"success",position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,toast:!0}).then(()=>{ge.visit("/templates")})}}catch(r){console.error("Error submitting form:",r);let l="An unexpected error occurred. Please try again.";if(r.response&&r.response.data&&r.response.data.message)l=r.response.data.message;else if(r.response&&r.response.data&&r.response.data.errors){const g=r.response.data.errors,b=Object.values(g)[0];Array.isArray(b)&&b.length>0&&(l=b[0])}q.fire({title:"Error!",text:l,icon:"error",confirmButtonText:"OK"})}finally{j.value=!1}},J=r=>{r.target.closest(".quick-template-dropdown")||(_.value=!1)},N=r=>{r.key==="Escape"&&(_.value=!1)};return(r,l)=>(c(),p(W,null,[I(O(Te),{title:y.value?"Edit Template":"Create Template"},null,8,["title"]),I(Ie,{breadcrumbs:k.value},{default:Se(()=>[e("div",{class:"min-h-screen bg-gray-50 dark:bg-gray-900",onClick:J,onKeydown:N},[e("div",qr,[e("form",{onSubmit:he(ie,["prevent"]),class:"space-y-6"},[e("div",Ur,[I(ot,{form:n.value,"onUpdate:form":l[0]||(l[0]=g=>n.value=g),backgroundImagePreview:E.value,"onUpdate:backgroundImagePreview":l[1]||(l[1]=g=>E.value=g),selectedQuickTemplate:P.value,"onUpdate:selectedQuickTemplate":l[2]||(l[2]=g=>P.value=g),isQuickTemplateDropdownOpen:_.value,"onUpdate:isQuickTemplateDropdownOpen":l[3]||(l[3]=g=>_.value=g),originalImageDimensions:F.value,"is-edit-mode":y.value,"is-submitting":j.value,onBackgroundImageChange:Y,onApplyQuickTemplate:Z},null,8,["form","backgroundImagePreview","selectedQuickTemplate","isQuickTemplateDropdownOpen","originalImageDimensions","is-edit-mode","is-submitting"])]),e("div",Lr,[e("div",jr,[I(St,{form:n.value,backgroundImagePreview:E.value,canvasElements:C.value,selectedElement:u.value,selectedTool:m.value,onCanvasClick:oe,onElementMouseDown:le,onMouseMove:se,onMouseUp:s,onSelectElement:H,onBringToFront:h,onSendToBack:a,onDuplicateElement:D,onDeleteElement:R,onResizeElement:G,onBackgroundImageChange:Y},null,8,["form","backgroundImagePreview","canvasElements","selectedElement","selectedTool"])]),e("div",Hr,[I(zt,{selectedTool:m.value,"onUpdate:selectedTool":l[4]||(l[4]=g=>m.value=g)},null,8,["selectedTool"]),I(Rr,{selectedElement:u.value,onUpdateElement:z,onBringToFront:h,onSendToBack:a,onDuplicateElement:D,onDeleteElement:R},null,8,["selectedElement"])])])],32)])],32)]),_:1},8,["breadcrumbs"])],64))}});export{no as default};
