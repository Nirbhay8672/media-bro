import{d as M,a as m,o as i,f as t,v as P,y as x,e as s,c as Y,G as he,A as ve,g as _,t as c,x as G,D as E,E as q,H as K,p as L,i as Q,w as g,b as d,h as ke,k as v,F as we,r as $e,m as le}from"./app-BGL_Qcjc.js";import{_ as z}from"./index-cZZ0oD6n.js";import{_ as Ce}from"./index-BT_aji1r.js";import{c as O}from"./useAssets-DTkqq4nk.js";import{X as Se,a as Ue,b as Ee,c as Te,d as R,_ as Ae}from"./AppLayout.vue_vue_type_script_setup_true_lang-BcI2YaZH.js";import{q as V,a as I}from"./index-CtZEdrDG.js";import{S as D}from"./sweetalert2.esm.all-Bj_ZQUAw.js";import{P as Be,S as je}from"./square-pen-BEpALNrR.js";import{c as ie}from"./createLucideIcon-DrOkjW0C.js";import{L as qe}from"./loader-circle-MDPp0nvm.js";import{E as De}from"./eye-C1cHM-Uh.js";import{T as Me}from"./trash-2-ACx-WI5X.js";import"./useForwardExpose-DwX0VF1R.js";import"./VisuallyHidden-BfRci6n5.js";import"./RovingFocusGroup-chz4hzBG.js";import"./image-CvITAN7m.js";import"./useArrowNavigation-C6Y-ieo6.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=ie("EllipsisIcon",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=ie("SearchIcon",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Ve={class:"relative w-full overflow-auto"},Qe={class:"w-full caption-bottom text-sm"},Pe=M({__name:"Table",props:{class:{}},setup(e){return(r,n)=>(i(),m("div",Ve,[t("table",Qe,[P(r.$slots,"default")])]))}}),Ne=M({__name:"TableBody",props:{class:{}},setup(e){const r=e;return(n,w)=>(i(),m("tbody",{class:x(s(O)("",r.class))},[P(n.$slots,"default")],2))}}),j=M({__name:"TableCell",props:{class:{}},setup(e){const r=e;return(n,w)=>(i(),m("td",{class:x(s(O)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r.class))},[P(n.$slots,"default")],2))}}),F=M({__name:"TableHead",props:{class:{}},setup(e){const r=e;return(n,w)=>(i(),m("th",{class:x(s(O)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r.class))},[P(n.$slots,"default")],2))}}),Oe=M({__name:"TableHeader",props:{class:{}},setup(e){const r=e;return(n,w)=>(i(),m("thead",{class:x(s(O)("",r.class))},[P(n.$slots,"default")],2))}}),X=M({__name:"TableRow",props:{class:{}},setup(e){const r=e;return(n,w)=>(i(),m("tr",{class:x(s(O)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r.class))},[P(n.$slots,"default")],2))}}),$=e=>({url:$.url(e),method:"get"});$.definition={methods:["get","head"],url:"/users"};$.url=e=>$.definition.url+V(e);$.get=e=>({url:$.url(e),method:"get"});$.head=e=>({url:$.url(e),method:"head"});const W=e=>({action:$.url(e),method:"get"});W.get=e=>({action:$.url(e),method:"get"});W.head=e=>({action:$.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});$.form=W;const C=e=>({url:C.url(e),method:"get"});C.definition={methods:["get","head"],url:"/users/create"};C.url=e=>C.definition.url+V(e);C.get=e=>({url:C.url(e),method:"get"});C.head=e=>({url:C.url(e),method:"head"});const Z=e=>({action:C.url(e),method:"get"});Z.get=e=>({action:C.url(e),method:"get"});Z.head=e=>({action:C.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});C.form=Z;const T=e=>({url:T.url(e),method:"post"});T.definition={methods:["post"],url:"/users"};T.url=e=>T.definition.url+V(e);T.post=e=>({url:T.url(e),method:"post"});const ne=e=>({action:T.url(e),method:"post"});ne.post=e=>({action:T.url(e),method:"post"});T.form=ne;const S=(e,r)=>({url:S.url(e,r),method:"get"});S.definition={methods:["get","head"],url:"/users/{user}"};S.url=(e,r)=>{(typeof e=="string"||typeof e=="number")&&(e={user:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={user:e.id}),Array.isArray(e)&&(e={user:e[0]}),e=I(e);const n={user:typeof e.user=="object"?e.user.id:e.user};return S.definition.url.replace("{user}",n.user.toString()).replace(/\/+$/,"")+V(r)};S.get=(e,r)=>({url:S.url(e,r),method:"get"});S.head=(e,r)=>({url:S.url(e,r),method:"head"});const ee=(e,r)=>({action:S.url(e,r),method:"get"});ee.get=(e,r)=>({action:S.url(e,r),method:"get"});ee.head=(e,r)=>({action:S.url(e,{[r?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...r?.query??r?.mergeQuery??{}}}),method:"get"});S.form=ee;const U=(e,r)=>({url:U.url(e,r),method:"get"});U.definition={methods:["get","head"],url:"/users/{user}/edit"};U.url=(e,r)=>{(typeof e=="string"||typeof e=="number")&&(e={user:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={user:e.id}),Array.isArray(e)&&(e={user:e[0]}),e=I(e);const n={user:typeof e.user=="object"?e.user.id:e.user};return U.definition.url.replace("{user}",n.user.toString()).replace(/\/+$/,"")+V(r)};U.get=(e,r)=>({url:U.url(e,r),method:"get"});U.head=(e,r)=>({url:U.url(e,r),method:"head"});const te=(e,r)=>({action:U.url(e,r),method:"get"});te.get=(e,r)=>({action:U.url(e,r),method:"get"});te.head=(e,r)=>({action:U.url(e,{[r?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...r?.query??r?.mergeQuery??{}}}),method:"get"});U.form=te;const A=(e,r)=>({url:A.url(e,r),method:"post"});A.definition={methods:["post"],url:"/users/{user}"};A.url=(e,r)=>{(typeof e=="string"||typeof e=="number")&&(e={user:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={user:e.id}),Array.isArray(e)&&(e={user:e[0]}),e=I(e);const n={user:typeof e.user=="object"?e.user.id:e.user};return A.definition.url.replace("{user}",n.user.toString()).replace(/\/+$/,"")+V(r)};A.post=(e,r)=>({url:A.url(e,r),method:"post"});const de=(e,r)=>({action:A.url(e,r),method:"post"});de.post=(e,r)=>({action:A.url(e,r),method:"post"});A.form=de;const B=(e,r)=>({url:B.url(e,r),method:"delete"});B.definition={methods:["delete"],url:"/users/{user}"};B.url=(e,r)=>{(typeof e=="string"||typeof e=="number")&&(e={user:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={user:e.id}),Array.isArray(e)&&(e={user:e[0]}),e=I(e);const n={user:typeof e.user=="object"?e.user.id:e.user};return B.definition.url.replace("{user}",n.user.toString()).replace(/\/+$/,"")+V(r)};B.delete=(e,r)=>({url:B.url(e,r),method:"delete"});const ue=(e,r)=>({action:B.url(e,{[r?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...r?.query??r?.mergeQuery??{}}}),method:"post"});ue.delete=(e,r)=>({action:B.url(e,{[r?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...r?.query??r?.mergeQuery??{}}}),method:"post"});B.form=ue;const J={index:Object.assign($,$),create:Object.assign(C,C),store:Object.assign(T,T),show:Object.assign(S,S),edit:Object.assign(U,U),update:Object.assign(A,A),destroy:Object.assign(B,B)},Ie={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},He={class:"p-6"},ze={class:"flex items-center justify-between mb-6"},Re={class:"text-2xl font-bold text-gray-900 dark:text-white"},Xe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ye={class:"space-y-2"},Ge={key:0,class:"text-sm text-red-500"},Ke={class:"space-y-2"},Je={key:0,class:"text-sm text-red-500"},We={class:"space-y-2"},Ze={key:0,class:"text-sm text-red-500"},et={class:"space-y-2"},tt={key:0,class:"text-sm text-red-500"},st={class:"space-y-2"},rt={for:"password",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},ot=["required"],at={key:0,class:"text-sm text-red-500"},lt={class:"space-y-2"},it={for:"password_confirmation",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},nt=["required"],dt={key:0,class:"text-sm text-red-500"},ut={class:"space-y-2"},mt={key:0,class:"text-sm text-red-500"},ct={class:"space-y-2"},pt={key:0,class:"text-sm text-red-500"},ft={class:"space-y-2"},yt={key:0,class:"text-sm text-red-500"},gt={class:"flex justify-end gap-4 pt-6 border-t border-gray-200 dark:border-gray-600"},bt=["disabled"],_t=M({__name:"UserFormModal",props:{isOpen:{type:Boolean},user:{}},emits:["close","success"],setup(e,{emit:r}){const n=e,w=r,h=Y(()=>!!n.user),o=he({name:"",username:"",email:"",mobile:"",password:"",password_confirmation:"",subscription_start_date:"",subscription_end_date:"",role:"admin",template_limit:-1}),p=()=>{o.reset(),o.clearErrors(),w("close")},f=()=>{h.value&&n.user?o.post(J.update.url(n.user.id),{onSuccess:()=>{D.fire({title:"Success!",text:"User updated successfully.",icon:"success",position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,toast:!0}),p(),w("success")},onError:()=>{D.fire({title:"Error!",text:"Failed to update user. Please try again.",icon:"error",position:"top-end",showConfirmButton:!1,timer:4e3,timerProgressBar:!0,toast:!0})}}):o.post(J.store.url(),{onSuccess:()=>{D.fire({title:"Success!",text:"User created successfully.",icon:"success",position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,toast:!0}),p(),w("success")},onError:()=>{D.fire({title:"Error!",text:"Failed to create user. Please try again.",icon:"error",position:"top-end",showConfirmButton:!1,timer:4e3,timerProgressBar:!0,toast:!0})}})};return ve(()=>n.isOpen,k=>{k&&(n.user?(o.name=n.user.name,o.username=n.user.username||"",o.email=n.user.email,o.mobile=n.user.mobile||"",o.password="",o.password_confirmation="",o.subscription_start_date=n.user.subscription_start_date?new Date(n.user.subscription_start_date).toISOString().split("T")[0]:"",o.subscription_end_date=n.user.subscription_end_date?new Date(n.user.subscription_end_date).toISOString().split("T")[0]:"",o.role="admin",o.template_limit=n.user.template_limit||-1):(o.reset(),o.role="admin",o.template_limit=-1),o.clearErrors())}),(k,u)=>k.isOpen?(i(),m("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center",style:{"background-color":"rgba(0, 0, 0, 0.4)"},onClick:G(p,["self"])},[t("div",Ie,[t("div",He,[t("div",ze,[t("h2",Re,c(h.value?"Edit User":"Create New User"),1),t("button",{onClick:p,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...u[9]||(u[9]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("form",{onSubmit:G(f,["prevent"]),class:"space-y-6"},[t("div",Xe,[t("div",Ye,[u[10]||(u[10]=t("label",{for:"name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Name * ",-1)),E(t("input",{id:"name","onUpdate:modelValue":u[0]||(u[0]=b=>s(o).name=b),type:"text",required:"",class:x(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":s(o).errors.name}])},null,2),[[q,s(o).name]]),s(o).errors.name?(i(),m("p",Ge,c(s(o).errors.name),1)):_("",!0)]),t("div",Ke,[u[11]||(u[11]=t("label",{for:"username",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Username * ",-1)),E(t("input",{id:"username","onUpdate:modelValue":u[1]||(u[1]=b=>s(o).username=b),type:"text",required:"",class:x(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":s(o).errors.username}])},null,2),[[q,s(o).username]]),s(o).errors.username?(i(),m("p",Je,c(s(o).errors.username),1)):_("",!0)]),t("div",We,[u[12]||(u[12]=t("label",{for:"email",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Email * ",-1)),E(t("input",{id:"email","onUpdate:modelValue":u[2]||(u[2]=b=>s(o).email=b),type:"email",required:"",class:x(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":s(o).errors.email}])},null,2),[[q,s(o).email]]),s(o).errors.email?(i(),m("p",Ze,c(s(o).errors.email),1)):_("",!0)]),t("div",et,[u[13]||(u[13]=t("label",{for:"mobile",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Mobile ",-1)),E(t("input",{id:"mobile","onUpdate:modelValue":u[3]||(u[3]=b=>s(o).mobile=b),type:"tel",class:x(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":s(o).errors.mobile}])},null,2),[[q,s(o).mobile]]),s(o).errors.mobile?(i(),m("p",tt,c(s(o).errors.mobile),1)):_("",!0)]),t("div",st,[t("label",rt," Password "+c(h.value?"(leave blank to keep current)":"*"),1),E(t("input",{id:"password","onUpdate:modelValue":u[4]||(u[4]=b=>s(o).password=b),type:"password",required:!h.value,class:x(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":s(o).errors.password}])},null,10,ot),[[q,s(o).password]]),s(o).errors.password?(i(),m("p",at,c(s(o).errors.password),1)):_("",!0)]),t("div",lt,[t("label",it," Confirm Password "+c(h.value?"":"*"),1),E(t("input",{id:"password_confirmation","onUpdate:modelValue":u[5]||(u[5]=b=>s(o).password_confirmation=b),type:"password",required:!h.value,class:x(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":s(o).errors.password_confirmation}])},null,10,nt),[[q,s(o).password_confirmation]]),s(o).errors.password_confirmation?(i(),m("p",dt,c(s(o).errors.password_confirmation),1)):_("",!0)]),t("div",ut,[u[14]||(u[14]=t("label",{for:"subscription_start_date",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Subscription Start Date * ",-1)),E(t("input",{id:"subscription_start_date","onUpdate:modelValue":u[6]||(u[6]=b=>s(o).subscription_start_date=b),type:"date",required:"",class:x(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":s(o).errors.subscription_start_date}])},null,2),[[q,s(o).subscription_start_date]]),s(o).errors.subscription_start_date?(i(),m("p",mt,c(s(o).errors.subscription_start_date),1)):_("",!0)]),t("div",ct,[u[15]||(u[15]=t("label",{for:"subscription_end_date",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Subscription End Date * ",-1)),E(t("input",{id:"subscription_end_date","onUpdate:modelValue":u[7]||(u[7]=b=>s(o).subscription_end_date=b),type:"date",required:"",class:x(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":s(o).errors.subscription_end_date}])},null,2),[[q,s(o).subscription_end_date]]),s(o).errors.subscription_end_date?(i(),m("p",pt,c(s(o).errors.subscription_end_date),1)):_("",!0)]),t("div",ft,[u[17]||(u[17]=t("label",{for:"template_limit",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Template Limit * ",-1)),E(t("select",{id:"template_limit","onUpdate:modelValue":u[8]||(u[8]=b=>s(o).template_limit=b),required:"",class:x(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":s(o).errors.template_limit}])},[...u[16]||(u[16]=[t("option",{value:"-1"},"Unlimited",-1),t("option",{value:"5"},"5 Templates (Demo/Trial)",-1),t("option",{value:"10"},"10 Templates (Basic)",-1),t("option",{value:"25"},"25 Templates (Standard)",-1)])],2),[[K,s(o).template_limit]]),s(o).errors.template_limit?(i(),m("p",yt,c(s(o).errors.template_limit),1)):_("",!0)])]),t("div",gt,[t("button",{type:"button",onClick:p,class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500"}," Cancel "),t("button",{type:"submit",disabled:s(o).processing,class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50"},c(s(o).processing?h.value?"Updating...":"Creating...":h.value?"Update User":"Create User"),9,bt)])],32)])])])):_("",!0)}}),xt={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto"},ht={class:"p-6"},vt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},kt={class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6"},wt={class:"space-y-4"},$t={class:"text-sm text-gray-900 dark:text-white"},Ct={class:"text-sm text-gray-900 dark:text-white"},St={class:"text-sm text-gray-900 dark:text-white"},Ut={class:"text-sm text-gray-900 dark:text-white"},Et={class:"mt-1"},Tt={class:"text-sm text-gray-900 dark:text-white"},At={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"},Bt={class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6"},jt={class:"space-y-4"},qt={key:0},Dt={class:"text-sm text-gray-900 dark:text-white"},Mt={key:1},Ft={class:"text-sm text-gray-900 dark:text-white"},Lt={key:2},Vt=M({__name:"ViewUserModal",props:{isOpen:{type:Boolean},user:{}},emits:["close"],setup(e,{emit:r}){const n=r,w=()=>{n("close")},h=p=>new Date(p).toLocaleDateString(),o=p=>{switch(p){case"super_admin":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"admin":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"user":return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};return(p,f)=>p.isOpen&&p.user?(i(),m("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center",style:{"background-color":"rgba(0, 0, 0, 0.4)"},onClick:G(w,["self"])},[t("div",xt,[t("div",ht,[t("div",{class:"flex items-center justify-between mb-6"},[f[1]||(f[1]=t("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"User Details",-1)),t("button",{onClick:w,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...f[0]||(f[0]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",vt,[t("div",kt,[f[8]||(f[8]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Basic Information",-1)),t("div",wt,[t("div",null,[f[2]||(f[2]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Name",-1)),t("p",$t,c(p.user.name),1)]),t("div",null,[f[3]||(f[3]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Email",-1)),t("p",Ct,c(p.user.email),1)]),t("div",null,[f[4]||(f[4]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Username",-1)),t("p",St,c(p.user.username||"Not set"),1)]),t("div",null,[f[5]||(f[5]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Mobile",-1)),t("p",Ut,c(p.user.mobile||"Not set"),1)]),t("div",null,[f[6]||(f[6]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Role",-1)),t("div",Et,[t("span",{class:x(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",o(p.user.role)])},c(p.user.role.replace("_"," ").toUpperCase()),3)])]),t("div",null,[f[7]||(f[7]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Templates Created",-1)),t("p",Tt,[t("span",At,c(p.user.templates_count||0)+" templates ",1)])])])]),t("div",Bt,[f[12]||(f[12]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Subscription Information",-1)),t("div",jt,[p.user.subscription_start_date&&p.user.subscription_end_date?(i(),m("div",qt,[f[9]||(f[9]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Start Date",-1)),t("p",Dt,c(h(p.user.subscription_start_date)),1)])):_("",!0),p.user.subscription_start_date&&p.user.subscription_end_date?(i(),m("div",Mt,[f[10]||(f[10]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"End Date",-1)),t("p",Ft,c(h(p.user.subscription_end_date)),1)])):_("",!0),!p.user.subscription_start_date||!p.user.subscription_end_date?(i(),m("div",Lt,[...f[11]||(f[11]=[t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"No subscription information available",-1)])])):_("",!0)])])])])])])):_("",!0)}}),Qt={class:"space-y-6 p-5"},Pt={class:"flex items-center justify-between"},Nt={class:"space-y-4"},Ot={class:"relative"},It={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Ht={class:"flex items-center gap-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg"},zt={class:"flex items-center gap-2"},Rt={class:"flex items-center gap-2"},Xt={class:"rounded-md border"},Yt={class:"flex flex-col items-center gap-2"},Gt={class:"text-sm"},Kt={key:0},Jt={key:0},Wt={key:1},Zt={key:1},es={class:"flex items-center gap-3"},ts={class:"flex items-center gap-2"},ss=["onClick","disabled","title"],rs={key:1,class:"text-xs text-gray-400 italic"},os={class:"text-sm"},as={key:0,class:"font-medium text-green-600"},ls={key:1,class:"font-medium"},is={key:2,class:"text-muted-foreground"},ns={key:0,class:"text-sm"},ds={key:1,class:"text-muted-foreground"},us={class:"flex items-center justify-between"},ms={class:"text-sm text-muted-foreground"},cs={key:0},ps={class:"ml-2 text-blue-600"},fs={key:0},ys={key:1},gs={key:1},Ds=M({__name:"Index",props:{users:{}},setup(e){const r=e,n=L(!1),w=L(!1),h=L(null),o=L(new Set),p=L(""),f=L(""),k=L(""),u=[{title:"User Management",href:"/users"}],b=Y(()=>p.value!==""||f.value!==""||k.value!==""),H=Y(()=>{let y=r.users.data;if(k.value.trim()){const a=k.value.toLowerCase().trim();y=y.filter(l=>{const N=l.name?.toLowerCase()||"",be=l.username?.toLowerCase()||"",_e=l.email?.toLowerCase()||"",xe=l.mobile?.toLowerCase()||"";return N.includes(a)||be.includes(a)||_e.includes(a)||xe.includes(a)})}if(p.value==="unlimited")y=y.filter(a=>a.template_limit===-1);else if(p.value==="limited")y=y.filter(a=>a.template_limit!==-1);else if(p.value&&["5","10","25"].includes(p.value)){const a=parseInt(p.value);y=y.filter(l=>l.template_limit===a)}return f.value==="active"?y=y.filter(a=>a.is_active):f.value==="inactive"&&(y=y.filter(a=>!a.is_active)),y}),se=y=>new Date(y).toLocaleDateString(),me=()=>{h.value=null,n.value=!0},ce=y=>{h.value=y,n.value=!0},pe=y=>{h.value=y,w.value=!0},fe=y=>{D.fire({title:"Are you sure?",text:`You are about to delete ${y.name}. This action cannot be undone!`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(a=>{a.isConfirmed&&le.delete(J.destroy.url(y.id),{onSuccess:()=>{D.fire({title:"Deleted!",text:"User has been deleted successfully.",icon:"success",position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,toast:!0})},onError:()=>{D.fire({title:"Error!",text:"Failed to delete user. Please try again.",icon:"error",position:"top-end",showConfirmButton:!1,timer:4e3,timerProgressBar:!0,toast:!0})}})})},re=()=>{n.value=!1,w.value=!1,h.value=null},ye=()=>{le.reload()},ge=async y=>{o.value.add(y.id);try{const l=await(await fetch(`/users/${y.id}/toggle-status`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}})).json();if(l.success)y.is_active=l.is_active,D.fire({title:"Success!",text:l.message,icon:"success",position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,toast:!0});else throw new Error(l.error||"Failed to toggle user status")}catch(a){D.fire({title:"Error!",text:a instanceof Error?a.message:"Failed to toggle user status",icon:"error",position:"top-end",showConfirmButton:!1,timer:4e3,timerProgressBar:!0,toast:!0})}finally{o.value.delete(y.id)}},oe=()=>{},ae=()=>{p.value="",f.value="",k.value=""};return(y,a)=>(i(),Q(Ae,{breadcrumbs:u},{default:g(()=>[d(s(ke),{title:"User Management"}),t("div",Qt,[t("div",Pt,[a[5]||(a[5]=t("div",null,[t("h1",{class:"text-2xl font-bold tracking-tight"},"User Management"),t("p",{class:"text-muted-foreground"}," Manage users and their roles in the system. ")],-1)),d(s(z),{onClick:me},{default:g(()=>[d(s(Be),{class:"mr-2 h-4 w-4"}),a[4]||(a[4]=v(" Add User ",-1))]),_:1})]),t("div",Nt,[t("div",Ot,[t("div",It,[d(s(Le),{class:"h-4 w-4 text-gray-400"})]),E(t("input",{"onUpdate:modelValue":a[0]||(a[0]=l=>k.value=l),type:"text",placeholder:"Search by name, username, email, or mobile...",class:"w-full pl-10 pr-10 py-3 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"},null,512),[[q,k.value]]),k.value?(i(),m("button",{key:0,onClick:a[1]||(a[1]=l=>k.value=""),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[d(s(Se),{class:"h-4 w-4"})])):_("",!0)]),t("div",Ht,[t("div",zt,[a[7]||(a[7]=t("label",{for:"template-limit-filter",class:"text-sm font-medium text-gray-700 dark:text-gray-300"}," Template Limit: ",-1)),E(t("select",{id:"template-limit-filter","onUpdate:modelValue":a[2]||(a[2]=l=>p.value=l),onChange:oe,class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm"},[...a[6]||(a[6]=[t("option",{value:""},"All Users",-1),t("option",{value:"unlimited"},"Unlimited Templates",-1),t("option",{value:"limited"},"Limited Templates",-1),t("option",{value:"5"},"5 Templates",-1),t("option",{value:"10"},"10 Templates",-1),t("option",{value:"25"},"25 Templates",-1)])],544),[[K,p.value]])]),t("div",Rt,[a[9]||(a[9]=t("label",{for:"status-filter",class:"text-sm font-medium text-gray-700 dark:text-gray-300"}," Status: ",-1)),E(t("select",{id:"status-filter","onUpdate:modelValue":a[3]||(a[3]=l=>f.value=l),onChange:oe,class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm"},[...a[8]||(a[8]=[t("option",{value:""},"All Status",-1),t("option",{value:"active"},"Active",-1),t("option",{value:"inactive"},"Inactive",-1)])],544),[[K,f.value]])]),b.value?(i(),Q(s(z),{key:0,onClick:ae,variant:"outline",size:"sm",class:"ml-auto"},{default:g(()=>[...a[10]||(a[10]=[v(" Clear Filters ",-1)])]),_:1})):_("",!0)])]),t("div",Xt,[d(s(Pe),null,{default:g(()=>[d(s(Oe),null,{default:g(()=>[d(s(X),null,{default:g(()=>[d(s(F),null,{default:g(()=>[...a[11]||(a[11]=[v("Name",-1)])]),_:1}),d(s(F),null,{default:g(()=>[...a[12]||(a[12]=[v("Email",-1)])]),_:1}),d(s(F),null,{default:g(()=>[...a[13]||(a[13]=[v("Username",-1)])]),_:1}),d(s(F),null,{default:g(()=>[...a[14]||(a[14]=[v("Status",-1)])]),_:1}),d(s(F),null,{default:g(()=>[...a[15]||(a[15]=[v("Template Limit",-1)])]),_:1}),d(s(F),null,{default:g(()=>[...a[16]||(a[16]=[v("Subscription",-1)])]),_:1}),d(s(F),null,{default:g(()=>[...a[17]||(a[17]=[v("Templates",-1)])]),_:1}),d(s(F),{class:"w-[50px]"})]),_:1})]),_:1}),d(s(Ne),null,{default:g(()=>[H.value.length===0?(i(),Q(s(X),{key:0},{default:g(()=>[d(s(j),{colspan:"8",class:"text-center py-8 text-muted-foreground"},{default:g(()=>[t("div",Yt,[a[20]||(a[20]=t("div",{class:"text-lg font-medium"},"No users found",-1)),t("div",Gt,[b.value?(i(),m("span",Kt,[k.value?(i(),m("span",Jt,' No users match "'+c(k.value)+'" ',1)):(i(),m("span",Wt," No users match your current filters ")),a[18]||(a[18]=t("br",null,null,-1)),a[19]||(a[19]=v(" Try adjusting your search or ",-1)),t("button",{onClick:ae,class:"text-blue-600 hover:text-blue-800 underline"}," clear all filters ")])):(i(),m("span",Zt,"No users available"))])])]),_:1})]),_:1})):_("",!0),(i(!0),m(we,null,$e(H.value,l=>(i(),Q(s(X),{key:l.id},{default:g(()=>[d(s(j),{class:"font-medium"},{default:g(()=>[v(c(l.name),1)]),_:2},1024),d(s(j),null,{default:g(()=>[v(c(l.email),1)]),_:2},1024),d(s(j),null,{default:g(()=>[v(c(l.username||"-"),1)]),_:2},1024),d(s(j),null,{default:g(()=>[t("div",es,[t("div",ts,[t("div",{class:x(["w-2 h-2 rounded-full",l.is_active?"bg-green-500":"bg-gray-400"])},null,2),t("span",{class:x(["text-sm font-medium",l.is_active?"text-green-700":"text-gray-500"])},c(l.is_active?"Active":"Inactive"),3)]),l.role!=="super_admin"?(i(),m("button",{key:0,onClick:N=>ge(l),disabled:o.value.has(l.id),title:l.is_active?"Click to deactivate account":"Click to activate account",class:x(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",l.is_active?"bg-indigo-600":"bg-gray-200",o.value.has(l.id)?"opacity-50 cursor-not-allowed":"cursor-pointer hover:opacity-80"])},[o.value.has(l.id)?(i(),Q(s(qe),{key:1,class:"h-3 w-3 animate-spin text-white mx-auto"})):(i(),m("span",{key:0,class:x(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",l.is_active?"translate-x-6":"translate-x-1"])},null,2))],10,ss)):(i(),m("span",rs," Super Admin "))])]),_:2},1024),d(s(j),null,{default:g(()=>[t("div",os,[l.template_limit===-1?(i(),m("div",as," Unlimited ")):(i(),m("div",ls,c(l.template_limit)+" templates ",1)),l.template_limit!==-1?(i(),m("div",is,c(l.templates_count||0)+"/"+c(l.template_limit)+" used ",1)):_("",!0)])]),_:2},1024),d(s(j),null,{default:g(()=>[l.subscription_start_date&&l.subscription_end_date?(i(),m("div",ns,[t("div",null,"Start: "+c(se(l.subscription_start_date)),1),t("div",null,"End: "+c(se(l.subscription_end_date)),1)])):(i(),m("span",ds,"No subscription"))]),_:2},1024),d(s(j),null,{default:g(()=>[d(s(Ce),{variant:"secondary"},{default:g(()=>[v(c(l.templates_count||0)+" templates ",1)]),_:2},1024)]),_:2},1024),d(s(j),null,{default:g(()=>[d(s(Ue),null,{default:g(()=>[d(s(Ee),{"as-child":""},{default:g(()=>[d(s(z),{variant:"ghost",class:"h-8 w-8 p-0"},{default:g(()=>[d(s(Fe),{class:"h-4 w-4"})]),_:1})]),_:1}),d(s(Te),{align:"end"},{default:g(()=>[d(s(R),{onClick:N=>pe(l)},{default:g(()=>[d(s(De),{class:"mr-2 h-4 w-4"}),a[21]||(a[21]=v(" View ",-1))]),_:1},8,["onClick"]),d(s(R),{onClick:N=>ce(l)},{default:g(()=>[d(s(je),{class:"mr-2 h-4 w-4"}),a[22]||(a[22]=v(" Edit ",-1))]),_:1},8,["onClick"]),l.role!=="super_admin"?(i(),Q(s(R),{key:0,onClick:N=>fe(l),class:"text-destructive"},{default:g(()=>[d(s(Me),{class:"mr-2 h-4 w-4"}),a[23]||(a[23]=v(" Delete ",-1))]),_:1},8,["onClick"])):_("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),t("div",us,[t("div",ms,[b.value?(i(),m("span",cs,[v(" Showing "+c(H.value.length)+" of "+c(y.users.total)+" users ",1),t("span",ps,[k.value?(i(),m("span",fs,'(search: "'+c(k.value)+'")',1)):(i(),m("span",ys,"(filtered)"))])])):(i(),m("span",gs," Showing "+c((y.users.current_page-1)*y.users.per_page+1)+" to "+c(Math.min(y.users.current_page*y.users.per_page,y.users.total))+" of "+c(y.users.total)+" results ",1))])])]),d(_t,{"is-open":n.value,user:h.value,onClose:re,onSuccess:ye},null,8,["is-open","user"]),d(Vt,{"is-open":w.value,user:h.value,onClose:re},null,8,["is-open","user"])]),_:1}))}});export{Ds as default};
