import{d as j,a as y,o as d,f as t,v as P,y as _,e as r,c as ie,G as le,A as ne,g as k,t as u,x as z,D as A,E as q,H as de,p as O,i as N,w as f,b as l,h as ue,k as w,F as me,r as ce,m as W}from"./app-CFdgA7cD.js";import{_ as Z}from"./index-DYSYe5V-.js";import{_ as pe}from"./index-C2LLTuxJ.js";import{c as V}from"./useAssets-C6RQkhvO.js";import{a as fe,b as ye,c as ge,d as H,_ as be}from"./AppLayout.vue_vue_type_script_setup_true_lang-tHcRdMFZ.js";import{q as F,a as L}from"./index-CtZEdrDG.js";import{S as T}from"./sweetalert2.esm.all-Bj_ZQUAw.js";import{P as _e,S as xe}from"./square-pen-DlqyvL2a.js";import{L as he}from"./loader-circle-BLGHVbp1.js";import{c as ke}from"./createLucideIcon-ood-dfj4.js";import{E as we}from"./eye-C2lxvDF8.js";import{T as ve}from"./trash-2-Cakr8cWJ.js";import"./useForwardExpose-BNj8lHJl.js";import"./VisuallyHidden-DkODLi5-.js";import"./RovingFocusGroup-BJ9wRLBO.js";import"./image-DVM8Qaj0.js";import"./useArrowNavigation-C6Y-ieo6.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=ke("EllipsisIcon",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),Ce={class:"relative w-full overflow-auto"},Se={class:"w-full caption-bottom text-sm"},Ee=j({__name:"Table",props:{class:{}},setup(e){return(s,a)=>(d(),y("div",Ce,[t("table",Se,[P(s.$slots,"default")])]))}}),Ue=j({__name:"TableBody",props:{class:{}},setup(e){const s=e;return(a,x)=>(d(),y("tbody",{class:_(r(V)("",s.class))},[P(a.$slots,"default")],2))}}),D=j({__name:"TableCell",props:{class:{}},setup(e){const s=e;return(a,x)=>(d(),y("td",{class:_(r(V)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s.class))},[P(a.$slots,"default")],2))}}),M=j({__name:"TableHead",props:{class:{}},setup(e){const s=e;return(a,x)=>(d(),y("th",{class:_(r(V)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s.class))},[P(a.$slots,"default")],2))}}),Be=j({__name:"TableHeader",props:{class:{}},setup(e){const s=e;return(a,x)=>(d(),y("thead",{class:_(r(V)("",s.class))},[P(a.$slots,"default")],2))}}),ee=j({__name:"TableRow",props:{class:{}},setup(e){const s=e;return(a,x)=>(d(),y("tr",{class:_(r(V)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s.class))},[P(a.$slots,"default")],2))}}),v=e=>({url:v.url(e),method:"get"});v.definition={methods:["get","head"],url:"/users"};v.url=e=>v.definition.url+F(e);v.get=e=>({url:v.url(e),method:"get"});v.head=e=>({url:v.url(e),method:"head"});const Y=e=>({action:v.url(e),method:"get"});Y.get=e=>({action:v.url(e),method:"get"});Y.head=e=>({action:v.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});v.form=Y;const $=e=>({url:$.url(e),method:"get"});$.definition={methods:["get","head"],url:"/users/create"};$.url=e=>$.definition.url+F(e);$.get=e=>({url:$.url(e),method:"get"});$.head=e=>({url:$.url(e),method:"head"});const G=e=>({action:$.url(e),method:"get"});G.get=e=>({action:$.url(e),method:"get"});G.head=e=>({action:$.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});$.form=G;const E=e=>({url:E.url(e),method:"post"});E.definition={methods:["post"],url:"/users"};E.url=e=>E.definition.url+F(e);E.post=e=>({url:E.url(e),method:"post"});const te=e=>({action:E.url(e),method:"post"});te.post=e=>({action:E.url(e),method:"post"});E.form=te;const C=(e,s)=>({url:C.url(e,s),method:"get"});C.definition={methods:["get","head"],url:"/users/{user}"};C.url=(e,s)=>{(typeof e=="string"||typeof e=="number")&&(e={user:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={user:e.id}),Array.isArray(e)&&(e={user:e[0]}),e=L(e);const a={user:typeof e.user=="object"?e.user.id:e.user};return C.definition.url.replace("{user}",a.user.toString()).replace(/\/+$/,"")+F(s)};C.get=(e,s)=>({url:C.url(e,s),method:"get"});C.head=(e,s)=>({url:C.url(e,s),method:"head"});const K=(e,s)=>({action:C.url(e,s),method:"get"});K.get=(e,s)=>({action:C.url(e,s),method:"get"});K.head=(e,s)=>({action:C.url(e,{[s?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...s?.query??s?.mergeQuery??{}}}),method:"get"});C.form=K;const S=(e,s)=>({url:S.url(e,s),method:"get"});S.definition={methods:["get","head"],url:"/users/{user}/edit"};S.url=(e,s)=>{(typeof e=="string"||typeof e=="number")&&(e={user:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={user:e.id}),Array.isArray(e)&&(e={user:e[0]}),e=L(e);const a={user:typeof e.user=="object"?e.user.id:e.user};return S.definition.url.replace("{user}",a.user.toString()).replace(/\/+$/,"")+F(s)};S.get=(e,s)=>({url:S.url(e,s),method:"get"});S.head=(e,s)=>({url:S.url(e,s),method:"head"});const X=(e,s)=>({action:S.url(e,s),method:"get"});X.get=(e,s)=>({action:S.url(e,s),method:"get"});X.head=(e,s)=>({action:S.url(e,{[s?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...s?.query??s?.mergeQuery??{}}}),method:"get"});S.form=X;const U=(e,s)=>({url:U.url(e,s),method:"post"});U.definition={methods:["post"],url:"/users/{user}"};U.url=(e,s)=>{(typeof e=="string"||typeof e=="number")&&(e={user:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={user:e.id}),Array.isArray(e)&&(e={user:e[0]}),e=L(e);const a={user:typeof e.user=="object"?e.user.id:e.user};return U.definition.url.replace("{user}",a.user.toString()).replace(/\/+$/,"")+F(s)};U.post=(e,s)=>({url:U.url(e,s),method:"post"});const re=(e,s)=>({action:U.url(e,s),method:"post"});re.post=(e,s)=>({action:U.url(e,s),method:"post"});U.form=re;const B=(e,s)=>({url:B.url(e,s),method:"delete"});B.definition={methods:["delete"],url:"/users/{user}"};B.url=(e,s)=>{(typeof e=="string"||typeof e=="number")&&(e={user:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={user:e.id}),Array.isArray(e)&&(e={user:e[0]}),e=L(e);const a={user:typeof e.user=="object"?e.user.id:e.user};return B.definition.url.replace("{user}",a.user.toString()).replace(/\/+$/,"")+F(s)};B.delete=(e,s)=>({url:B.url(e,s),method:"delete"});const se=(e,s)=>({action:B.url(e,{[s?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...s?.query??s?.mergeQuery??{}}}),method:"post"});se.delete=(e,s)=>({action:B.url(e,{[s?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...s?.query??s?.mergeQuery??{}}}),method:"post"});B.form=se;const R={index:Object.assign(v,v),create:Object.assign($,$),store:Object.assign(E,E),show:Object.assign(C,C),edit:Object.assign(S,S),update:Object.assign(U,U),destroy:Object.assign(B,B)},Ae={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},Te={class:"p-6"},je={class:"flex items-center justify-between mb-6"},qe={class:"text-2xl font-bold text-gray-900 dark:text-white"},De={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Me={class:"space-y-2"},Fe={key:0,class:"text-sm text-red-500"},Pe={class:"space-y-2"},Qe={key:0,class:"text-sm text-red-500"},Ve={class:"space-y-2"},Oe={key:0,class:"text-sm text-red-500"},Ne={class:"space-y-2"},Le={key:0,class:"text-sm text-red-500"},Ie={class:"space-y-2"},He={for:"password",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},ze=["required"],Re={key:0,class:"text-sm text-red-500"},Ye={class:"space-y-2"},Ge={for:"password_confirmation",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},Ke=["required"],Xe={key:0,class:"text-sm text-red-500"},Je={class:"space-y-2"},We={key:0,class:"text-sm text-red-500"},Ze={class:"space-y-2"},et={key:0,class:"text-sm text-red-500"},tt={class:"space-y-2"},rt={key:0,class:"text-sm text-red-500"},st={class:"flex justify-end gap-4 pt-6 border-t border-gray-200 dark:border-gray-600"},ot=["disabled"],at=j({__name:"UserFormModal",props:{isOpen:{type:Boolean},user:{}},emits:["close","success"],setup(e,{emit:s}){const a=e,x=s,h=ie(()=>!!a.user),o=le({name:"",username:"",email:"",mobile:"",password:"",password_confirmation:"",subscription_start_date:"",subscription_end_date:"",role:"admin",template_limit:-1}),m=()=>{o.reset(),o.clearErrors(),x("close")},c=()=>{h.value&&a.user?o.post(R.update.url(a.user.id),{onSuccess:()=>{T.fire({title:"Success!",text:"User updated successfully.",icon:"success",position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,toast:!0}),m(),x("success")},onError:()=>{T.fire({title:"Error!",text:"Failed to update user. Please try again.",icon:"error",position:"top-end",showConfirmButton:!1,timer:4e3,timerProgressBar:!0,toast:!0})}}):o.post(R.store.url(),{onSuccess:()=>{T.fire({title:"Success!",text:"User created successfully.",icon:"success",position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,toast:!0}),m(),x("success")},onError:()=>{T.fire({title:"Error!",text:"Failed to create user. Please try again.",icon:"error",position:"top-end",showConfirmButton:!1,timer:4e3,timerProgressBar:!0,toast:!0})}})};return ne(()=>a.isOpen,Q=>{Q&&(a.user?(o.name=a.user.name,o.username=a.user.username||"",o.email=a.user.email,o.mobile=a.user.mobile||"",o.password="",o.password_confirmation="",o.subscription_start_date=a.user.subscription_start_date?new Date(a.user.subscription_start_date).toISOString().split("T")[0]:"",o.subscription_end_date=a.user.subscription_end_date?new Date(a.user.subscription_end_date).toISOString().split("T")[0]:"",o.role="admin",o.template_limit=a.user.template_limit||-1):(o.reset(),o.role="admin",o.template_limit=-1),o.clearErrors())}),(Q,i)=>Q.isOpen?(d(),y("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center",style:{"background-color":"rgba(0, 0, 0, 0.4)"},onClick:z(m,["self"])},[t("div",Ae,[t("div",Te,[t("div",je,[t("h2",qe,u(h.value?"Edit User":"Create New User"),1),t("button",{onClick:m,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...i[9]||(i[9]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("form",{onSubmit:z(c,["prevent"]),class:"space-y-6"},[t("div",De,[t("div",Me,[i[10]||(i[10]=t("label",{for:"name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Name * ",-1)),A(t("input",{id:"name","onUpdate:modelValue":i[0]||(i[0]=b=>r(o).name=b),type:"text",required:"",class:_(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":r(o).errors.name}])},null,2),[[q,r(o).name]]),r(o).errors.name?(d(),y("p",Fe,u(r(o).errors.name),1)):k("",!0)]),t("div",Pe,[i[11]||(i[11]=t("label",{for:"username",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Username * ",-1)),A(t("input",{id:"username","onUpdate:modelValue":i[1]||(i[1]=b=>r(o).username=b),type:"text",required:"",class:_(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":r(o).errors.username}])},null,2),[[q,r(o).username]]),r(o).errors.username?(d(),y("p",Qe,u(r(o).errors.username),1)):k("",!0)]),t("div",Ve,[i[12]||(i[12]=t("label",{for:"email",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Email * ",-1)),A(t("input",{id:"email","onUpdate:modelValue":i[2]||(i[2]=b=>r(o).email=b),type:"email",required:"",class:_(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":r(o).errors.email}])},null,2),[[q,r(o).email]]),r(o).errors.email?(d(),y("p",Oe,u(r(o).errors.email),1)):k("",!0)]),t("div",Ne,[i[13]||(i[13]=t("label",{for:"mobile",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Mobile ",-1)),A(t("input",{id:"mobile","onUpdate:modelValue":i[3]||(i[3]=b=>r(o).mobile=b),type:"tel",class:_(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":r(o).errors.mobile}])},null,2),[[q,r(o).mobile]]),r(o).errors.mobile?(d(),y("p",Le,u(r(o).errors.mobile),1)):k("",!0)]),t("div",Ie,[t("label",He," Password "+u(h.value?"(leave blank to keep current)":"*"),1),A(t("input",{id:"password","onUpdate:modelValue":i[4]||(i[4]=b=>r(o).password=b),type:"password",required:!h.value,class:_(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":r(o).errors.password}])},null,10,ze),[[q,r(o).password]]),r(o).errors.password?(d(),y("p",Re,u(r(o).errors.password),1)):k("",!0)]),t("div",Ye,[t("label",Ge," Confirm Password "+u(h.value?"":"*"),1),A(t("input",{id:"password_confirmation","onUpdate:modelValue":i[5]||(i[5]=b=>r(o).password_confirmation=b),type:"password",required:!h.value,class:_(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":r(o).errors.password_confirmation}])},null,10,Ke),[[q,r(o).password_confirmation]]),r(o).errors.password_confirmation?(d(),y("p",Xe,u(r(o).errors.password_confirmation),1)):k("",!0)]),t("div",Je,[i[14]||(i[14]=t("label",{for:"subscription_start_date",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Subscription Start Date * ",-1)),A(t("input",{id:"subscription_start_date","onUpdate:modelValue":i[6]||(i[6]=b=>r(o).subscription_start_date=b),type:"date",required:"",class:_(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":r(o).errors.subscription_start_date}])},null,2),[[q,r(o).subscription_start_date]]),r(o).errors.subscription_start_date?(d(),y("p",We,u(r(o).errors.subscription_start_date),1)):k("",!0)]),t("div",Ze,[i[15]||(i[15]=t("label",{for:"subscription_end_date",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Subscription End Date * ",-1)),A(t("input",{id:"subscription_end_date","onUpdate:modelValue":i[7]||(i[7]=b=>r(o).subscription_end_date=b),type:"date",required:"",class:_(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":r(o).errors.subscription_end_date}])},null,2),[[q,r(o).subscription_end_date]]),r(o).errors.subscription_end_date?(d(),y("p",et,u(r(o).errors.subscription_end_date),1)):k("",!0)]),t("div",tt,[i[17]||(i[17]=t("label",{for:"template_limit",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Template Limit * ",-1)),A(t("select",{id:"template_limit","onUpdate:modelValue":i[8]||(i[8]=b=>r(o).template_limit=b),required:"",class:_(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":r(o).errors.template_limit}])},[...i[16]||(i[16]=[t("option",{value:"-1"},"Unlimited",-1),t("option",{value:"5"},"5 Templates (Demo/Trial)",-1),t("option",{value:"10"},"10 Templates (Basic)",-1),t("option",{value:"25"},"25 Templates (Standard)",-1)])],2),[[de,r(o).template_limit]]),r(o).errors.template_limit?(d(),y("p",rt,u(r(o).errors.template_limit),1)):k("",!0)])]),t("div",st,[t("button",{type:"button",onClick:m,class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500"}," Cancel "),t("button",{type:"submit",disabled:r(o).processing,class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50"},u(r(o).processing?h.value?"Updating...":"Creating...":h.value?"Update User":"Create User"),9,ot)])],32)])])])):k("",!0)}}),it={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto"},lt={class:"p-6"},nt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},dt={class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6"},ut={class:"space-y-4"},mt={class:"text-sm text-gray-900 dark:text-white"},ct={class:"text-sm text-gray-900 dark:text-white"},pt={class:"text-sm text-gray-900 dark:text-white"},ft={class:"text-sm text-gray-900 dark:text-white"},yt={class:"mt-1"},gt={class:"text-sm text-gray-900 dark:text-white"},bt={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"},_t={class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6"},xt={class:"space-y-4"},ht={key:0},kt={class:"text-sm text-gray-900 dark:text-white"},wt={key:1},vt={class:"text-sm text-gray-900 dark:text-white"},$t={key:2},Ct=j({__name:"ViewUserModal",props:{isOpen:{type:Boolean},user:{}},emits:["close"],setup(e,{emit:s}){const a=s,x=()=>{a("close")},h=m=>new Date(m).toLocaleDateString(),o=m=>{switch(m){case"super_admin":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"admin":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"user":return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};return(m,c)=>m.isOpen&&m.user?(d(),y("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center",style:{"background-color":"rgba(0, 0, 0, 0.4)"},onClick:z(x,["self"])},[t("div",it,[t("div",lt,[t("div",{class:"flex items-center justify-between mb-6"},[c[1]||(c[1]=t("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"User Details",-1)),t("button",{onClick:x,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...c[0]||(c[0]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",nt,[t("div",dt,[c[8]||(c[8]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Basic Information",-1)),t("div",ut,[t("div",null,[c[2]||(c[2]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Name",-1)),t("p",mt,u(m.user.name),1)]),t("div",null,[c[3]||(c[3]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Email",-1)),t("p",ct,u(m.user.email),1)]),t("div",null,[c[4]||(c[4]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Username",-1)),t("p",pt,u(m.user.username||"Not set"),1)]),t("div",null,[c[5]||(c[5]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Mobile",-1)),t("p",ft,u(m.user.mobile||"Not set"),1)]),t("div",null,[c[6]||(c[6]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Role",-1)),t("div",yt,[t("span",{class:_(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",o(m.user.role)])},u(m.user.role.replace("_"," ").toUpperCase()),3)])]),t("div",null,[c[7]||(c[7]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Templates Created",-1)),t("p",gt,[t("span",bt,u(m.user.templates_count||0)+" templates ",1)])])])]),t("div",_t,[c[12]||(c[12]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Subscription Information",-1)),t("div",xt,[m.user.subscription_start_date&&m.user.subscription_end_date?(d(),y("div",ht,[c[9]||(c[9]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Start Date",-1)),t("p",kt,u(h(m.user.subscription_start_date)),1)])):k("",!0),m.user.subscription_start_date&&m.user.subscription_end_date?(d(),y("div",wt,[c[10]||(c[10]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"End Date",-1)),t("p",vt,u(h(m.user.subscription_end_date)),1)])):k("",!0),!m.user.subscription_start_date||!m.user.subscription_end_date?(d(),y("div",$t,[...c[11]||(c[11]=[t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"No subscription information available",-1)])])):k("",!0)])])])])])])):k("",!0)}}),St={class:"space-y-6 p-5"},Et={class:"flex items-center justify-between"},Ut={class:"rounded-md border"},Bt={class:"flex items-center gap-3"},At={class:"flex items-center gap-2"},Tt=["onClick","disabled","title"],jt={key:1,class:"text-xs text-gray-400 italic"},qt={class:"text-sm"},Dt={key:0,class:"font-medium text-green-600"},Mt={key:1,class:"font-medium"},Ft={key:2,class:"text-muted-foreground"},Pt={key:0,class:"text-sm"},Qt={key:1,class:"text-muted-foreground"},Vt={key:0,class:"flex items-center justify-between"},Ot={class:"text-sm text-muted-foreground"},or=j({__name:"Index",props:{users:{}},setup(e){const s=O(!1),a=O(!1),x=O(null),h=O(new Set),o=[{title:"User Management",href:"/users"}],m=g=>new Date(g).toLocaleDateString(),c=()=>{x.value=null,s.value=!0},Q=g=>{x.value=g,s.value=!0},i=g=>{x.value=g,a.value=!0},b=g=>{T.fire({title:"Are you sure?",text:`You are about to delete ${g.name}. This action cannot be undone!`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(p=>{p.isConfirmed&&W.delete(R.destroy.url(g.id),{onSuccess:()=>{T.fire({title:"Deleted!",text:"User has been deleted successfully.",icon:"success",position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,toast:!0})},onError:()=>{T.fire({title:"Error!",text:"Failed to delete user. Please try again.",icon:"error",position:"top-end",showConfirmButton:!1,timer:4e3,timerProgressBar:!0,toast:!0})}})})},J=()=>{s.value=!1,a.value=!1,x.value=null},oe=()=>{W.reload()},ae=async g=>{h.value.add(g.id);try{const n=await(await fetch(`/users/${g.id}/toggle-status`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}})).json();if(n.success)g.is_active=n.is_active,T.fire({title:"Success!",text:n.message,icon:"success",position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,toast:!0});else throw new Error(n.error||"Failed to toggle user status")}catch(p){T.fire({title:"Error!",text:p instanceof Error?p.message:"Failed to toggle user status",icon:"error",position:"top-end",showConfirmButton:!1,timer:4e3,timerProgressBar:!0,toast:!0})}finally{h.value.delete(g.id)}};return(g,p)=>(d(),N(be,{breadcrumbs:o},{default:f(()=>[l(r(ue),{title:"User Management"}),t("div",St,[t("div",Et,[p[1]||(p[1]=t("div",null,[t("h1",{class:"text-2xl font-bold tracking-tight"},"User Management"),t("p",{class:"text-muted-foreground"}," Manage users and their roles in the system. ")],-1)),l(r(Z),{onClick:c},{default:f(()=>[l(r(_e),{class:"mr-2 h-4 w-4"}),p[0]||(p[0]=w(" Add User ",-1))]),_:1})]),t("div",Ut,[l(r(Ee),null,{default:f(()=>[l(r(Be),null,{default:f(()=>[l(r(ee),null,{default:f(()=>[l(r(M),null,{default:f(()=>[...p[2]||(p[2]=[w("Name",-1)])]),_:1}),l(r(M),null,{default:f(()=>[...p[3]||(p[3]=[w("Email",-1)])]),_:1}),l(r(M),null,{default:f(()=>[...p[4]||(p[4]=[w("Username",-1)])]),_:1}),l(r(M),null,{default:f(()=>[...p[5]||(p[5]=[w("Status",-1)])]),_:1}),l(r(M),null,{default:f(()=>[...p[6]||(p[6]=[w("Template Limit",-1)])]),_:1}),l(r(M),null,{default:f(()=>[...p[7]||(p[7]=[w("Subscription",-1)])]),_:1}),l(r(M),null,{default:f(()=>[...p[8]||(p[8]=[w("Templates",-1)])]),_:1}),l(r(M),{class:"w-[50px]"})]),_:1})]),_:1}),l(r(Ue),null,{default:f(()=>[(d(!0),y(me,null,ce(g.users.data,n=>(d(),N(r(ee),{key:n.id},{default:f(()=>[l(r(D),{class:"font-medium"},{default:f(()=>[w(u(n.name),1)]),_:2},1024),l(r(D),null,{default:f(()=>[w(u(n.email),1)]),_:2},1024),l(r(D),null,{default:f(()=>[w(u(n.username||"-"),1)]),_:2},1024),l(r(D),null,{default:f(()=>[t("div",Bt,[t("div",At,[t("div",{class:_(["w-2 h-2 rounded-full",n.is_active?"bg-green-500":"bg-gray-400"])},null,2),t("span",{class:_(["text-sm font-medium",n.is_active?"text-green-700":"text-gray-500"])},u(n.is_active?"Active":"Inactive"),3)]),n.role!=="super_admin"?(d(),y("button",{key:0,onClick:I=>ae(n),disabled:h.value.has(n.id),title:n.is_active?"Click to deactivate account":"Click to activate account",class:_(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",n.is_active?"bg-indigo-600":"bg-gray-200",h.value.has(n.id)?"opacity-50 cursor-not-allowed":"cursor-pointer hover:opacity-80"])},[h.value.has(n.id)?(d(),N(r(he),{key:1,class:"h-3 w-3 animate-spin text-white mx-auto"})):(d(),y("span",{key:0,class:_(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",n.is_active?"translate-x-6":"translate-x-1"])},null,2))],10,Tt)):(d(),y("span",jt," Super Admin "))])]),_:2},1024),l(r(D),null,{default:f(()=>[t("div",qt,[n.template_limit===-1?(d(),y("div",Dt," Unlimited ")):(d(),y("div",Mt,u(n.template_limit)+" templates ",1)),n.template_limit!==-1?(d(),y("div",Ft,u(n.templates_count||0)+"/"+u(n.template_limit)+" used ",1)):k("",!0)])]),_:2},1024),l(r(D),null,{default:f(()=>[n.subscription_start_date&&n.subscription_end_date?(d(),y("div",Pt,[t("div",null,"Start: "+u(m(n.subscription_start_date)),1),t("div",null,"End: "+u(m(n.subscription_end_date)),1)])):(d(),y("span",Qt,"No subscription"))]),_:2},1024),l(r(D),null,{default:f(()=>[l(r(pe),{variant:"secondary"},{default:f(()=>[w(u(n.templates_count||0)+" templates ",1)]),_:2},1024)]),_:2},1024),l(r(D),null,{default:f(()=>[l(r(fe),null,{default:f(()=>[l(r(ye),{"as-child":""},{default:f(()=>[l(r(Z),{variant:"ghost",class:"h-8 w-8 p-0"},{default:f(()=>[l(r($e),{class:"h-4 w-4"})]),_:1})]),_:1}),l(r(ge),{align:"end"},{default:f(()=>[l(r(H),{onClick:I=>i(n)},{default:f(()=>[l(r(we),{class:"mr-2 h-4 w-4"}),p[9]||(p[9]=w(" View ",-1))]),_:1},8,["onClick"]),l(r(H),{onClick:I=>Q(n)},{default:f(()=>[l(r(xe),{class:"mr-2 h-4 w-4"}),p[10]||(p[10]=w(" Edit ",-1))]),_:1},8,["onClick"]),n.role!=="super_admin"?(d(),N(r(H),{key:0,onClick:I=>b(n),class:"text-destructive"},{default:f(()=>[l(r(ve),{class:"mr-2 h-4 w-4"}),p[11]||(p[11]=w(" Delete ",-1))]),_:1},8,["onClick"])):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),g.users.last_page>1?(d(),y("div",Vt,[t("div",Ot," Showing "+u((g.users.current_page-1)*g.users.per_page+1)+" to "+u(Math.min(g.users.current_page*g.users.per_page,g.users.total))+" of "+u(g.users.total)+" results ",1)])):k("",!0)]),l(at,{"is-open":s.value,user:x.value,onClose:J,onSuccess:oe},null,8,["is-open","user"]),l(Ct,{"is-open":a.value,user:x.value,onClose:J},null,8,["is-open","user"])]),_:1}))}});export{or as default};
