import{d as Q,a as c,o as i,f as t,v as z,y as _,e as s,c as ee,G as Ce,A as Se,g as x,t as p,x as te,D as T,E as F,H as se,p as M,i as E,w as g,b as m,h as Ue,k as h,z as O,F as Ae,r as Ee,m as ce}from"./app-D3jGPDSM.js";import{_ as J}from"./index-CfBtgfOD.js";import{_ as Te}from"./index-CyBuzWvt.js";import{c as R}from"./useAssets-BII9lIPZ.js";import{X as Be,a as De,b as qe,c as je,d as W,_ as Me}from"./AppLayout.vue_vue_type_script_setup_true_lang-Cmvob7pI.js";import{q as H,a as Y}from"./index-CtZEdrDG.js";import{S as V}from"./sweetalert2.esm.all-Bj_ZQUAw.js";import{P as Le,S as Fe}from"./square-pen-aa9e9KEM.js";import{c as X}from"./createLucideIcon-DBKUHMA8.js";import{L as Ve}from"./loader-circle-BuZBlhPt.js";import{E as Qe}from"./eye-BhHtnltT.js";import{T as Pe}from"./trash-2-Bc1cfQJg.js";import"./useForwardExpose-CJEcDG7R.js";import"./VisuallyHidden-DwBy5b6p.js";import"./RovingFocusGroup-CVuo0Pm3.js";import"./image-BbreOpHY.js";import"./useArrowNavigation-C6Y-ieo6.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=X("ArrowDownIcon",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=X("ArrowUpDownIcon",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=X("ArrowUpIcon",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=X("EllipsisIcon",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=X("SearchIcon",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Re={class:"relative w-full overflow-auto"},Xe={class:"w-full caption-bottom text-sm"},Ye=Q({__name:"Table",props:{class:{}},setup(e){return(o,u)=>(i(),c("div",Re,[t("table",Xe,[z(o.$slots,"default")])]))}}),Ge=Q({__name:"TableBody",props:{class:{}},setup(e){const o=e;return(u,w)=>(i(),c("tbody",{class:_(s(R)("",o.class))},[z(u.$slots,"default")],2))}}),L=Q({__name:"TableCell",props:{class:{}},setup(e){const o=e;return(u,w)=>(i(),c("td",{class:_(s(R)("p-4 align-middle [&:has([role=checkbox])]:pr-0",o.class))},[z(u.$slots,"default")],2))}}),P=Q({__name:"TableHead",props:{class:{}},setup(e){const o=e;return(u,w)=>(i(),c("th",{class:_(s(R)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",o.class))},[z(u.$slots,"default")],2))}}),Ke=Q({__name:"TableHeader",props:{class:{}},setup(e){const o=e;return(u,w)=>(i(),c("thead",{class:_(s(R)("",o.class))},[z(u.$slots,"default")],2))}}),Z=Q({__name:"TableRow",props:{class:{}},setup(e){const o=e;return(u,w)=>(i(),c("tr",{class:_(s(R)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",o.class))},[z(u.$slots,"default")],2))}}),C=e=>({url:C.url(e),method:"get"});C.definition={methods:["get","head"],url:"/users"};C.url=e=>C.definition.url+H(e);C.get=e=>({url:C.url(e),method:"get"});C.head=e=>({url:C.url(e),method:"head"});const oe=e=>({action:C.url(e),method:"get"});oe.get=e=>({action:C.url(e),method:"get"});oe.head=e=>({action:C.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});C.form=oe;const S=e=>({url:S.url(e),method:"get"});S.definition={methods:["get","head"],url:"/users/create"};S.url=e=>S.definition.url+H(e);S.get=e=>({url:S.url(e),method:"get"});S.head=e=>({url:S.url(e),method:"head"});const ae=e=>({action:S.url(e),method:"get"});ae.get=e=>({action:S.url(e),method:"get"});ae.head=e=>({action:S.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});S.form=ae;const D=e=>({url:D.url(e),method:"post"});D.definition={methods:["post"],url:"/users"};D.url=e=>D.definition.url+H(e);D.post=e=>({url:D.url(e),method:"post"});const pe=e=>({action:D.url(e),method:"post"});pe.post=e=>({action:D.url(e),method:"post"});D.form=pe;const U=(e,o)=>({url:U.url(e,o),method:"get"});U.definition={methods:["get","head"],url:"/users/{user}"};U.url=(e,o)=>{(typeof e=="string"||typeof e=="number")&&(e={user:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={user:e.id}),Array.isArray(e)&&(e={user:e[0]}),e=Y(e);const u={user:typeof e.user=="object"?e.user.id:e.user};return U.definition.url.replace("{user}",u.user.toString()).replace(/\/+$/,"")+H(o)};U.get=(e,o)=>({url:U.url(e,o),method:"get"});U.head=(e,o)=>({url:U.url(e,o),method:"head"});const le=(e,o)=>({action:U.url(e,o),method:"get"});le.get=(e,o)=>({action:U.url(e,o),method:"get"});le.head=(e,o)=>({action:U.url(e,{[o?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...o?.query??o?.mergeQuery??{}}}),method:"get"});U.form=le;const A=(e,o)=>({url:A.url(e,o),method:"get"});A.definition={methods:["get","head"],url:"/users/{user}/edit"};A.url=(e,o)=>{(typeof e=="string"||typeof e=="number")&&(e={user:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={user:e.id}),Array.isArray(e)&&(e={user:e[0]}),e=Y(e);const u={user:typeof e.user=="object"?e.user.id:e.user};return A.definition.url.replace("{user}",u.user.toString()).replace(/\/+$/,"")+H(o)};A.get=(e,o)=>({url:A.url(e,o),method:"get"});A.head=(e,o)=>({url:A.url(e,o),method:"head"});const ie=(e,o)=>({action:A.url(e,o),method:"get"});ie.get=(e,o)=>({action:A.url(e,o),method:"get"});ie.head=(e,o)=>({action:A.url(e,{[o?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...o?.query??o?.mergeQuery??{}}}),method:"get"});A.form=ie;const q=(e,o)=>({url:q.url(e,o),method:"post"});q.definition={methods:["post"],url:"/users/{user}"};q.url=(e,o)=>{(typeof e=="string"||typeof e=="number")&&(e={user:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={user:e.id}),Array.isArray(e)&&(e={user:e[0]}),e=Y(e);const u={user:typeof e.user=="object"?e.user.id:e.user};return q.definition.url.replace("{user}",u.user.toString()).replace(/\/+$/,"")+H(o)};q.post=(e,o)=>({url:q.url(e,o),method:"post"});const fe=(e,o)=>({action:q.url(e,o),method:"post"});fe.post=(e,o)=>({action:q.url(e,o),method:"post"});q.form=fe;const j=(e,o)=>({url:j.url(e,o),method:"delete"});j.definition={methods:["delete"],url:"/users/{user}"};j.url=(e,o)=>{(typeof e=="string"||typeof e=="number")&&(e={user:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={user:e.id}),Array.isArray(e)&&(e={user:e[0]}),e=Y(e);const u={user:typeof e.user=="object"?e.user.id:e.user};return j.definition.url.replace("{user}",u.user.toString()).replace(/\/+$/,"")+H(o)};j.delete=(e,o)=>({url:j.url(e,o),method:"delete"});const ye=(e,o)=>({action:j.url(e,{[o?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...o?.query??o?.mergeQuery??{}}}),method:"post"});ye.delete=(e,o)=>({action:j.url(e,{[o?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...o?.query??o?.mergeQuery??{}}}),method:"post"});j.form=ye;const re={index:Object.assign(C,C),create:Object.assign(S,S),store:Object.assign(D,D),show:Object.assign(U,U),edit:Object.assign(A,A),update:Object.assign(q,q),destroy:Object.assign(j,j)},Je={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},We={class:"p-6"},Ze={class:"flex items-center justify-between mb-6"},et={class:"text-2xl font-bold text-gray-900 dark:text-white"},tt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},st={class:"space-y-2"},rt={key:0,class:"text-sm text-red-500"},ot={class:"space-y-2"},at={key:0,class:"text-sm text-red-500"},lt={class:"space-y-2"},it={key:0,class:"text-sm text-red-500"},nt={class:"space-y-2"},dt={key:0,class:"text-sm text-red-500"},ut={class:"space-y-2"},mt={for:"password",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},ct=["required"],pt={key:0,class:"text-sm text-red-500"},ft={class:"space-y-2"},yt={for:"password_confirmation",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},gt=["required"],bt={key:0,class:"text-sm text-red-500"},xt={class:"space-y-2"},_t={key:0,class:"text-sm text-red-500"},vt={class:"space-y-2"},ht={key:0,class:"text-sm text-red-500"},kt={class:"space-y-2"},wt={key:0,class:"text-sm text-red-500"},$t={class:"flex justify-end gap-4 pt-6 border-t border-gray-200 dark:border-gray-600"},Ct=["disabled"],St=Q({__name:"UserFormModal",props:{isOpen:{type:Boolean},user:{}},emits:["close","success"],setup(e,{emit:o}){const u=e,w=o,v=ee(()=>!!u.user),a=Ce({name:"",username:"",email:"",mobile:"",password:"",password_confirmation:"",subscription_start_date:"",subscription_end_date:"",role:"admin",template_limit:-1}),f=()=>{a.reset(),a.clearErrors(),w("close")},y=()=>{v.value&&u.user?a.post(re.update.url(u.user.id),{onSuccess:()=>{V.fire({title:"Success!",text:"User updated successfully.",icon:"success",position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,toast:!0}),f(),w("success")},onError:()=>{V.fire({title:"Error!",text:"Failed to update user. Please try again.",icon:"error",position:"top-end",showConfirmButton:!1,timer:4e3,timerProgressBar:!0,toast:!0})}}):a.post(re.store.url(),{onSuccess:()=>{V.fire({title:"Success!",text:"User created successfully.",icon:"success",position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,toast:!0}),f(),w("success")},onError:()=>{V.fire({title:"Error!",text:"Failed to create user. Please try again.",icon:"error",position:"top-end",showConfirmButton:!1,timer:4e3,timerProgressBar:!0,toast:!0})}})};return Se(()=>u.isOpen,k=>{k&&(u.user?(a.name=u.user.name,a.username=u.user.username||"",a.email=u.user.email,a.mobile=u.user.mobile||"",a.password="",a.password_confirmation="",a.subscription_start_date=u.user.subscription_start_date?new Date(u.user.subscription_start_date).toISOString().split("T")[0]:"",a.subscription_end_date=u.user.subscription_end_date?new Date(u.user.subscription_end_date).toISOString().split("T")[0]:"",a.role="admin",a.template_limit=u.user.template_limit||-1):(a.reset(),a.role="admin",a.template_limit=-1),a.clearErrors())}),(k,n)=>k.isOpen?(i(),c("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center",style:{"background-color":"rgba(0, 0, 0, 0.4)"},onClick:te(f,["self"])},[t("div",Je,[t("div",We,[t("div",Ze,[t("h2",et,p(v.value?"Edit User":"Create New User"),1),t("button",{onClick:f,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...n[9]||(n[9]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("form",{onSubmit:te(y,["prevent"]),class:"space-y-6"},[t("div",tt,[t("div",st,[n[10]||(n[10]=t("label",{for:"name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Name * ",-1)),T(t("input",{id:"name","onUpdate:modelValue":n[0]||(n[0]=b=>s(a).name=b),type:"text",required:"",class:_(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":s(a).errors.name}])},null,2),[[F,s(a).name]]),s(a).errors.name?(i(),c("p",rt,p(s(a).errors.name),1)):x("",!0)]),t("div",ot,[n[11]||(n[11]=t("label",{for:"username",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Username * ",-1)),T(t("input",{id:"username","onUpdate:modelValue":n[1]||(n[1]=b=>s(a).username=b),type:"text",required:"",class:_(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":s(a).errors.username}])},null,2),[[F,s(a).username]]),s(a).errors.username?(i(),c("p",at,p(s(a).errors.username),1)):x("",!0)]),t("div",lt,[n[12]||(n[12]=t("label",{for:"email",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Email * ",-1)),T(t("input",{id:"email","onUpdate:modelValue":n[2]||(n[2]=b=>s(a).email=b),type:"email",required:"",class:_(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":s(a).errors.email}])},null,2),[[F,s(a).email]]),s(a).errors.email?(i(),c("p",it,p(s(a).errors.email),1)):x("",!0)]),t("div",nt,[n[13]||(n[13]=t("label",{for:"mobile",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Mobile ",-1)),T(t("input",{id:"mobile","onUpdate:modelValue":n[3]||(n[3]=b=>s(a).mobile=b),type:"tel",class:_(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":s(a).errors.mobile}])},null,2),[[F,s(a).mobile]]),s(a).errors.mobile?(i(),c("p",dt,p(s(a).errors.mobile),1)):x("",!0)]),t("div",ut,[t("label",mt," Password "+p(v.value?"(leave blank to keep current)":"*"),1),T(t("input",{id:"password","onUpdate:modelValue":n[4]||(n[4]=b=>s(a).password=b),type:"password",required:!v.value,class:_(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":s(a).errors.password}])},null,10,ct),[[F,s(a).password]]),s(a).errors.password?(i(),c("p",pt,p(s(a).errors.password),1)):x("",!0)]),t("div",ft,[t("label",yt," Confirm Password "+p(v.value?"":"*"),1),T(t("input",{id:"password_confirmation","onUpdate:modelValue":n[5]||(n[5]=b=>s(a).password_confirmation=b),type:"password",required:!v.value,class:_(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":s(a).errors.password_confirmation}])},null,10,gt),[[F,s(a).password_confirmation]]),s(a).errors.password_confirmation?(i(),c("p",bt,p(s(a).errors.password_confirmation),1)):x("",!0)]),t("div",xt,[n[14]||(n[14]=t("label",{for:"subscription_start_date",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Subscription Start Date * ",-1)),T(t("input",{id:"subscription_start_date","onUpdate:modelValue":n[6]||(n[6]=b=>s(a).subscription_start_date=b),type:"date",required:"",class:_(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":s(a).errors.subscription_start_date}])},null,2),[[F,s(a).subscription_start_date]]),s(a).errors.subscription_start_date?(i(),c("p",_t,p(s(a).errors.subscription_start_date),1)):x("",!0)]),t("div",vt,[n[15]||(n[15]=t("label",{for:"subscription_end_date",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Subscription End Date * ",-1)),T(t("input",{id:"subscription_end_date","onUpdate:modelValue":n[7]||(n[7]=b=>s(a).subscription_end_date=b),type:"date",required:"",class:_(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":s(a).errors.subscription_end_date}])},null,2),[[F,s(a).subscription_end_date]]),s(a).errors.subscription_end_date?(i(),c("p",ht,p(s(a).errors.subscription_end_date),1)):x("",!0)]),t("div",kt,[n[17]||(n[17]=t("label",{for:"template_limit",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Template Limit * ",-1)),T(t("select",{id:"template_limit","onUpdate:modelValue":n[8]||(n[8]=b=>s(a).template_limit=b),required:"",class:_(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":s(a).errors.template_limit}])},[...n[16]||(n[16]=[t("option",{value:"-1"},"Unlimited",-1),t("option",{value:"5"},"5 Templates (Demo/Trial)",-1),t("option",{value:"10"},"10 Templates (Basic)",-1),t("option",{value:"25"},"25 Templates (Standard)",-1)])],2),[[se,s(a).template_limit]]),s(a).errors.template_limit?(i(),c("p",wt,p(s(a).errors.template_limit),1)):x("",!0)])]),t("div",$t,[t("button",{type:"button",onClick:f,class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500"}," Cancel "),t("button",{type:"submit",disabled:s(a).processing,class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50"},p(s(a).processing?v.value?"Updating...":"Creating...":v.value?"Update User":"Create User"),9,Ct)])],32)])])])):x("",!0)}}),Ut={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto"},At={class:"p-6"},Et={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Tt={class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6"},Bt={class:"space-y-4"},Dt={class:"text-sm text-gray-900 dark:text-white"},qt={class:"text-sm text-gray-900 dark:text-white"},jt={class:"text-sm text-gray-900 dark:text-white"},Mt={class:"text-sm text-gray-900 dark:text-white"},Lt={class:"mt-1"},Ft={class:"text-sm text-gray-900 dark:text-white"},Vt={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"},Qt={class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6"},Pt={class:"space-y-4"},Nt={key:0},It={class:"text-sm text-gray-900 dark:text-white"},Ot={key:1},Ht={class:"text-sm text-gray-900 dark:text-white"},zt={key:2},Rt=Q({__name:"ViewUserModal",props:{isOpen:{type:Boolean},user:{}},emits:["close"],setup(e,{emit:o}){const u=o,w=()=>{u("close")},v=f=>new Date(f).toLocaleDateString(),a=f=>{switch(f){case"super_admin":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"admin":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"user":return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};return(f,y)=>f.isOpen&&f.user?(i(),c("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center",style:{"background-color":"rgba(0, 0, 0, 0.4)"},onClick:te(w,["self"])},[t("div",Ut,[t("div",At,[t("div",{class:"flex items-center justify-between mb-6"},[y[1]||(y[1]=t("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"User Details",-1)),t("button",{onClick:w,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...y[0]||(y[0]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",Et,[t("div",Tt,[y[8]||(y[8]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Basic Information",-1)),t("div",Bt,[t("div",null,[y[2]||(y[2]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Name",-1)),t("p",Dt,p(f.user.name),1)]),t("div",null,[y[3]||(y[3]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Email",-1)),t("p",qt,p(f.user.email),1)]),t("div",null,[y[4]||(y[4]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Username",-1)),t("p",jt,p(f.user.username||"Not set"),1)]),t("div",null,[y[5]||(y[5]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Mobile",-1)),t("p",Mt,p(f.user.mobile||"Not set"),1)]),t("div",null,[y[6]||(y[6]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Role",-1)),t("div",Lt,[t("span",{class:_(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",a(f.user.role)])},p(f.user.role.replace("_"," ").toUpperCase()),3)])]),t("div",null,[y[7]||(y[7]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Templates Created",-1)),t("p",Ft,[t("span",Vt,p(f.user.templates_count||0)+" templates ",1)])])])]),t("div",Qt,[y[12]||(y[12]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Subscription Information",-1)),t("div",Pt,[f.user.subscription_start_date&&f.user.subscription_end_date?(i(),c("div",Nt,[y[9]||(y[9]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Start Date",-1)),t("p",It,p(v(f.user.subscription_start_date)),1)])):x("",!0),f.user.subscription_start_date&&f.user.subscription_end_date?(i(),c("div",Ot,[y[10]||(y[10]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"End Date",-1)),t("p",Ht,p(v(f.user.subscription_end_date)),1)])):x("",!0),!f.user.subscription_start_date||!f.user.subscription_end_date?(i(),c("div",zt,[...y[11]||(y[11]=[t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"No subscription information available",-1)])])):x("",!0)])])])])])])):x("",!0)}}),Xt={class:"space-y-6 p-5"},Yt={class:"flex items-center justify-between"},Gt={class:"space-y-4"},Kt={class:"relative"},Jt={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Wt={class:"flex items-center gap-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg"},Zt={class:"flex items-center gap-2"},es={class:"flex items-center gap-2"},ts={class:"rounded-md border"},ss={class:"flex flex-col items-center gap-2"},rs={class:"text-sm"},os={key:0},as={key:0},ls={key:1},is={key:1},ns={class:"flex items-center gap-3"},ds={class:"flex items-center gap-2"},us=["onClick","disabled","title"],ms={key:1,class:"text-xs text-gray-400 italic"},cs={class:"text-sm"},ps={key:0,class:"font-medium text-green-600"},fs={key:1,class:"font-medium"},ys={key:2,class:"text-muted-foreground"},gs={key:0,class:"text-sm"},bs={key:1,class:"text-muted-foreground"},xs={class:"flex items-center justify-between"},_s={class:"text-sm text-muted-foreground"},vs={key:0},hs={class:"ml-2 text-blue-600"},ks={key:0},ws={key:1},$s={key:1},Is=Q({__name:"Index",props:{users:{}},setup(e){const o=e,u=M(!1),w=M(!1),v=M(null),a=M(new Set),f=M(""),y=M(""),k=M(""),n=M(""),b=M("asc"),ge=[{title:"User Management",href:"/users"}],G=ee(()=>f.value!==""||y.value!==""||k.value!==""||n.value!==""),K=ee(()=>{let d=o.users.data;if(k.value.trim()){const r=k.value.toLowerCase().trim();d=d.filter(l=>{const $=l.name?.toLowerCase()||"",B=l.username?.toLowerCase()||"",we=l.email?.toLowerCase()||"",$e=l.mobile?.toLowerCase()||"";return $.includes(r)||B.includes(r)||we.includes(r)||$e.includes(r)})}if(f.value==="unlimited")d=d.filter(r=>r.template_limit===-1);else if(f.value==="limited")d=d.filter(r=>r.template_limit!==-1);else if(f.value&&["5","10","25"].includes(f.value)){const r=parseInt(f.value);d=d.filter(l=>l.template_limit===r)}return y.value==="active"?d=d.filter(r=>r.is_active):y.value==="inactive"&&(d=d.filter(r=>!r.is_active)),n.value&&d.sort((r,l)=>{let $,B;switch(n.value){case"name":$=r.name?.toLowerCase()||"",B=l.name?.toLowerCase()||"";break;case"email":$=r.email?.toLowerCase()||"",B=l.email?.toLowerCase()||"";break;case"username":$=r.username?.toLowerCase()||"",B=l.username?.toLowerCase()||"";break;case"status":$=r.is_active?1:0,B=l.is_active?1:0;break;case"template_limit":$=r.template_limit,B=l.template_limit;break;case"expiry_date":$=r.subscription_end_date?new Date(r.subscription_end_date).getTime():0,B=l.subscription_end_date?new Date(l.subscription_end_date).getTime():0;break;case"templates_count":$=r.templates_count||0,B=l.templates_count||0;break;default:return 0}return b.value==="asc"?$>B?1:-1:$<B?1:-1}),d}),ne=d=>new Date(d).toLocaleDateString(),be=()=>{v.value=null,u.value=!0},xe=d=>{v.value=d,u.value=!0},_e=d=>{v.value=d,w.value=!0},ve=d=>{V.fire({title:"Are you sure?",text:`You are about to delete ${d.name}. This action cannot be undone!`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(r=>{r.isConfirmed&&ce.delete(re.destroy.url(d.id),{onSuccess:()=>{V.fire({title:"Deleted!",text:"User has been deleted successfully.",icon:"success",position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,toast:!0})},onError:()=>{V.fire({title:"Error!",text:"Failed to delete user. Please try again.",icon:"error",position:"top-end",showConfirmButton:!1,timer:4e3,timerProgressBar:!0,toast:!0})}})})},de=()=>{u.value=!1,w.value=!1,v.value=null},he=()=>{ce.reload()},ke=async d=>{a.value.add(d.id);try{const l=await(await fetch(`/users/${d.id}/toggle-status`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}})).json();if(l.success)d.is_active=l.is_active,V.fire({title:"Success!",text:l.message,icon:"success",position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,toast:!0});else throw new Error(l.error||"Failed to toggle user status")}catch(r){V.fire({title:"Error!",text:r instanceof Error?r.message:"Failed to toggle user status",icon:"error",position:"top-end",showConfirmButton:!1,timer:4e3,timerProgressBar:!0,toast:!0})}finally{a.value.delete(d.id)}},ue=()=>{},me=()=>{f.value="",y.value="",k.value="",n.value="",b.value="asc"},N=d=>{n.value===d?b.value=b.value==="asc"?"desc":"asc":(n.value=d,b.value="asc")},I=d=>n.value!==d?Ie:b.value==="asc"?Oe:Ne;return(d,r)=>(i(),E(Me,{breadcrumbs:ge},{default:g(()=>[m(s(Ue),{title:"User Management"}),t("div",Xt,[t("div",Yt,[r[12]||(r[12]=t("div",null,[t("h1",{class:"text-2xl font-bold tracking-tight"},"User Management"),t("p",{class:"text-muted-foreground"}," Manage users and their roles in the system. ")],-1)),m(s(J),{onClick:be},{default:g(()=>[m(s(Le),{class:"mr-2 h-4 w-4"}),r[11]||(r[11]=h(" Add User ",-1))]),_:1})]),t("div",Gt,[t("div",Kt,[t("div",Jt,[m(s(ze),{class:"h-4 w-4 text-gray-400"})]),T(t("input",{"onUpdate:modelValue":r[0]||(r[0]=l=>k.value=l),type:"text",placeholder:"Search by name, username, email, or mobile...",class:"w-full pl-10 pr-10 py-3 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"},null,512),[[F,k.value]]),k.value?(i(),c("button",{key:0,onClick:r[1]||(r[1]=l=>k.value=""),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[m(s(Be),{class:"h-4 w-4"})])):x("",!0)]),t("div",Wt,[t("div",Zt,[r[14]||(r[14]=t("label",{for:"template-limit-filter",class:"text-sm font-medium text-gray-700 dark:text-gray-300"}," Template Limit: ",-1)),T(t("select",{id:"template-limit-filter","onUpdate:modelValue":r[2]||(r[2]=l=>f.value=l),onChange:ue,class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm"},[...r[13]||(r[13]=[t("option",{value:""},"All Users",-1),t("option",{value:"unlimited"},"Unlimited Templates",-1),t("option",{value:"limited"},"Limited Templates",-1),t("option",{value:"5"},"5 Templates",-1),t("option",{value:"10"},"10 Templates",-1),t("option",{value:"25"},"25 Templates",-1)])],544),[[se,f.value]])]),t("div",es,[r[16]||(r[16]=t("label",{for:"status-filter",class:"text-sm font-medium text-gray-700 dark:text-gray-300"}," Status: ",-1)),T(t("select",{id:"status-filter","onUpdate:modelValue":r[3]||(r[3]=l=>y.value=l),onChange:ue,class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm"},[...r[15]||(r[15]=[t("option",{value:""},"All Status",-1),t("option",{value:"active"},"Active",-1),t("option",{value:"inactive"},"Inactive",-1)])],544),[[se,y.value]])]),G.value?(i(),E(s(J),{key:0,onClick:me,variant:"outline",size:"sm",class:"ml-auto"},{default:g(()=>[...r[17]||(r[17]=[h(" Clear Filters ",-1)])]),_:1})):x("",!0)])]),t("div",ts,[m(s(Ye),null,{default:g(()=>[m(s(Ke),null,{default:g(()=>[m(s(Z),null,{default:g(()=>[m(s(P),null,{default:g(()=>[t("button",{onClick:r[4]||(r[4]=l=>N("name")),class:"flex items-center gap-1 hover:text-blue-600 dark:hover:text-blue-400"},[r[18]||(r[18]=h(" Name ",-1)),(i(),E(O(I("name")),{class:"h-3 w-3"}))])]),_:1}),m(s(P),null,{default:g(()=>[t("button",{onClick:r[5]||(r[5]=l=>N("email")),class:"flex items-center gap-1 hover:text-blue-600 dark:hover:text-blue-400"},[r[19]||(r[19]=h(" Email ",-1)),(i(),E(O(I("email")),{class:"h-3 w-3"}))])]),_:1}),m(s(P),null,{default:g(()=>[t("button",{onClick:r[6]||(r[6]=l=>N("username")),class:"flex items-center gap-1 hover:text-blue-600 dark:hover:text-blue-400"},[r[20]||(r[20]=h(" Username ",-1)),(i(),E(O(I("username")),{class:"h-3 w-3"}))])]),_:1}),m(s(P),null,{default:g(()=>[t("button",{onClick:r[7]||(r[7]=l=>N("status")),class:"flex items-center gap-1 hover:text-blue-600 dark:hover:text-blue-400"},[r[21]||(r[21]=h(" Status ",-1)),(i(),E(O(I("status")),{class:"h-3 w-3"}))])]),_:1}),m(s(P),null,{default:g(()=>[t("button",{onClick:r[8]||(r[8]=l=>N("template_limit")),class:"flex items-center gap-1 hover:text-blue-600 dark:hover:text-blue-400"},[r[22]||(r[22]=h(" Template Limit ",-1)),(i(),E(O(I("template_limit")),{class:"h-3 w-3"}))])]),_:1}),m(s(P),null,{default:g(()=>[t("button",{onClick:r[9]||(r[9]=l=>N("expiry_date")),class:"flex items-center gap-1 hover:text-blue-600 dark:hover:text-blue-400"},[r[23]||(r[23]=h(" Subscription ",-1)),(i(),E(O(I("expiry_date")),{class:"h-3 w-3"}))])]),_:1}),m(s(P),null,{default:g(()=>[t("button",{onClick:r[10]||(r[10]=l=>N("templates_count")),class:"flex items-center gap-1 hover:text-blue-600 dark:hover:text-blue-400"},[r[24]||(r[24]=h(" Templates ",-1)),(i(),E(O(I("templates_count")),{class:"h-3 w-3"}))])]),_:1}),m(s(P),{class:"w-[50px]"})]),_:1})]),_:1}),m(s(Ge),null,{default:g(()=>[K.value.length===0?(i(),E(s(Z),{key:0},{default:g(()=>[m(s(L),{colspan:"8",class:"text-center py-8 text-muted-foreground"},{default:g(()=>[t("div",ss,[r[27]||(r[27]=t("div",{class:"text-lg font-medium"},"No users found",-1)),t("div",rs,[G.value?(i(),c("span",os,[k.value?(i(),c("span",as,' No users match "'+p(k.value)+'" ',1)):(i(),c("span",ls," No users match your current filters ")),r[25]||(r[25]=t("br",null,null,-1)),r[26]||(r[26]=h(" Try adjusting your search or ",-1)),t("button",{onClick:me,class:"text-blue-600 hover:text-blue-800 underline"}," clear all filters ")])):(i(),c("span",is,"No users available"))])])]),_:1})]),_:1})):x("",!0),(i(!0),c(Ae,null,Ee(K.value,l=>(i(),E(s(Z),{key:l.id},{default:g(()=>[m(s(L),{class:"font-medium"},{default:g(()=>[h(p(l.name),1)]),_:2},1024),m(s(L),null,{default:g(()=>[h(p(l.email),1)]),_:2},1024),m(s(L),null,{default:g(()=>[h(p(l.username||"-"),1)]),_:2},1024),m(s(L),null,{default:g(()=>[t("div",ns,[t("div",ds,[t("div",{class:_(["w-2 h-2 rounded-full",l.is_active?"bg-green-500":"bg-gray-400"])},null,2),t("span",{class:_(["text-sm font-medium",l.is_active?"text-green-700":"text-gray-500"])},p(l.is_active?"Active":"Inactive"),3)]),l.role!=="super_admin"?(i(),c("button",{key:0,onClick:$=>ke(l),disabled:a.value.has(l.id),title:l.is_active?"Click to deactivate account":"Click to activate account",class:_(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",l.is_active?"bg-indigo-600":"bg-gray-200",a.value.has(l.id)?"opacity-50 cursor-not-allowed":"cursor-pointer hover:opacity-80"])},[a.value.has(l.id)?(i(),E(s(Ve),{key:1,class:"h-3 w-3 animate-spin text-white mx-auto"})):(i(),c("span",{key:0,class:_(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",l.is_active?"translate-x-6":"translate-x-1"])},null,2))],10,us)):(i(),c("span",ms," Super Admin "))])]),_:2},1024),m(s(L),null,{default:g(()=>[t("div",cs,[l.template_limit===-1?(i(),c("div",ps," Unlimited ")):(i(),c("div",fs,p(l.template_limit)+" templates ",1)),l.template_limit!==-1?(i(),c("div",ys,p(l.templates_count||0)+"/"+p(l.template_limit)+" used ",1)):x("",!0)])]),_:2},1024),m(s(L),null,{default:g(()=>[l.subscription_start_date&&l.subscription_end_date?(i(),c("div",gs,[t("div",null,"Start: "+p(ne(l.subscription_start_date)),1),t("div",null,"End: "+p(ne(l.subscription_end_date)),1)])):(i(),c("span",bs,"No subscription"))]),_:2},1024),m(s(L),null,{default:g(()=>[m(s(Te),{variant:"secondary"},{default:g(()=>[h(p(l.templates_count||0)+" templates ",1)]),_:2},1024)]),_:2},1024),m(s(L),null,{default:g(()=>[m(s(De),null,{default:g(()=>[m(s(qe),{"as-child":""},{default:g(()=>[m(s(J),{variant:"ghost",class:"h-8 w-8 p-0"},{default:g(()=>[m(s(He),{class:"h-4 w-4"})]),_:1})]),_:1}),m(s(je),{align:"end"},{default:g(()=>[m(s(W),{onClick:$=>_e(l)},{default:g(()=>[m(s(Qe),{class:"mr-2 h-4 w-4"}),r[28]||(r[28]=h(" View ",-1))]),_:1},8,["onClick"]),m(s(W),{onClick:$=>xe(l)},{default:g(()=>[m(s(Fe),{class:"mr-2 h-4 w-4"}),r[29]||(r[29]=h(" Edit ",-1))]),_:1},8,["onClick"]),l.role!=="super_admin"?(i(),E(s(W),{key:0,onClick:$=>ve(l),class:"text-destructive"},{default:g(()=>[m(s(Pe),{class:"mr-2 h-4 w-4"}),r[30]||(r[30]=h(" Delete ",-1))]),_:1},8,["onClick"])):x("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),t("div",xs,[t("div",_s,[G.value?(i(),c("span",vs,[h(" Showing "+p(K.value.length)+" of "+p(d.users.total)+" users ",1),t("span",hs,[k.value?(i(),c("span",ks,'(search: "'+p(k.value)+'")',1)):(i(),c("span",ws,"(filtered)"))])])):(i(),c("span",$s," Showing "+p((d.users.current_page-1)*d.users.per_page+1)+" to "+p(Math.min(d.users.current_page*d.users.per_page,d.users.total))+" of "+p(d.users.total)+" results ",1))])])]),m(St,{"is-open":u.value,user:v.value,onClose:de,onSuccess:he},null,8,["is-open","user"]),m(Rt,{"is-open":w.value,user:v.value,onClose:de},null,8,["is-open","user"])]),_:1}))}});export{Is as default};
