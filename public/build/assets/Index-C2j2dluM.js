import{d as q,a as g,o as d,f as t,v as Q,y as _,e as s,c as Y,G as ye,A as ge,g as h,t as c,x as G,D as U,E as D,H as K,p as V,i as P,w as y,b as m,h as be,k as v,F as _e,r as xe,m as ae}from"./app-BnrwMFsu.js";import{_ as H}from"./index-CjWnCUgJ.js";import{_ as ve}from"./index-C6kPz7f3.js";import{c as L}from"./useAssets-B38zoL0m.js";import{a as he,b as ke,c as we,d as z,_ as $e}from"./AppLayout.vue_vue_type_script_setup_true_lang-D4CDHviO.js";import{q as F,a as N}from"./index-CtZEdrDG.js";import{S as j}from"./sweetalert2.esm.all-Bj_ZQUAw.js";import{P as Ce,S as Se}from"./square-pen-Cv1ksX2B.js";import{L as Ue}from"./loader-circle-lHtlP_pX.js";import{c as Ee}from"./createLucideIcon-CHuRSrek.js";import{E as Te}from"./eye-DUIE4R2C.js";import{T as Ae}from"./trash-2-C6jvmEnH.js";import"./useForwardExpose-D1S90K3R.js";import"./VisuallyHidden-BBbk0uvn.js";import"./RovingFocusGroup-Dv4cu6AA.js";import"./image-CxSRAzLs.js";import"./useArrowNavigation-C6Y-ieo6.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=Ee("EllipsisIcon",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),je={class:"relative w-full overflow-auto"},qe={class:"w-full caption-bottom text-sm"},De=q({__name:"Table",props:{class:{}},setup(e){return(r,l)=>(d(),g("div",je,[t("table",qe,[Q(r.$slots,"default")])]))}}),Me=q({__name:"TableBody",props:{class:{}},setup(e){const r=e;return(l,k)=>(d(),g("tbody",{class:_(s(L)("",r.class))},[Q(l.$slots,"default")],2))}}),B=q({__name:"TableCell",props:{class:{}},setup(e){const r=e;return(l,k)=>(d(),g("td",{class:_(s(L)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r.class))},[Q(l.$slots,"default")],2))}}),M=q({__name:"TableHead",props:{class:{}},setup(e){const r=e;return(l,k)=>(d(),g("th",{class:_(s(L)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r.class))},[Q(l.$slots,"default")],2))}}),Fe=q({__name:"TableHeader",props:{class:{}},setup(e){const r=e;return(l,k)=>(d(),g("thead",{class:_(s(L)("",r.class))},[Q(l.$slots,"default")],2))}}),R=q({__name:"TableRow",props:{class:{}},setup(e){const r=e;return(l,k)=>(d(),g("tr",{class:_(s(L)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r.class))},[Q(l.$slots,"default")],2))}}),w=e=>({url:w.url(e),method:"get"});w.definition={methods:["get","head"],url:"/users"};w.url=e=>w.definition.url+F(e);w.get=e=>({url:w.url(e),method:"get"});w.head=e=>({url:w.url(e),method:"head"});const J=e=>({action:w.url(e),method:"get"});J.get=e=>({action:w.url(e),method:"get"});J.head=e=>({action:w.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});w.form=J;const $=e=>({url:$.url(e),method:"get"});$.definition={methods:["get","head"],url:"/users/create"};$.url=e=>$.definition.url+F(e);$.get=e=>({url:$.url(e),method:"get"});$.head=e=>({url:$.url(e),method:"head"});const W=e=>({action:$.url(e),method:"get"});W.get=e=>({action:$.url(e),method:"get"});W.head=e=>({action:$.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});$.form=W;const E=e=>({url:E.url(e),method:"post"});E.definition={methods:["post"],url:"/users"};E.url=e=>E.definition.url+F(e);E.post=e=>({url:E.url(e),method:"post"});const le=e=>({action:E.url(e),method:"post"});le.post=e=>({action:E.url(e),method:"post"});E.form=le;const C=(e,r)=>({url:C.url(e,r),method:"get"});C.definition={methods:["get","head"],url:"/users/{user}"};C.url=(e,r)=>{(typeof e=="string"||typeof e=="number")&&(e={user:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={user:e.id}),Array.isArray(e)&&(e={user:e[0]}),e=N(e);const l={user:typeof e.user=="object"?e.user.id:e.user};return C.definition.url.replace("{user}",l.user.toString()).replace(/\/+$/,"")+F(r)};C.get=(e,r)=>({url:C.url(e,r),method:"get"});C.head=(e,r)=>({url:C.url(e,r),method:"head"});const Z=(e,r)=>({action:C.url(e,r),method:"get"});Z.get=(e,r)=>({action:C.url(e,r),method:"get"});Z.head=(e,r)=>({action:C.url(e,{[r?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...r?.query??r?.mergeQuery??{}}}),method:"get"});C.form=Z;const S=(e,r)=>({url:S.url(e,r),method:"get"});S.definition={methods:["get","head"],url:"/users/{user}/edit"};S.url=(e,r)=>{(typeof e=="string"||typeof e=="number")&&(e={user:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={user:e.id}),Array.isArray(e)&&(e={user:e[0]}),e=N(e);const l={user:typeof e.user=="object"?e.user.id:e.user};return S.definition.url.replace("{user}",l.user.toString()).replace(/\/+$/,"")+F(r)};S.get=(e,r)=>({url:S.url(e,r),method:"get"});S.head=(e,r)=>({url:S.url(e,r),method:"head"});const ee=(e,r)=>({action:S.url(e,r),method:"get"});ee.get=(e,r)=>({action:S.url(e,r),method:"get"});ee.head=(e,r)=>({action:S.url(e,{[r?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...r?.query??r?.mergeQuery??{}}}),method:"get"});S.form=ee;const T=(e,r)=>({url:T.url(e,r),method:"post"});T.definition={methods:["post"],url:"/users/{user}"};T.url=(e,r)=>{(typeof e=="string"||typeof e=="number")&&(e={user:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={user:e.id}),Array.isArray(e)&&(e={user:e[0]}),e=N(e);const l={user:typeof e.user=="object"?e.user.id:e.user};return T.definition.url.replace("{user}",l.user.toString()).replace(/\/+$/,"")+F(r)};T.post=(e,r)=>({url:T.url(e,r),method:"post"});const ie=(e,r)=>({action:T.url(e,r),method:"post"});ie.post=(e,r)=>({action:T.url(e,r),method:"post"});T.form=ie;const A=(e,r)=>({url:A.url(e,r),method:"delete"});A.definition={methods:["delete"],url:"/users/{user}"};A.url=(e,r)=>{(typeof e=="string"||typeof e=="number")&&(e={user:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={user:e.id}),Array.isArray(e)&&(e={user:e[0]}),e=N(e);const l={user:typeof e.user=="object"?e.user.id:e.user};return A.definition.url.replace("{user}",l.user.toString()).replace(/\/+$/,"")+F(r)};A.delete=(e,r)=>({url:A.url(e,r),method:"delete"});const ne=(e,r)=>({action:A.url(e,{[r?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...r?.query??r?.mergeQuery??{}}}),method:"post"});ne.delete=(e,r)=>({action:A.url(e,{[r?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...r?.query??r?.mergeQuery??{}}}),method:"post"});A.form=ne;const X={index:Object.assign(w,w),create:Object.assign($,$),store:Object.assign(E,E),show:Object.assign(C,C),edit:Object.assign(S,S),update:Object.assign(T,T),destroy:Object.assign(A,A)},Ve={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},Pe={class:"p-6"},Qe={class:"flex items-center justify-between mb-6"},Oe={class:"text-2xl font-bold text-gray-900 dark:text-white"},Le={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ne={class:"space-y-2"},Ie={key:0,class:"text-sm text-red-500"},He={class:"space-y-2"},ze={key:0,class:"text-sm text-red-500"},Re={class:"space-y-2"},Ye={key:0,class:"text-sm text-red-500"},Ge={class:"space-y-2"},Ke={key:0,class:"text-sm text-red-500"},Xe={class:"space-y-2"},Je={for:"password",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},We=["required"],Ze={key:0,class:"text-sm text-red-500"},et={class:"space-y-2"},tt={for:"password_confirmation",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},st=["required"],rt={key:0,class:"text-sm text-red-500"},ot={class:"space-y-2"},at={key:0,class:"text-sm text-red-500"},lt={class:"space-y-2"},it={key:0,class:"text-sm text-red-500"},nt={class:"space-y-2"},dt={key:0,class:"text-sm text-red-500"},ut={class:"flex justify-end gap-4 pt-6 border-t border-gray-200 dark:border-gray-600"},mt=["disabled"],ct=q({__name:"UserFormModal",props:{isOpen:{type:Boolean},user:{}},emits:["close","success"],setup(e,{emit:r}){const l=e,k=r,x=Y(()=>!!l.user),o=ye({name:"",username:"",email:"",mobile:"",password:"",password_confirmation:"",subscription_start_date:"",subscription_end_date:"",role:"admin",template_limit:-1}),u=()=>{o.reset(),o.clearErrors(),k("close")},p=()=>{x.value&&l.user?o.post(X.update.url(l.user.id),{onSuccess:()=>{j.fire({title:"Success!",text:"User updated successfully.",icon:"success",position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,toast:!0}),u(),k("success")},onError:()=>{j.fire({title:"Error!",text:"Failed to update user. Please try again.",icon:"error",position:"top-end",showConfirmButton:!1,timer:4e3,timerProgressBar:!0,toast:!0})}}):o.post(X.store.url(),{onSuccess:()=>{j.fire({title:"Success!",text:"User created successfully.",icon:"success",position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,toast:!0}),u(),k("success")},onError:()=>{j.fire({title:"Error!",text:"Failed to create user. Please try again.",icon:"error",position:"top-end",showConfirmButton:!1,timer:4e3,timerProgressBar:!0,toast:!0})}})};return ge(()=>l.isOpen,O=>{O&&(l.user?(o.name=l.user.name,o.username=l.user.username||"",o.email=l.user.email,o.mobile=l.user.mobile||"",o.password="",o.password_confirmation="",o.subscription_start_date=l.user.subscription_start_date?new Date(l.user.subscription_start_date).toISOString().split("T")[0]:"",o.subscription_end_date=l.user.subscription_end_date?new Date(l.user.subscription_end_date).toISOString().split("T")[0]:"",o.role="admin",o.template_limit=l.user.template_limit||-1):(o.reset(),o.role="admin",o.template_limit=-1),o.clearErrors())}),(O,i)=>O.isOpen?(d(),g("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center",style:{"background-color":"rgba(0, 0, 0, 0.4)"},onClick:G(u,["self"])},[t("div",Ve,[t("div",Pe,[t("div",Qe,[t("h2",Oe,c(x.value?"Edit User":"Create New User"),1),t("button",{onClick:u,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...i[9]||(i[9]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("form",{onSubmit:G(p,["prevent"]),class:"space-y-6"},[t("div",Le,[t("div",Ne,[i[10]||(i[10]=t("label",{for:"name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Name * ",-1)),U(t("input",{id:"name","onUpdate:modelValue":i[0]||(i[0]=b=>s(o).name=b),type:"text",required:"",class:_(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":s(o).errors.name}])},null,2),[[D,s(o).name]]),s(o).errors.name?(d(),g("p",Ie,c(s(o).errors.name),1)):h("",!0)]),t("div",He,[i[11]||(i[11]=t("label",{for:"username",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Username * ",-1)),U(t("input",{id:"username","onUpdate:modelValue":i[1]||(i[1]=b=>s(o).username=b),type:"text",required:"",class:_(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":s(o).errors.username}])},null,2),[[D,s(o).username]]),s(o).errors.username?(d(),g("p",ze,c(s(o).errors.username),1)):h("",!0)]),t("div",Re,[i[12]||(i[12]=t("label",{for:"email",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Email * ",-1)),U(t("input",{id:"email","onUpdate:modelValue":i[2]||(i[2]=b=>s(o).email=b),type:"email",required:"",class:_(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":s(o).errors.email}])},null,2),[[D,s(o).email]]),s(o).errors.email?(d(),g("p",Ye,c(s(o).errors.email),1)):h("",!0)]),t("div",Ge,[i[13]||(i[13]=t("label",{for:"mobile",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Mobile ",-1)),U(t("input",{id:"mobile","onUpdate:modelValue":i[3]||(i[3]=b=>s(o).mobile=b),type:"tel",class:_(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":s(o).errors.mobile}])},null,2),[[D,s(o).mobile]]),s(o).errors.mobile?(d(),g("p",Ke,c(s(o).errors.mobile),1)):h("",!0)]),t("div",Xe,[t("label",Je," Password "+c(x.value?"(leave blank to keep current)":"*"),1),U(t("input",{id:"password","onUpdate:modelValue":i[4]||(i[4]=b=>s(o).password=b),type:"password",required:!x.value,class:_(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":s(o).errors.password}])},null,10,We),[[D,s(o).password]]),s(o).errors.password?(d(),g("p",Ze,c(s(o).errors.password),1)):h("",!0)]),t("div",et,[t("label",tt," Confirm Password "+c(x.value?"":"*"),1),U(t("input",{id:"password_confirmation","onUpdate:modelValue":i[5]||(i[5]=b=>s(o).password_confirmation=b),type:"password",required:!x.value,class:_(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":s(o).errors.password_confirmation}])},null,10,st),[[D,s(o).password_confirmation]]),s(o).errors.password_confirmation?(d(),g("p",rt,c(s(o).errors.password_confirmation),1)):h("",!0)]),t("div",ot,[i[14]||(i[14]=t("label",{for:"subscription_start_date",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Subscription Start Date * ",-1)),U(t("input",{id:"subscription_start_date","onUpdate:modelValue":i[6]||(i[6]=b=>s(o).subscription_start_date=b),type:"date",required:"",class:_(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":s(o).errors.subscription_start_date}])},null,2),[[D,s(o).subscription_start_date]]),s(o).errors.subscription_start_date?(d(),g("p",at,c(s(o).errors.subscription_start_date),1)):h("",!0)]),t("div",lt,[i[15]||(i[15]=t("label",{for:"subscription_end_date",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Subscription End Date * ",-1)),U(t("input",{id:"subscription_end_date","onUpdate:modelValue":i[7]||(i[7]=b=>s(o).subscription_end_date=b),type:"date",required:"",class:_(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":s(o).errors.subscription_end_date}])},null,2),[[D,s(o).subscription_end_date]]),s(o).errors.subscription_end_date?(d(),g("p",it,c(s(o).errors.subscription_end_date),1)):h("",!0)]),t("div",nt,[i[17]||(i[17]=t("label",{for:"template_limit",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Template Limit * ",-1)),U(t("select",{id:"template_limit","onUpdate:modelValue":i[8]||(i[8]=b=>s(o).template_limit=b),required:"",class:_(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":s(o).errors.template_limit}])},[...i[16]||(i[16]=[t("option",{value:"-1"},"Unlimited",-1),t("option",{value:"5"},"5 Templates (Demo/Trial)",-1),t("option",{value:"10"},"10 Templates (Basic)",-1),t("option",{value:"25"},"25 Templates (Standard)",-1)])],2),[[K,s(o).template_limit]]),s(o).errors.template_limit?(d(),g("p",dt,c(s(o).errors.template_limit),1)):h("",!0)])]),t("div",ut,[t("button",{type:"button",onClick:u,class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500"}," Cancel "),t("button",{type:"submit",disabled:s(o).processing,class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50"},c(s(o).processing?x.value?"Updating...":"Creating...":x.value?"Update User":"Create User"),9,mt)])],32)])])])):h("",!0)}}),pt={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto"},ft={class:"p-6"},yt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},gt={class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6"},bt={class:"space-y-4"},_t={class:"text-sm text-gray-900 dark:text-white"},xt={class:"text-sm text-gray-900 dark:text-white"},vt={class:"text-sm text-gray-900 dark:text-white"},ht={class:"text-sm text-gray-900 dark:text-white"},kt={class:"mt-1"},wt={class:"text-sm text-gray-900 dark:text-white"},$t={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"},Ct={class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6"},St={class:"space-y-4"},Ut={key:0},Et={class:"text-sm text-gray-900 dark:text-white"},Tt={key:1},At={class:"text-sm text-gray-900 dark:text-white"},Bt={key:2},jt=q({__name:"ViewUserModal",props:{isOpen:{type:Boolean},user:{}},emits:["close"],setup(e,{emit:r}){const l=r,k=()=>{l("close")},x=u=>new Date(u).toLocaleDateString(),o=u=>{switch(u){case"super_admin":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"admin":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"user":return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};return(u,p)=>u.isOpen&&u.user?(d(),g("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center",style:{"background-color":"rgba(0, 0, 0, 0.4)"},onClick:G(k,["self"])},[t("div",pt,[t("div",ft,[t("div",{class:"flex items-center justify-between mb-6"},[p[1]||(p[1]=t("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"User Details",-1)),t("button",{onClick:k,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...p[0]||(p[0]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",yt,[t("div",gt,[p[8]||(p[8]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Basic Information",-1)),t("div",bt,[t("div",null,[p[2]||(p[2]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Name",-1)),t("p",_t,c(u.user.name),1)]),t("div",null,[p[3]||(p[3]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Email",-1)),t("p",xt,c(u.user.email),1)]),t("div",null,[p[4]||(p[4]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Username",-1)),t("p",vt,c(u.user.username||"Not set"),1)]),t("div",null,[p[5]||(p[5]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Mobile",-1)),t("p",ht,c(u.user.mobile||"Not set"),1)]),t("div",null,[p[6]||(p[6]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Role",-1)),t("div",kt,[t("span",{class:_(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",o(u.user.role)])},c(u.user.role.replace("_"," ").toUpperCase()),3)])]),t("div",null,[p[7]||(p[7]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Templates Created",-1)),t("p",wt,[t("span",$t,c(u.user.templates_count||0)+" templates ",1)])])])]),t("div",Ct,[p[12]||(p[12]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Subscription Information",-1)),t("div",St,[u.user.subscription_start_date&&u.user.subscription_end_date?(d(),g("div",Ut,[p[9]||(p[9]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Start Date",-1)),t("p",Et,c(x(u.user.subscription_start_date)),1)])):h("",!0),u.user.subscription_start_date&&u.user.subscription_end_date?(d(),g("div",Tt,[p[10]||(p[10]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"End Date",-1)),t("p",At,c(x(u.user.subscription_end_date)),1)])):h("",!0),!u.user.subscription_start_date||!u.user.subscription_end_date?(d(),g("div",Bt,[...p[11]||(p[11]=[t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"No subscription information available",-1)])])):h("",!0)])])])])])])):h("",!0)}}),qt={class:"space-y-6 p-5"},Dt={class:"flex items-center justify-between"},Mt={class:"flex items-center gap-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg"},Ft={class:"flex items-center gap-2"},Vt={class:"flex items-center gap-2"},Pt={class:"rounded-md border"},Qt={class:"flex flex-col items-center gap-2"},Ot={class:"text-sm"},Lt={key:0},Nt={key:1},It={class:"flex items-center gap-3"},Ht={class:"flex items-center gap-2"},zt=["onClick","disabled","title"],Rt={key:1,class:"text-xs text-gray-400 italic"},Yt={class:"text-sm"},Gt={key:0,class:"font-medium text-green-600"},Kt={key:1,class:"font-medium"},Xt={key:2,class:"text-muted-foreground"},Jt={key:0,class:"text-sm"},Wt={key:1,class:"text-muted-foreground"},Zt={class:"flex items-center justify-between"},es={class:"text-sm text-muted-foreground"},ts={key:0},ss={key:1},vs=q({__name:"Index",props:{users:{}},setup(e){const r=e,l=V(!1),k=V(!1),x=V(null),o=V(new Set),u=V(""),p=V(""),O=[{title:"User Management",href:"/users"}],i=Y(()=>u.value!==""||p.value!==""),b=Y(()=>{let f=r.users.data;if(u.value==="unlimited")f=f.filter(a=>a.template_limit===-1);else if(u.value==="limited")f=f.filter(a=>a.template_limit!==-1);else if(u.value&&["5","10","25"].includes(u.value)){const a=parseInt(u.value);f=f.filter(n=>n.template_limit===a)}return p.value==="active"?f=f.filter(a=>a.is_active):p.value==="inactive"&&(f=f.filter(a=>!a.is_active)),f}),te=f=>new Date(f).toLocaleDateString(),de=()=>{x.value=null,l.value=!0},ue=f=>{x.value=f,l.value=!0},me=f=>{x.value=f,k.value=!0},ce=f=>{j.fire({title:"Are you sure?",text:`You are about to delete ${f.name}. This action cannot be undone!`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(a=>{a.isConfirmed&&ae.delete(X.destroy.url(f.id),{onSuccess:()=>{j.fire({title:"Deleted!",text:"User has been deleted successfully.",icon:"success",position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,toast:!0})},onError:()=>{j.fire({title:"Error!",text:"Failed to delete user. Please try again.",icon:"error",position:"top-end",showConfirmButton:!1,timer:4e3,timerProgressBar:!0,toast:!0})}})})},se=()=>{l.value=!1,k.value=!1,x.value=null},pe=()=>{ae.reload()},fe=async f=>{o.value.add(f.id);try{const n=await(await fetch(`/users/${f.id}/toggle-status`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}})).json();if(n.success)f.is_active=n.is_active,j.fire({title:"Success!",text:n.message,icon:"success",position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,toast:!0});else throw new Error(n.error||"Failed to toggle user status")}catch(a){j.fire({title:"Error!",text:a instanceof Error?a.message:"Failed to toggle user status",icon:"error",position:"top-end",showConfirmButton:!1,timer:4e3,timerProgressBar:!0,toast:!0})}finally{o.value.delete(f.id)}},re=()=>{},oe=()=>{u.value="",p.value=""};return(f,a)=>(d(),P($e,{breadcrumbs:O},{default:y(()=>[m(s(be),{title:"User Management"}),t("div",qt,[t("div",Dt,[a[3]||(a[3]=t("div",null,[t("h1",{class:"text-2xl font-bold tracking-tight"},"User Management"),t("p",{class:"text-muted-foreground"}," Manage users and their roles in the system. ")],-1)),m(s(H),{onClick:de},{default:y(()=>[m(s(Ce),{class:"mr-2 h-4 w-4"}),a[2]||(a[2]=v(" Add User ",-1))]),_:1})]),t("div",Mt,[t("div",Ft,[a[5]||(a[5]=t("label",{for:"template-limit-filter",class:"text-sm font-medium text-gray-700 dark:text-gray-300"}," Template Limit: ",-1)),U(t("select",{id:"template-limit-filter","onUpdate:modelValue":a[0]||(a[0]=n=>u.value=n),onChange:re,class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm"},[...a[4]||(a[4]=[t("option",{value:""},"All Users",-1),t("option",{value:"unlimited"},"Unlimited Templates",-1),t("option",{value:"limited"},"Limited Templates",-1),t("option",{value:"5"},"5 Templates",-1),t("option",{value:"10"},"10 Templates",-1),t("option",{value:"25"},"25 Templates",-1)])],544),[[K,u.value]])]),t("div",Vt,[a[7]||(a[7]=t("label",{for:"status-filter",class:"text-sm font-medium text-gray-700 dark:text-gray-300"}," Status: ",-1)),U(t("select",{id:"status-filter","onUpdate:modelValue":a[1]||(a[1]=n=>p.value=n),onChange:re,class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm"},[...a[6]||(a[6]=[t("option",{value:""},"All Status",-1),t("option",{value:"active"},"Active",-1),t("option",{value:"inactive"},"Inactive",-1)])],544),[[K,p.value]])]),i.value?(d(),P(s(H),{key:0,onClick:oe,variant:"outline",size:"sm",class:"ml-auto"},{default:y(()=>[...a[8]||(a[8]=[v(" Clear Filters ",-1)])]),_:1})):h("",!0)]),t("div",Pt,[m(s(De),null,{default:y(()=>[m(s(Fe),null,{default:y(()=>[m(s(R),null,{default:y(()=>[m(s(M),null,{default:y(()=>[...a[9]||(a[9]=[v("Name",-1)])]),_:1}),m(s(M),null,{default:y(()=>[...a[10]||(a[10]=[v("Email",-1)])]),_:1}),m(s(M),null,{default:y(()=>[...a[11]||(a[11]=[v("Username",-1)])]),_:1}),m(s(M),null,{default:y(()=>[...a[12]||(a[12]=[v("Status",-1)])]),_:1}),m(s(M),null,{default:y(()=>[...a[13]||(a[13]=[v("Template Limit",-1)])]),_:1}),m(s(M),null,{default:y(()=>[...a[14]||(a[14]=[v("Subscription",-1)])]),_:1}),m(s(M),null,{default:y(()=>[...a[15]||(a[15]=[v("Templates",-1)])]),_:1}),m(s(M),{class:"w-[50px]"})]),_:1})]),_:1}),m(s(Me),null,{default:y(()=>[b.value.length===0?(d(),P(s(R),{key:0},{default:y(()=>[m(s(B),{colspan:"8",class:"text-center py-8 text-muted-foreground"},{default:y(()=>[t("div",Qt,[a[17]||(a[17]=t("div",{class:"text-lg font-medium"},"No users found",-1)),t("div",Ot,[i.value?(d(),g("span",Lt,[a[16]||(a[16]=v(" Try adjusting your filters or ",-1)),t("button",{onClick:oe,class:"text-blue-600 hover:text-blue-800 underline"}," clear all filters ")])):(d(),g("span",Nt,"No users available"))])])]),_:1})]),_:1})):h("",!0),(d(!0),g(_e,null,xe(b.value,n=>(d(),P(s(R),{key:n.id},{default:y(()=>[m(s(B),{class:"font-medium"},{default:y(()=>[v(c(n.name),1)]),_:2},1024),m(s(B),null,{default:y(()=>[v(c(n.email),1)]),_:2},1024),m(s(B),null,{default:y(()=>[v(c(n.username||"-"),1)]),_:2},1024),m(s(B),null,{default:y(()=>[t("div",It,[t("div",Ht,[t("div",{class:_(["w-2 h-2 rounded-full",n.is_active?"bg-green-500":"bg-gray-400"])},null,2),t("span",{class:_(["text-sm font-medium",n.is_active?"text-green-700":"text-gray-500"])},c(n.is_active?"Active":"Inactive"),3)]),n.role!=="super_admin"?(d(),g("button",{key:0,onClick:I=>fe(n),disabled:o.value.has(n.id),title:n.is_active?"Click to deactivate account":"Click to activate account",class:_(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",n.is_active?"bg-indigo-600":"bg-gray-200",o.value.has(n.id)?"opacity-50 cursor-not-allowed":"cursor-pointer hover:opacity-80"])},[o.value.has(n.id)?(d(),P(s(Ue),{key:1,class:"h-3 w-3 animate-spin text-white mx-auto"})):(d(),g("span",{key:0,class:_(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",n.is_active?"translate-x-6":"translate-x-1"])},null,2))],10,zt)):(d(),g("span",Rt," Super Admin "))])]),_:2},1024),m(s(B),null,{default:y(()=>[t("div",Yt,[n.template_limit===-1?(d(),g("div",Gt," Unlimited ")):(d(),g("div",Kt,c(n.template_limit)+" templates ",1)),n.template_limit!==-1?(d(),g("div",Xt,c(n.templates_count||0)+"/"+c(n.template_limit)+" used ",1)):h("",!0)])]),_:2},1024),m(s(B),null,{default:y(()=>[n.subscription_start_date&&n.subscription_end_date?(d(),g("div",Jt,[t("div",null,"Start: "+c(te(n.subscription_start_date)),1),t("div",null,"End: "+c(te(n.subscription_end_date)),1)])):(d(),g("span",Wt,"No subscription"))]),_:2},1024),m(s(B),null,{default:y(()=>[m(s(ve),{variant:"secondary"},{default:y(()=>[v(c(n.templates_count||0)+" templates ",1)]),_:2},1024)]),_:2},1024),m(s(B),null,{default:y(()=>[m(s(he),null,{default:y(()=>[m(s(ke),{"as-child":""},{default:y(()=>[m(s(H),{variant:"ghost",class:"h-8 w-8 p-0"},{default:y(()=>[m(s(Be),{class:"h-4 w-4"})]),_:1})]),_:1}),m(s(we),{align:"end"},{default:y(()=>[m(s(z),{onClick:I=>me(n)},{default:y(()=>[m(s(Te),{class:"mr-2 h-4 w-4"}),a[18]||(a[18]=v(" View ",-1))]),_:1},8,["onClick"]),m(s(z),{onClick:I=>ue(n)},{default:y(()=>[m(s(Se),{class:"mr-2 h-4 w-4"}),a[19]||(a[19]=v(" Edit ",-1))]),_:1},8,["onClick"]),n.role!=="super_admin"?(d(),P(s(z),{key:0,onClick:I=>ce(n),class:"text-destructive"},{default:y(()=>[m(s(Ae),{class:"mr-2 h-4 w-4"}),a[20]||(a[20]=v(" Delete ",-1))]),_:1},8,["onClick"])):h("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),t("div",Zt,[t("div",es,[i.value?(d(),g("span",ts,[v(" Showing "+c(b.value.length)+" of "+c(f.users.total)+" users ",1),a[21]||(a[21]=t("span",{class:"ml-2 text-blue-600"},"(filtered)",-1))])):(d(),g("span",ss," Showing "+c((f.users.current_page-1)*f.users.per_page+1)+" to "+c(Math.min(f.users.current_page*f.users.per_page,f.users.total))+" of "+c(f.users.total)+" results ",1))])])]),m(ct,{"is-open":l.value,user:x.value,onClose:se,onSuccess:pe},null,8,["is-open","user"]),m(jt,{"is-open":k.value,user:x.value,onClose:se},null,8,["is-open","user"])]),_:1}))}});export{vs as default};
