import{d as N,c as u,o as i,b as e,j as h,a as $,e as K,t as z,u as M,F as D,r as P,m as se,p as S,q as le,s as ge,g as G,v as pe,n as I,x as ne,y as R,z as ce,f as me,A as be,h as ye,w as ve,B as re,k as oe}from"./app-BYxFpyAA.js";import{C as xe,t as ke,_ as fe}from"./AppLayout.vue_vue_type_script_setup_true_lang-D1Nk8GHd.js";import{d as he}from"./index-4Ns3tNZl.js";import{L as we}from"./loader-circle-DDjPpiaY.js";import{U as ae,T as Ce}from"./upload--RtU3YOK.js";import{c as L}from"./createLucideIcon-DHJI6Dj7.js";import{C as de}from"./copy-DFZb-VK4.js";import{T as ie}from"./trash-2-CnffOSgA.js";import{I as Ee}from"./image-Cz2LCZjF.js";import{S as j}from"./sweetalert2.esm.all-Bj_ZQUAw.js";import"./Primitive-ChIDcMtd.js";import"./useForwardExpose-Csxjp47s.js";import"./VisuallyHidden-CGOekYsA.js";import"./RovingFocusGroup-UkFPJbjX.js";import"./useArrowNavigation-C6Y-ieo6.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=L("CircleIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=L("LayersIcon",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=L("MoveIcon",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=L("SquareIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=L("StarIcon",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=L("TriangleIcon",[["path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"14u9p9"}]]),Me={class:"w-full"},Be={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700"},De={class:"p-4"},ze={class:"flex flex-wrap items-end gap-4"},Pe={class:"flex-1 min-w-[200px]"},_e=["value"],Qe={class:"flex-1 min-w-[200px]"},Re={class:"relative quick-template-dropdown"},We={class:"flex items-center"},Ue={key:0,class:"text-xs text-gray-500 dark:text-gray-400 ml-2"},Ae={key:0,class:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg"},Oe=["onClick"],Le={class:"font-medium"},je={class:"text-xs text-gray-500 dark:text-gray-400"},Ne={class:"flex gap-2"},He=["value"],Xe=["value"],Ye=["disabled"],qe=N({__name:"TemplateSettings",props:{form:{},backgroundImagePreview:{},selectedQuickTemplate:{},isQuickTemplateDropdownOpen:{type:Boolean},isEditMode:{type:Boolean},isSubmitting:{type:Boolean}},emits:["update:form","update:backgroundImagePreview","update:selectedQuickTemplate","update:isQuickTemplateDropdownOpen","backgroundImageChange","applyQuickTemplate"],setup(_,{emit:E}){const x=_,k=E,c=[{name:"Instagram Post",width:1080,height:1080},{name:"Instagram Story",width:1080,height:1920},{name:"Facebook Post",width:1200,height:630},{name:"Custom Size",width:800,height:600}],w=(m,b)=>{if(m==="width"||m==="height"){const d=parseInt(b)||100,y=Math.max(100,Math.min(4e3,d));k("update:form",{...x.form,[m]:y})}else k("update:form",{...x.form,[m]:b})},C=m=>{k("applyQuickTemplate",m)},v=()=>{k("update:isQuickTemplateDropdownOpen",!x.isQuickTemplateDropdownOpen)};return(m,b)=>(i(),u("div",Me,[e("div",Be,[b[7]||(b[7]=e("div",{class:"p-4 border-b border-gray-200 dark:border-gray-700"},[e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Template Settings")],-1)),e("div",De,[e("div",ze,[e("div",Pe,[b[3]||(b[3]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Template Name * ",-1)),e("input",{value:m.form.name,onInput:b[0]||(b[0]=d=>w("name",d.target.value)),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors text-sm",placeholder:"Enter template name"},null,40,_e)]),e("div",Qe,[b[4]||(b[4]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Quick Templates ",-1)),e("div",Re,[e("button",{type:"button",onClick:v,class:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[e("span",We,[K(z(m.selectedQuickTemplate?m.selectedQuickTemplate.name:"Select a template...")+" ",1),m.selectedQuickTemplate?(i(),u("span",Ue," ("+z(m.selectedQuickTemplate.width)+" × "+z(m.selectedQuickTemplate.height)+"px) ",1)):h("",!0)]),$(M(xe),{class:"h-4 w-4 text-gray-400"})]),m.isQuickTemplateDropdownOpen?(i(),u("div",Ae,[(i(),u(D,null,P(c,d=>e("button",{key:d.name,type:"button",onClick:y=>C(d),class:"w-full px-3 py-2 text-left hover:bg-gray-100 dark:hover:bg-gray-600 text-sm first:rounded-t-lg last:rounded-b-lg"},[e("div",Le,z(d.name),1),e("div",je,z(d.width)+" × "+z(d.height)+"px ",1)],8,Oe)),64))])):h("",!0)])]),e("div",Ne,[e("div",null,[b[5]||(b[5]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Width ",-1)),e("input",{value:m.form.width,onInput:b[1]||(b[1]=d=>w("width",d.target.value)),type:"number",min:"100",max:"4000",step:"1",class:"w-20 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors text-sm"},null,40,He)]),e("div",null,[b[6]||(b[6]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Height ",-1)),e("input",{value:m.form.height,onInput:b[2]||(b[2]=d=>w("height",d.target.value)),type:"number",min:"100",max:"4000",step:"1",class:"w-20 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors text-sm"},null,40,Xe)])]),e("div",null,[e("button",{type:"submit",disabled:!m.form.name||m.isSubmitting,class:"bg-blue-600 text-white py-2 px-6 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2"},[m.isSubmitting?(i(),se(M(we),{key:0,class:"h-4 w-4 animate-spin"})):h("",!0),e("span",null,z(m.isSubmitting?m.isEditMode?"Updating...":"Creating...":m.isEditMode?"Update Template":"Create Template"),1)],8,Ye)])])])])]))}}),Ve={class:"flex-1 min-w-0 relative"},Ke={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 flex flex-col relative"},Ge={class:"px-4 py-2 border-b border-gray-200 dark:border-gray-700"},Ze={class:"flex items-center justify-between"},Je={class:"flex items-center gap-3"},et={for:"background-upload",class:"cursor-pointer inline-flex items-center gap-2 px-3 py-1.5 text-xs font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"},tt={key:0,class:"flex items-center gap-2"},rt=["src"],ot={class:"flex items-center gap-1"},at=["disabled"],st=["disabled"],lt=["disabled"],nt=["disabled"],dt={class:"p-2 sm:p-4 flex justify-center items-start min-h-[300px] sm:min-h-[400px]"},it={class:"relative w-full max-w-full overflow-hidden",style:{margin:"10px 0"}},ut={key:1,class:"absolute top-2 left-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded z-10"},gt={key:2,class:"flex h-full w-full items-center justify-center"},pt={class:"text-center"},ct={class:"mx-auto h-16 w-16 bg-gray-100 dark:bg-gray-600 rounded-full flex items-center justify-center mb-4"},mt=["onMousedown","onClick"],bt=["src","alt"],yt=["onClick"],vt=["onMousedown"],xt=N({__name:"CanvasEditor",props:{form:{},backgroundImagePreview:{},canvasElements:{},selectedElement:{},selectedTool:{}},emits:["canvasClick","elementMouseDown","mouseMove","mouseUp","selectElement","bringToFront","sendToBack","duplicateElement","deleteElement","resizeElement","backgroundImageChange"],setup(_,{emit:E}){const x=_,k=E,c=l=>{const a=l.target.files?.[0];a&&k("backgroundImageChange",a)},w=S(typeof window<"u"?window.innerWidth:1024),C=()=>{w.value=window.innerWidth};le(()=>{window.addEventListener("resize",C)}),ge(()=>{window.removeEventListener("resize",C)});const v=G(()=>{const l=w.value<1024?400:600,g=w.value<1024?300:450,a=l/x.form.width,B=g/x.form.height,O=Math.min(a,B,1);return{width:x.form.width+"px",height:x.form.height+"px",transform:`scale(${O})`,transformOrigin:"top center",maxWidth:"100%",maxHeight:"100%"}}),m=G(()=>[...x.canvasElements].sort((l,g)=>l.zIndex-g.zIndex)),b=l=>{k("canvasClick",l)},d=(l,g)=>{k("elementMouseDown",l,g)},y=l=>{A.value?X(l):k("mouseMove",l)},W=l=>{A.value?Y():k("mouseUp",l)},s=l=>{k("selectElement",l)},t=l=>{s(l)},o=l=>{k("bringToFront",l)},U=l=>{k("sendToBack",l)},J=l=>{k("duplicateElement",l)},ee=l=>{k("deleteElement",l)},A=S(!1),T=S({x:0,y:0,width:0,height:0,elementX:0,elementY:0,originalFontSize:0}),H=(l,g)=>{l.preventDefault(),l.stopPropagation(),A.value=!0,T.value={x:l.clientX,y:l.clientY,width:g.width,height:g.height,elementX:g.x,elementY:g.y,originalFontSize:g.properties.fontSize||16},x.selectedElement?.id!==g.id&&s(g)},X=l=>{if(!A.value||!x.selectedElement)return;const g=l.clientX-T.value.x,a=l.clientY-T.value.y;let B=Math.max(20,T.value.width+g),O=Math.max(20,T.value.height+a);if(l.shiftKey){T.value.width/T.value.height;const n=Math.max(g,a);B=Math.max(20,T.value.width+n),O=Math.max(20,T.value.height+n)}let r=T.value.originalFontSize;if(x.selectedElement.type==="text"){const n=O/T.value.height;r=Math.max(8,Math.round(T.value.originalFontSize*n))}k("resizeElement",x.selectedElement.id,B,O,x.selectedElement.x,x.selectedElement.y,r)},Y=()=>{A.value=!1},q=l=>{switch(l){case"circle":return"circle(50% at 50% 50%)";case"triangle":return"polygon(50% 0%, 0% 100%, 100% 100%)";case"star":return"polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)";case"diamond":return"polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%)";case"hexagon":return"polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%)";case"octagon":return"polygon(30% 0%, 70% 0%, 100% 30%, 100% 70%, 70% 100%, 30% 100%, 0% 70%, 0% 30%)";case"rectangle":default:return"none"}};return(l,g)=>(i(),u("div",Ve,[e("div",Ke,[g[9]||(g[9]=e("div",{class:"pt-5 px-4 pb-2 border-b border-gray-200 dark:border-gray-700"},[e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Template Editor")],-1)),e("div",Ge,[e("div",Ze,[e("div",Je,[e("input",{type:"file",accept:"image/*",onChange:c,class:"hidden",id:"background-upload"},null,32),e("label",et,[$(M(ae),{class:"h-3 w-3"}),g[4]||(g[4]=K(" Background ",-1))]),l.backgroundImagePreview?(i(),u("div",tt,[e("img",{src:l.backgroundImagePreview,alt:"Background preview",class:"h-6 w-6 object-cover rounded"},null,8,rt),g[5]||(g[5]=e("span",{class:"text-xs text-gray-500 dark:text-gray-400"},"Background set",-1))])):h("",!0)]),e("div",ot,[e("button",{type:"button",onClick:g[0]||(g[0]=a=>l.selectedElement&&o(l.selectedElement.id)),disabled:!l.selectedElement,title:"Bring to Front",class:"p-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[$(M(Z),{class:"h-4 w-4"})],8,at),e("button",{type:"button",onClick:g[1]||(g[1]=a=>l.selectedElement&&U(l.selectedElement.id)),disabled:!l.selectedElement,title:"Send to Back",class:"p-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[$(M(Z),{class:"h-4 w-4 rotate-180"})],8,st),e("button",{type:"button",onClick:g[2]||(g[2]=a=>l.selectedElement&&J(l.selectedElement.id)),disabled:!l.selectedElement,title:"Duplicate",class:"p-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[$(M(de),{class:"h-4 w-4"})],8,lt),e("button",{type:"button",onClick:g[3]||(g[3]=a=>l.selectedElement&&ee(l.selectedElement.id)),disabled:!l.selectedElement,title:"Delete",class:"p-2 text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/30 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[$(M(ie),{class:"h-4 w-4"})],8,nt)])])]),e("div",dt,[e("div",it,[e("div",{class:"relative overflow-hidden border-2 border-gray-300 bg-gray-50 dark:border-gray-600 dark:bg-gray-700 shadow-lg rounded-lg cursor-crosshair mx-auto",style:I(v.value),onClick:b,onMousemove:y,onMouseup:W},[l.backgroundImagePreview?(i(),u("div",{key:0,class:"absolute inset-0 bg-cover bg-center bg-no-repeat z-0",style:I({backgroundImage:`url(${l.backgroundImagePreview})`,width:"100%",height:"100%"})},null,4)):h("",!0),l.backgroundImagePreview?(i(),u("div",ut," Background loaded ")):h("",!0),!l.backgroundImagePreview&&l.canvasElements.length===0?(i(),u("div",gt,[e("div",pt,[e("div",ct,[$(M(ae),{class:"h-8 w-8 text-gray-400"})]),g[6]||(g[6]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},"Start Creating",-1)),g[7]||(g[7]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Select a tool and click on the canvas to add elements ",-1))])])):h("",!0),(i(!0),u(D,null,P(m.value,a=>(i(),u("div",{key:a.id,class:R(["absolute cursor-move select-none",l.selectedElement?.id===a.id?"ring-2 ring-blue-500":""]),style:I({left:a.x+"px",top:a.y+"px",width:a.width+"px",height:a.height+"px",transform:`rotate(${a.rotation}deg)`,zIndex:a.zIndex,filter:a.properties.boxShadow!=="none"?a.properties.boxShadow:"none",textShadow:a.properties.textShadow}),onMousedown:B=>d(B,a),onClick:ne(B=>s(a),["stop"])},[a.type==="text"?(i(),u("div",{key:0,class:"w-full h-full flex items-center justify-center text-center",style:I({fontSize:(a.properties.fontSize||16)+"px",fontFamily:a.properties.fontFamily||"Arial",fontWeight:a.properties.fontWeight||"normal",fontStyle:a.properties.fontStyle||"normal",textDecoration:a.properties.textDecoration||"none",textAlign:a.properties.textAlign||"left",lineHeight:String(a.properties.lineHeight||1.2),color:a.properties.color||"#000000"})},z(a.properties.text||"Text"),5)):a.type==="image"?(i(),u("div",{key:1,class:"w-full h-full flex items-center justify-center text-center",style:I({backgroundColor:a.properties.backgroundColor||"transparent",border:`${a.properties.borderWidth||0}px ${a.properties.borderStyle||"solid"} ${a.properties.borderColor||"#000000"}`,borderRadius:(a.properties.borderRadius||0)+"px",clipPath:q(a.properties.imageShape||"rectangle")})},[a.properties.imageUrl?(i(),u("img",{key:0,src:a.properties.imageUrl,alt:a.properties.text||"Image",class:"max-w-full max-h-full",style:I({objectFit:a.properties.imageFit||"contain"})},null,12,bt)):(i(),u("div",{key:1,class:"w-full h-full flex items-center justify-center text-blue-500 bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-blue-900/20 dark:to-indigo-900/20 border-2 border-dashed border-blue-300 dark:border-blue-600 rounded-lg cursor-pointer hover:from-blue-100 hover:to-indigo-200 dark:hover:from-blue-800/30 dark:hover:to-indigo-800/30 hover:border-blue-400 dark:hover:border-blue-500 transition-all duration-200",onClick:B=>t(a)},[...g[8]||(g[8]=[e("div",{class:"relative"},[e("svg",{class:"w-12 h-12 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})]),e("div",{class:"absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full animate-pulse"})],-1)])],8,yt))],4)):a.type==="rectangle"?(i(),u("div",{key:2,class:"w-full h-full",style:I({backgroundColor:a.properties.fillColor,border:a.properties.hasBorder?`${a.properties.strokeWidth}px ${a.properties.borderStyle} ${a.properties.strokeColor}`:"none",borderRadius:(a.properties.borderRadius||0)+"px"})},null,4)):a.type==="circle"?(i(),u("div",{key:3,class:"w-full h-full rounded-full",style:I({backgroundColor:a.properties.fillColor,border:a.properties.hasBorder?`${a.properties.strokeWidth}px ${a.properties.borderStyle} ${a.properties.strokeColor}`:"none"})},null,4)):a.type==="triangle"?(i(),u("div",{key:4,class:"w-full h-full",style:I({backgroundColor:a.properties.fillColor,border:a.properties.hasBorder?`${a.properties.strokeWidth}px ${a.properties.borderStyle} ${a.properties.strokeColor}`:"none",clipPath:"polygon(50% 0%, 0% 100%, 100% 100%)"})},null,4)):a.type==="star"?(i(),u("div",{key:5,class:"w-full h-full",style:I({backgroundColor:a.properties.fillColor,border:a.properties.hasBorder?`${a.properties.strokeWidth}px ${a.properties.borderStyle} ${a.properties.strokeColor}`:"none",clipPath:"polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)"})},null,4)):h("",!0),l.selectedElement?.id===a.id?(i(),u("div",{key:6,class:"absolute -bottom-1 -right-1 w-4 h-4 bg-blue-500 border-2 border-white rounded-full pointer-events-auto cursor-se-resize hover:bg-blue-600 transition-colors shadow-lg",onMousedown:B=>H(B,a),title:"Resize (Shift+drag for proportional)"},null,40,vt)):h("",!0)],46,mt))),128))],36)])])]),pe(l.$slots,"default")]))}}),kt={class:"bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm rounded-lg shadow-lg border border-gray-200/60 dark:border-gray-700/60"},ft={class:"p-2"},ht={class:"grid grid-cols-4 gap-1"},wt=["onClick","title"],Ct=N({__name:"ToolsPanel",props:{selectedTool:{}},emits:["update:selectedTool"],setup(_,{emit:E}){const x=E,k=[{id:"select",name:"Select",icon:$e},{id:"text",name:"Text",icon:Ce},{id:"image",name:"Image",icon:Ee},{id:"rectangle",name:"Rectangle",icon:Te},{id:"circle",name:"Circle",icon:Se},{id:"triangle",name:"Triangle",icon:Fe},{id:"star",name:"Star",icon:Ie}],c=w=>{x("update:selectedTool",w)};return(w,C)=>(i(),u("div",kt,[C[0]||(C[0]=e("div",{class:"p-2 border-b border-gray-200/60 dark:border-gray-700/60"},[e("h2",{class:"text-xs font-semibold text-gray-900 dark:text-white"},"Tools")],-1)),e("div",ft,[e("div",ht,[(i(),u(D,null,P(k,v=>e("button",{key:v.id,type:"button",onClick:m=>c(v.id),class:R(["flex items-center justify-center w-7 h-7 rounded-md transition-colors",w.selectedTool===v.id?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"]),title:v.name},[(i(),se(ce(v.icon),{class:"h-3.5 w-3.5"}))],10,wt)),64))])])]))}}),Et={key:0,class:"bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm rounded-lg shadow-lg border border-gray-200/60 dark:border-gray-700/60"},St={class:"p-3"},$t={class:"mb-3"},Tt={class:"flex space-x-1 bg-gray-100 dark:bg-gray-700 rounded-md p-1"},It={class:"space-y-3"},Ft={key:0,class:"space-y-2"},Mt={key:0},Bt=["value"],Dt={key:1},zt=["value"],Pt={key:1,class:"space-y-2"},_t={key:0,class:"space-y-2"},Qt=["value"],Rt=["value"],Wt=["value"],Ut={class:"flex gap-1"},At={class:"flex items-center gap-2"},Ot=["value"],Lt={class:"flex flex-wrap gap-1"},jt=["onClick"],Nt={key:1,class:"space-y-2"},Ht=["value"],Xt=["value"],Yt=["value"],qt={class:"space-y-2"},Vt={class:"flex gap-2"},Kt={class:"flex items-center"},Gt=["checked"],Zt={class:"flex items-center"},Jt=["checked"],er={key:0,class:"flex items-center gap-2"},tr=["value"],rr={class:"flex flex-wrap gap-1"},or=["onClick"],ar={key:2},sr={class:"flex items-center gap-2"},lr=["value"],nr={class:"flex flex-wrap gap-1"},dr=["onClick"],ir={class:"flex items-center gap-2"},ur=["value"],gr={class:"flex flex-wrap gap-1"},pr=["onClick"],cr={key:3},mr={class:"flex items-center gap-2 mb-2"},br=["checked"],yr={key:0,class:"space-y-2"},vr={class:"grid grid-cols-2 gap-2"},xr=["value"],kr=["value"],fr=["value"],hr=["value"],wr=["value"],Cr=["value"],Er={key:2,class:"space-y-2"},Sr={class:"grid grid-cols-2 gap-2"},$r=["value"],Tr=["value"],Ir={class:"grid grid-cols-2 gap-2"},Fr=["value"],Mr=["value"],Br={class:"space-y-2"},Dr={class:"grid grid-cols-2 gap-1"},zr={class:"space-y-2"},Pr=N({__name:"PropertiesPanel",props:{selectedElement:{}},emits:["updateElement","bringToFront","sendToBack","duplicateElement","deleteElement"],setup(_,{emit:E}){const x=_,k=E,c=S("content"),w=["Arial","Helvetica","Times New Roman","Georgia","Verdana","Courier New","Impact","Comic Sans MS","Trebuchet MS","Arial Black","Palatino","Garamond","Bookman","Avant Garde","Helvetica Neue","Roboto","Open Sans","Lato","Montserrat","Poppins","Source Sans Pro"],C=[{name:"None",value:"none"},{name:"Small",value:"drop-shadow(0 2px 4px rgba(0,0,0,0.1))"},{name:"Medium",value:"drop-shadow(0 4px 8px rgba(0,0,0,0.15))"},{name:"Large",value:"drop-shadow(0 8px 16px rgba(0,0,0,0.2))"},{name:"X-Large",value:"drop-shadow(0 12px 24px rgba(0,0,0,0.25))"},{name:"Glow",value:"drop-shadow(0 0 20px rgba(0,0,0,0.3))"}],v=[{name:"Solid",value:"solid"},{name:"Dashed",value:"dashed"},{name:"Dotted",value:"dotted"},{name:"Double",value:"double"},{name:"Groove",value:"groove"},{name:"Ridge",value:"ridge"},{name:"Inset",value:"inset"},{name:"Outset",value:"outset"}],m=[{name:"Rectangle",value:"rectangle"},{name:"Circle",value:"circle"},{name:"Triangle",value:"triangle"},{name:"Star",value:"star"},{name:"Diamond",value:"diamond"},{name:"Hexagon",value:"hexagon"},{name:"Octagon",value:"octagon"}],b=["#000000","#FFFFFF","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#FFA500","#800080","#FFC0CB","#A52A2A","#808080","#C0C0C0","#FFD700","#008000","#000080","#800000"],d=(s,t)=>{x.selectedElement&&k("updateElement",x.selectedElement.id,s,t)},y=s=>s.target?.value||"",W=s=>s.target?.checked||!1;return(s,t)=>s.selectedElement?(i(),u("div",Et,[e("div",St,[t[57]||(t[57]=e("h2",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-3"},"Properties",-1)),e("div",$t,[e("div",Tt,[e("button",{type:"button",onClick:t[0]||(t[0]=o=>c.value="content"),class:R(["flex-1 px-2 py-1.5 text-xs font-medium rounded transition-colors",c.value==="content"?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"])}," Content ",2),e("button",{type:"button",onClick:t[1]||(t[1]=o=>c.value="style"),class:R(["flex-1 px-2 py-1.5 text-xs font-medium rounded transition-colors",c.value==="style"?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"])}," Style ",2),e("button",{type:"button",onClick:t[2]||(t[2]=o=>c.value="position"),class:R(["flex-1 px-2 py-1.5 text-xs font-medium rounded transition-colors",c.value==="position"?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"])}," Position ",2)])]),e("div",It,[c.value==="content"?(i(),u("div",Ft,[s.selectedElement.type==="text"?(i(),u("div",Mt,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Text Content ",-1)),e("textarea",{value:s.selectedElement.properties.text||"",onInput:t[3]||(t[3]=o=>d("text",y(o))),rows:"3",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors text-sm",placeholder:"Enter text content"},null,40,Bt)])):h("",!0),s.selectedElement.type==="image"?(i(),u("div",Dt,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Image URL ",-1)),e("input",{value:s.selectedElement.properties.imageUrl||"",onInput:t[4]||(t[4]=o=>d("imageUrl",y(o))),type:"url",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors text-sm",placeholder:"Enter image URL"},null,40,zt)])):h("",!0)])):h("",!0),c.value==="style"?(i(),u("div",Pt,[s.selectedElement.type==="text"?(i(),u("div",_t,[e("div",null,[t[33]||(t[33]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Font Size ",-1)),e("input",{value:s.selectedElement.properties.fontSize||16,onInput:t[5]||(t[5]=o=>d("fontSize",parseInt(y(o))||16)),type:"number",min:"8",max:"200",class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},null,40,Qt)]),e("div",null,[t[34]||(t[34]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Font Family ",-1)),e("select",{value:s.selectedElement.properties.fontFamily||"Arial",onChange:t[6]||(t[6]=o=>d("fontFamily",y(o))),class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},[(i(),u(D,null,P(w,o=>e("option",{key:o,value:o},z(o),9,Wt)),64))],40,Rt)]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Font Style ",-1)),e("div",Ut,[e("button",{type:"button",onClick:t[7]||(t[7]=o=>d("fontWeight",s.selectedElement.properties.fontWeight==="bold"?"normal":"bold")),class:R(["px-2 py-1 text-xs rounded",s.selectedElement.properties.fontWeight==="bold"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"])}," Bold ",2),e("button",{type:"button",onClick:t[8]||(t[8]=o=>d("fontStyle",s.selectedElement.properties.fontStyle==="italic"?"normal":"italic")),class:R(["px-2 py-1 text-xs rounded",s.selectedElement.properties.fontStyle==="italic"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"])}," Italic ",2),e("button",{type:"button",onClick:t[9]||(t[9]=o=>d("textDecoration",s.selectedElement.properties.textDecoration==="underline"?"none":"underline")),class:R(["px-2 py-1 text-xs rounded",s.selectedElement.properties.textDecoration==="underline"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"])}," Underline ",2)])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Text Color ",-1)),e("div",At,[e("input",{value:s.selectedElement.properties.color||"#000000",onInput:t[10]||(t[10]=o=>d("color",y(o))),type:"color",class:"w-8 h-8 border border-gray-300 dark:border-gray-600 rounded cursor-pointer"},null,40,Ot),e("div",Lt,[(i(),u(D,null,P(b,o=>e("button",{key:o,type:"button",onClick:U=>d("color",o),style:I({backgroundColor:o}),class:"w-6 h-6 rounded border border-gray-300 dark:border-gray-600 hover:scale-110 transition-transform"},null,12,jt)),64))])])])])):h("",!0),s.selectedElement.type==="image"?(i(),u("div",Nt,[e("div",null,[t[37]||(t[37]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Image Shape ",-1)),e("select",{value:s.selectedElement.properties.imageShape||"rectangle",onChange:t[11]||(t[11]=o=>d("imageShape",y(o))),class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},[(i(),u(D,null,P(m,o=>e("option",{key:o.value,value:o.value},z(o.name),9,Xt)),64))],40,Ht)]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Image Fit ",-1)),e("select",{value:s.selectedElement.properties.imageFit||"contain",onChange:t[12]||(t[12]=o=>d("imageFit",y(o))),class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},[...t[38]||(t[38]=[e("option",{value:"contain"},"Contain",-1),e("option",{value:"cover"},"Cover",-1),e("option",{value:"fill"},"Fill",-1),e("option",{value:"scale-down"},"Scale Down",-1)])],40,Yt)]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Background ",-1)),e("div",qt,[e("div",Vt,[e("label",Kt,[e("input",{type:"radio",checked:!s.selectedElement.properties.backgroundColor||s.selectedElement.properties.backgroundColor==="transparent",onChange:t[13]||(t[13]=o=>d("backgroundColor","transparent")),class:"mr-1"},null,40,Gt),t[40]||(t[40]=e("span",{class:"text-xs"},"Transparent",-1))]),e("label",Zt,[e("input",{type:"radio",checked:s.selectedElement.properties.backgroundColor&&s.selectedElement.properties.backgroundColor!=="transparent",onChange:t[14]||(t[14]=o=>d("backgroundColor","#ffffff")),class:"mr-1"},null,40,Jt),t[41]||(t[41]=e("span",{class:"text-xs"},"Background Color",-1))])]),s.selectedElement.properties.backgroundColor&&s.selectedElement.properties.backgroundColor!=="transparent"?(i(),u("div",er,[e("input",{value:s.selectedElement.properties.backgroundColor,onInput:t[15]||(t[15]=o=>d("backgroundColor",y(o))),type:"color",class:"w-8 h-8 border border-gray-300 dark:border-gray-600 rounded cursor-pointer"},null,40,tr),e("div",rr,[(i(),u(D,null,P(b,o=>e("button",{key:o,type:"button",onClick:U=>d("backgroundColor",o),style:I({backgroundColor:o}),class:"w-6 h-6 rounded border border-gray-300 dark:border-gray-600 hover:scale-110 transition-transform"},null,12,or)),64))])])):h("",!0)])])])):h("",!0),["rectangle","circle","triangle","star"].includes(s.selectedElement.type)?(i(),u("div",ar,[t[43]||(t[43]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Fill Color ",-1)),e("div",sr,[e("input",{value:s.selectedElement.properties.fillColor||"#000000",onInput:t[16]||(t[16]=o=>d("fillColor",y(o))),type:"color",class:"w-8 h-8 border border-gray-300 dark:border-gray-600 rounded cursor-pointer"},null,40,lr),e("div",nr,[(i(),u(D,null,P(b,o=>e("button",{key:o,type:"button",onClick:U=>d("fillColor",o),style:I({backgroundColor:o}),class:"w-6 h-6 rounded border border-gray-300 dark:border-gray-600 hover:scale-110 transition-transform"},null,12,dr)),64))])])])):h("",!0),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Stroke Color ",-1)),e("div",ir,[e("input",{value:s.selectedElement.properties.strokeColor||"#000000",onInput:t[17]||(t[17]=o=>d("strokeColor",y(o))),type:"color",class:"w-8 h-8 border border-gray-300 dark:border-gray-600 rounded cursor-pointer"},null,40,ur),e("div",gr,[(i(),u(D,null,P(b,o=>e("button",{key:o,type:"button",onClick:U=>d("strokeColor",o),style:I({backgroundColor:o}),class:"w-6 h-6 rounded border border-gray-300 dark:border-gray-600 hover:scale-110 transition-transform"},null,12,pr)),64))])])]),s.selectedElement.type!=="text"?(i(),u("div",cr,[e("div",mr,[e("input",{checked:s.selectedElement.properties.hasBorder||!1,onChange:t[18]||(t[18]=o=>d("hasBorder",W(o))),type:"checkbox",class:"rounded"},null,40,br),t[45]||(t[45]=e("label",{class:"text-xs font-medium text-gray-500 dark:text-gray-400"}," Enable Border ",-1))]),s.selectedElement.properties.hasBorder?(i(),u("div",yr,[e("div",vr,[e("div",null,[t[46]||(t[46]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Width ",-1)),e("input",{value:s.selectedElement.properties.borderWidth||1,onInput:t[19]||(t[19]=o=>d("borderWidth",parseInt(y(o))||1)),type:"number",min:"1",max:"20",class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},null,40,xr)]),e("div",null,[t[47]||(t[47]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Style ",-1)),e("select",{value:s.selectedElement.properties.borderStyle||"solid",onChange:t[20]||(t[20]=o=>d("borderStyle",y(o))),class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},[(i(),u(D,null,P(v,o=>e("option",{key:o.value,value:o.value},z(o.name),9,fr)),64))],40,kr)])]),e("div",null,[t[48]||(t[48]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Border Radius ",-1)),e("input",{value:s.selectedElement.properties.borderRadius||0,onInput:t[21]||(t[21]=o=>d("borderRadius",parseInt(y(o))||0)),type:"number",min:"0",max:"50",class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},null,40,hr)])])):h("",!0)])):h("",!0),e("div",null,[t[49]||(t[49]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Shadow ",-1)),e("select",{value:s.selectedElement.properties.boxShadow||"none",onChange:t[22]||(t[22]=o=>d("boxShadow",y(o))),class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},[(i(),u(D,null,P(C,o=>e("option",{key:o.value,value:o.value},z(o.name),9,Cr)),64))],40,wr)])])):h("",!0),c.value==="position"?(i(),u("div",Er,[e("div",Sr,[e("div",null,[t[50]||(t[50]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," X Position ",-1)),e("input",{value:s.selectedElement.x,onInput:t[23]||(t[23]=o=>d("x",parseInt(y(o))||0)),type:"number",class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},null,40,$r)]),e("div",null,[t[51]||(t[51]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Y Position ",-1)),e("input",{value:s.selectedElement.y,onInput:t[24]||(t[24]=o=>d("y",parseInt(y(o))||0)),type:"number",class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},null,40,Tr)])]),e("div",Ir,[e("div",null,[t[52]||(t[52]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Width ",-1)),e("input",{value:s.selectedElement.width,onInput:t[25]||(t[25]=o=>d("width",parseFloat(y(o))||10)),type:"number",step:"0.5",min:"10",class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},null,40,Fr)]),e("div",null,[t[53]||(t[53]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"}," Height ",-1)),e("input",{value:s.selectedElement.height,onInput:t[26]||(t[26]=o=>d("height",parseFloat(y(o))||10)),type:"number",step:"0.5",min:"10",class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},null,40,Mr)])]),e("div",Br,[t[54]||(t[54]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Layer",-1)),e("div",Dr,[e("button",{type:"button",onClick:t[27]||(t[27]=o=>k("bringToFront",s.selectedElement.id)),class:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"},[$(M(Z),{class:"h-3 w-3 mx-auto"})]),e("button",{type:"button",onClick:t[28]||(t[28]=o=>k("sendToBack",s.selectedElement.id)),class:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"},[$(M(Z),{class:"h-3 w-3 mx-auto rotate-180"})])])]),e("div",zr,[e("button",{type:"button",onClick:t[29]||(t[29]=o=>k("duplicateElement",s.selectedElement.id)),class:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm"},[$(M(de),{class:"h-4 w-4"}),t[55]||(t[55]=K(" Duplicate ",-1))]),e("button",{type:"button",onClick:t[30]||(t[30]=o=>k("deleteElement",s.selectedElement.id)),class:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm"},[$(M(ie),{class:"h-4 w-4"}),t[56]||(t[56]=K(" Delete Element ",-1))])])])):h("",!0)])])])):h("",!0)}}),_r={class:"w-full px-2 sm:px-4 py-4"},Qr={class:"w-full"},Rr={class:"flex flex-col xl:flex-row gap-4"},Wr={class:"flex-1 min-w-0"},Ur={class:"w-full xl:w-80 flex-shrink-0 space-y-4"},to=N({__name:"Create",props:{template:{}},setup(_){const E=_;me();const x=G(()=>!!E.template),k=G(()=>[{title:"Dashboard",href:he().url},{title:"Templates",href:ke.index().url},{title:x.value?"Edit Template":"Create Template",href:"#"}]),c=S({name:"",width:800,height:600,background_image:null,canvas_data:[]}),w=S(null);le(()=>{if(x.value&&E.template){c.value.name=E.template.name,c.value.width=E.template.width,c.value.height=E.template.height;let r=E.template.canvas_data;if(typeof r=="string")try{r=JSON.parse(r)}catch{r=[]}s.value=Array.isArray(r)?r:[],E.template.background_image&&(w.value=`/storage/${E.template.background_image}`)}});const C=S("select"),v=S(null),m=S(!1),b=S({x:0,y:0}),d=S(!1);S(!1),S(""),S({x:0,y:0,width:0,height:0,fontSize:0});const y=S(!1),W=S(null),s=S([]);be(v,()=>{},{deep:!0});const t=(r,n,p)=>{const f=s.value.length>0?Math.max(...s.value.map(V=>V.zIndex)):0,F={id:Date.now().toString(),type:r,x:n,y:p,width:r==="text"?200:100,height:r==="text"?50:100,rotation:0,zIndex:f+1,properties:{text:r==="text"?"Sample Text":"",fontSize:r==="text"?16:void 0,fontFamily:r==="text"?"Arial":void 0,fontWeight:r==="text"?"normal":void 0,fontStyle:r==="text"?"normal":void 0,textDecoration:r==="text"?"none":void 0,textAlign:r==="text"?"left":void 0,lineHeight:r==="text"?1.2:void 0,color:r==="text"?"#000000":void 0,fillColor:r==="text"?"transparent":"#000000",strokeColor:"#000000",strokeWidth:1,hasBorder:!1,borderWidth:1,borderStyle:"solid",borderColor:"#000000",borderRadius:0,boxShadow:"none",textShadow:"none",imageUrl:r==="image"?"":void 0,imageFit:r==="image"?"contain":void 0,backgroundColor:r==="text"||r==="image"?"transparent":"#000000",imageShape:r==="image"?"rectangle":void 0}};s.value.push(F),v.value=F,C.value="select"},o=r=>{v.value=r,C.value="select"},U=(r,n,p)=>{const f=s.value.findIndex(F=>F.id===r);if(f!==-1){const F=s.value[f];F.properties={...F.properties,[n]:p},s.value[f]={...F},v.value?.id===r&&(v.value={...F})}},J=r=>{if(C.value!=="select"){const n=r.target.getBoundingClientRect(),p=r.clientX-n.left,f=r.clientY-n.top;t(C.value,p,f)}},ee=(r,n)=>{C.value==="select"&&(r.preventDefault(),m.value=!0,b.value={x:r.clientX-n.x,y:r.clientY-n.y},v.value=n)},A=r=>{m.value&&v.value&&(v.value.x=r.clientX-b.value.x,v.value.y=r.clientY-b.value.y)},T=r=>{m.value=!1},H=r=>{const n=s.value.find(p=>p.id===r);if(n){const p=Math.max(...s.value.map(f=>f.zIndex));n.zIndex=p+1}},X=r=>{const n=s.value.find(p=>p.id===r);if(n){const p=Math.min(...s.value.map(f=>f.zIndex));n.zIndex=p-1}},Y=r=>{const n=s.value.find(p=>p.id===r);if(n){const p=Math.max(...s.value.map(F=>F.zIndex)),f={...n,id:Date.now().toString(),x:n.x+20,y:n.y+20,zIndex:p+1};s.value.push(f),v.value=f}},q=r=>{const n=s.value.findIndex(p=>p.id===r);n!==-1&&(s.value.splice(n,1),v.value?.id===r&&(v.value=null))},l=(r,n,p,f,F,V)=>{const Q=s.value.find(ue=>ue.id===r);Q&&(Q.width=n,Q.height=p,Q.x=f,Q.y=F,Q.type==="text"&&V!==void 0&&(Q.properties.fontSize=V),v.value?.id===r&&(v.value={...Q}))},g=r=>{W.value=r,r.name!=="Custom"&&(c.value.width=r.width,c.value.height=r.height),y.value=!1},a=r=>{console.log("Background image file selected:",r),c.value.background_image=r;const n=new FileReader;n.onload=p=>{const f=p.target?.result;console.log("Background image preview created:",f?"Yes":"No"),w.value=f},n.readAsDataURL(r)},B=async()=>{if(c.value.width<100||c.value.height<100){j.fire({title:"Invalid Dimensions",text:"Canvas dimensions must be at least 100x100 pixels",icon:"warning",confirmButtonText:"OK"});return}if(!c.value.name.trim()){j.fire({title:"Missing Template Name",text:"Please enter a template name",icon:"warning",confirmButtonText:"OK"});return}d.value=!0;try{const r=new FormData;if(r.append("name",c.value.name),r.append("width",c.value.width.toString()),r.append("height",c.value.height.toString()),r.append("canvas_data",JSON.stringify(s.value)),c.value.background_image&&r.append("background_image",c.value.background_image),x.value){const n=await re.post(`/templates/${E.template?.id}`,r,{headers:{"Content-Type":"multipart/form-data"}});j.fire({title:"Success!",text:"Template updated successfully.",icon:"success",position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,toast:!0}).then(()=>{oe.visit("/templates")})}else{const n=await re.post("/templates",r,{headers:{"Content-Type":"multipart/form-data"}});j.fire({title:"Success!",text:"Template created successfully.",icon:"success",position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,toast:!0}).then(()=>{oe.visit("/templates")})}}catch(r){console.error("Error submitting form:",r);let n="An unexpected error occurred. Please try again.";if(r.response&&r.response.data&&r.response.data.message)n=r.response.data.message;else if(r.response&&r.response.data&&r.response.data.errors){const p=r.response.data.errors,f=Object.values(p)[0];Array.isArray(f)&&f.length>0&&(n=f[0])}j.fire({title:"Error!",text:n,icon:"error",confirmButtonText:"OK"})}finally{d.value=!1}},O=r=>{r.target.closest(".quick-template-dropdown")||(y.value=!1)},te=r=>{r.key==="Escape"&&(y.value=!1)};return(r,n)=>(i(),u(D,null,[$(M(ye),{title:x.value?"Edit Template":"Create Template"},null,8,["title"]),$(fe,{breadcrumbs:k.value},{default:ve(()=>[e("div",{class:"min-h-screen bg-gray-50 dark:bg-gray-900",onClick:O,onKeydown:te},[e("div",_r,[e("form",{onSubmit:ne(B,["prevent"]),class:"space-y-6"},[e("div",Qr,[$(qe,{form:c.value,"onUpdate:form":n[0]||(n[0]=p=>c.value=p),backgroundImagePreview:w.value,"onUpdate:backgroundImagePreview":n[1]||(n[1]=p=>w.value=p),selectedQuickTemplate:W.value,"onUpdate:selectedQuickTemplate":n[2]||(n[2]=p=>W.value=p),isQuickTemplateDropdownOpen:y.value,"onUpdate:isQuickTemplateDropdownOpen":n[3]||(n[3]=p=>y.value=p),"is-edit-mode":x.value,"is-submitting":d.value,onBackgroundImageChange:a,onApplyQuickTemplate:g},null,8,["form","backgroundImagePreview","selectedQuickTemplate","isQuickTemplateDropdownOpen","is-edit-mode","is-submitting"])]),e("div",Rr,[e("div",Wr,[$(xt,{form:c.value,backgroundImagePreview:w.value,canvasElements:s.value,selectedElement:v.value,selectedTool:C.value,onCanvasClick:J,onElementMouseDown:ee,onMouseMove:A,onMouseUp:T,onSelectElement:o,onBringToFront:H,onSendToBack:X,onDuplicateElement:Y,onDeleteElement:q,onResizeElement:l,onBackgroundImageChange:a},null,8,["form","backgroundImagePreview","canvasElements","selectedElement","selectedTool"])]),e("div",Ur,[$(Ct,{selectedTool:C.value,"onUpdate:selectedTool":n[4]||(n[4]=p=>C.value=p)},null,8,["selectedTool"]),$(Pr,{selectedElement:v.value,onUpdateElement:U,onBringToFront:H,onSendToBack:X,onDuplicateElement:Y,onDeleteElement:q},null,8,["selectedElement"])])])],32)])],32)]),_:1},8,["breadcrumbs"])],64))}});export{to as default};
